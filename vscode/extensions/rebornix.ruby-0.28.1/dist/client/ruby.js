module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t){e.exports=require("vscode")},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);t.ErrorCodes=i.ErrorCodes,t.ResponseError=i.ResponseError,t.CancellationToken=i.CancellationToken,t.CancellationTokenSource=i.CancellationTokenSource,t.Disposable=i.Disposable,t.Event=i.Event,t.Emitter=i.Emitter,t.Trace=i.Trace,t.TraceFormat=i.TraceFormat,t.SetTraceNotification=i.SetTraceNotification,t.LogTraceNotification=i.LogTraceNotification,t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.MessageReader=i.MessageReader,t.MessageWriter=i.MessageWriter,t.ConnectionStrategy=i.ConnectionStrategy,t.StreamMessageReader=i.StreamMessageReader,t.StreamMessageWriter=i.StreamMessageWriter,t.IPCMessageReader=i.IPCMessageReader,t.IPCMessageWriter=i.IPCMessageWriter,t.createClientPipeTransport=i.createClientPipeTransport,t.createServerPipeTransport=i.createServerPipeTransport,t.generateRandomPipeName=i.generateRandomPipeName,t.createClientSocketTransport=i.createClientSocketTransport,t.createServerSocketTransport=i.createServerSocketTransport,r(n(75)),r(n(76)),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),o=n(69);t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.RequestType1=o.RequestType1,t.RequestType2=o.RequestType2,t.RequestType3=o.RequestType3,t.RequestType4=o.RequestType4,t.RequestType5=o.RequestType5,t.RequestType6=o.RequestType6,t.RequestType7=o.RequestType7,t.RequestType8=o.RequestType8,t.RequestType9=o.RequestType9,t.ResponseError=o.ResponseError,t.ErrorCodes=o.ErrorCodes,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.NotificationType1=o.NotificationType1,t.NotificationType2=o.NotificationType2,t.NotificationType3=o.NotificationType3,t.NotificationType4=o.NotificationType4,t.NotificationType5=o.NotificationType5,t.NotificationType6=o.NotificationType6,t.NotificationType7=o.NotificationType7,t.NotificationType8=o.NotificationType8,t.NotificationType9=o.NotificationType9;const s=n(12);t.MessageReader=s.MessageReader,t.StreamMessageReader=s.StreamMessageReader,t.IPCMessageReader=s.IPCMessageReader,t.SocketMessageReader=s.SocketMessageReader;const a=n(13);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const u=n(11);t.Disposable=u.Disposable,t.Event=u.Event,t.Emitter=u.Emitter;const c=n(70);t.CancellationTokenSource=c.CancellationTokenSource,t.CancellationToken=c.CancellationToken;const l=n(71);var f,d,h,p,g,m,v;r(n(72)),r(n(74)),function(e){e.type=new o.NotificationType("$/cancelRequest")}(f||(f={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(d=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(d=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTraceNotification")}(p=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTraceNotification")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(m=t.ConnectionErrors||(t.ConnectionErrors={}));class y extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,y.prototype)}}function _(e,t,n,r){let s=0,a=0,_=0;const w="2.0";let b,C,x=void 0,R=Object.create(null),S=void 0,k=Object.create(null),T=new l.LinkedMap,D=Object.create(null),P=Object.create(null),E=d.Off,O=h.Text,j=v.New,q=new u.Emitter,F=new u.Emitter,M=new u.Emitter,L=new u.Emitter;function I(e){return"req-"+e.toString()}function N(e,t){var n;o.isRequestMessage(t)?e.set(I(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++_).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}function A(e){}function $(){return j===v.Listening}function W(){return j===v.Closed}function K(){return j===v.Disposed}function z(){j!==v.New&&j!==v.Listening||(j=v.Closed,F.fire(void 0))}function U(){b||0===T.size||(b=setImmediate(()=>{b=void 0,function(){if(0===T.size)return;let e=T.shift();try{o.isRequestMessage(e)?function(e){if(K())return;function n(n,r,i){let s={jsonrpc:w,id:e.id};n instanceof o.ResponseError?s.error=n.toJson():s.result=void 0===n?null:n,B(s,r,i),t.write(s)}function r(n,r,i){let o={jsonrpc:w,id:e.id,error:n.toJson()};B(o,r,i),t.write(o)}!function(e){if(E===d.Off||!C)return;if(O===h.Text){let t=void 0;E===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Received request '${e.method} - (${e.id})'.`,t)}else V("receive-request",e)}(e);let s,a,u=R[e.method];u&&(s=u.type,a=u.handler);let l=Date.now();if(a||x){let u=new c.CancellationTokenSource,f=String(e.id);P[f]=u;try{let c,d=c=void 0===e.params||void 0!==s&&0===s.numberOfParams?a?a(u.token):x(e.method,u.token):i.array(e.params)&&(void 0===s||s.numberOfParams>1)?a?a(...e.params,u.token):x(e.method,...e.params,u.token):a?a(e.params,u.token):x(e.method,e.params,u.token);c?d.then?d.then(t=>{delete P[f],n(t,e.method,l)},t=>{delete P[f],t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(delete P[f],n(c,e.method,l)):(delete P[f],function(n,r,i){void 0===n&&(n=null);let o={jsonrpc:w,id:e.id,result:n};B(o,r,i),t.write(o)}(c,e.method,l))}catch(t){delete P[f],t instanceof o.ResponseError?n(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.isNotificationMessage(e)?function(e){if(K())return;let t,r=void 0;if(e.method===f.type.method)t=e=>{let t=e.id,n=P[String(t)];n&&n.cancel()};else{let n=k[e.method];n&&(t=n.handler,r=n.type)}if(t||S)try{!function(e){if(E===d.Off||!C||e.method===g.type.method)return;if(O===h.Text){let t=void 0;E===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Received notification '${e.method}'.`,t)}else V("receive-notification",e)}(e),void 0===e.params||void 0!==r&&0===r.numberOfParams?t?t():S(e.method):i.array(e.params)&&(void 0===r||r.numberOfParams>1)?t?t(...e.params):S(e.method,...e.params):t?t(e.params):S(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else M.fire(e)}(e):o.isResponseMessage(e)?function(e){if(K())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=D[t];if(function(e,t){if(E===d.Off||!C)return;if(O===h.Text){let n=void 0;if(E===d.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";C.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else C.log(`Received response ${e.id} without active response promise.`,n)}else V("receive-response",e)}(e,r),r){delete D[t];try{if(e.error){let t=e.error;r.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(i.string(t.id)||i.number(t.id)){let e=String(t.id),n=D[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{U()}}()}))}e.onClose(z),e.onError(function(e){q.fire([e,void 0,void 0])}),t.onClose(z),t.onError(function(e){q.fire(e)});let H=e=>{try{if(o.isNotificationMessage(e)&&e.method===f.type.method){let n=I(e.params.id),i=T.get(n);if(o.isRequestMessage(i)){let o=r&&r.cancelUndispatched?r.cancelUndispatched(i,A):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return T.delete(n),o.id=i.id,B(o,e.method,Date.now()),void t.write(o)}}N(T,e)}finally{U()}};function B(e,t,n){if(E!==d.Off&&C)if(O===h.Text){let r=void 0;E===d.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),C.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else V("send-response",e)}function V(e,t){if(!C||E===d.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};C.log(n)}function J(){if(W())throw new y(m.Closed,"Connection is closed.");if(K())throw new y(m.Disposed,"Connection is disposed.")}function G(e){return void 0===e?null:e}function Q(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=G(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(G(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let Z={sendNotification:(e,...n)=>{let r,o;if(J(),i.string(e))switch(r=e,n.length){case 0:o=null;break;case 1:o=n[0];break;default:o=n}else r=e.method,o=Q(e,n);let s={jsonrpc:w,method:r,params:o};!function(e){if(E!==d.Off&&C)if(O===h.Text){let t=void 0;E===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Sending notification '${e.method}'.`,t)}else V("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{J(),i.func(e)?S=e:t&&(i.string(e)?k[e]={type:void 0,handler:t}:k[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let r,a;J(),function(){if(!$())throw new Error("Call listen() first.")}();let u=void 0;if(i.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:c.CancellationToken.is(n[0])?(a=null,u=n[0]):a=G(n[0]);break;default:const t=n.length-1;c.CancellationToken.is(n[t])?(u=n[t],a=2===n.length?G(n[0]):n.slice(0,t).map(e=>G(e))):a=n.map(e=>G(e))}else{r=e.method,a=Q(e,n);let t=e.numberOfParams;u=c.CancellationToken.is(n[t])?n[t]:void 0}let l=s++,p=new Promise((e,n)=>{let i={jsonrpc:w,id:l,method:r,params:a},s={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(E!==d.Off&&C)if(O===h.Text){let t=void 0;E===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Sending request '${e.method} - (${e.id})'.`,t)}else V("send-request",e)}(i);try{t.write(i)}catch(e){s.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&(D[String(l)]=s)});return u&&u.onCancellationRequested(()=>{Z.sendNotification(f.type,{id:l})}),p},onRequest:(e,t)=>{J(),i.func(e)?x=e:t&&(i.string(e)?R[e]={type:void 0,handler:t}:R[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,o=h.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||h.Text)),O=o,C=(E=e)===d.Off?void 0:t,!r||W()||K()||Z.sendNotification(p.type,{value:d.toString(e)})},onError:q.event,onClose:F.event,onUnhandledNotification:M.event,onDispose:L.event,dispose:()=>{if(K())return;j=v.Disposed,L.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(D).forEach(e=>{D[e].reject(n)}),D=Object.create(null),P=Object.create(null),T=new l.LinkedMap,i.func(t.dispose)&&t.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{J(),function(){if($())throw new y(m.AlreadyListening,"Connection is already listening")}(),j=v.Listening,e.listen(H)},inspect:()=>{console.log("inspect")}};return Z.onNotification(g.type,e=>{E!==d.Off&&C&&C.log(e.message,E===d.Verbose?e.verbose:void 0)}),Z}t.ConnectionError=y,function(e){e.is=function(e){let t=e;return t&&i.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,n,r,i){var o;return r||(r=t.NullLogger),_(void 0!==(o=e).listen&&void 0===o.read?e:new s.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n),r,i)}},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&i(e.then)}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(1),o=n(85),s=n(86),a=n(3),u=n(87),c=n(7);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1));class l{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}var f,d,h,p,g;!function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(f=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(d=t.CloseAction||(t.CloseAction={}));class m{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?f.Continue:f.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<5)return d.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(r.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),d.DoNotRestart):(this.restarts.shift(),d.Restart)}}!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(h=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(p=t.State||(t.State={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(g||(g={}));const v=[i.SymbolKind.File,i.SymbolKind.Module,i.SymbolKind.Namespace,i.SymbolKind.Package,i.SymbolKind.Class,i.SymbolKind.Method,i.SymbolKind.Property,i.SymbolKind.Field,i.SymbolKind.Constructor,i.SymbolKind.Enum,i.SymbolKind.Interface,i.SymbolKind.Function,i.SymbolKind.Variable,i.SymbolKind.Constant,i.SymbolKind.String,i.SymbolKind.Number,i.SymbolKind.Boolean,i.SymbolKind.Array,i.SymbolKind.Object,i.SymbolKind.Key,i.SymbolKind.Null,i.SymbolKind.EnumMember,i.SymbolKind.Struct,i.SymbolKind.Event,i.SymbolKind.Operator,i.SymbolKind.TypeParameter],y=[i.CompletionItemKind.Text,i.CompletionItemKind.Method,i.CompletionItemKind.Function,i.CompletionItemKind.Constructor,i.CompletionItemKind.Field,i.CompletionItemKind.Variable,i.CompletionItemKind.Class,i.CompletionItemKind.Interface,i.CompletionItemKind.Module,i.CompletionItemKind.Property,i.CompletionItemKind.Unit,i.CompletionItemKind.Value,i.CompletionItemKind.Enum,i.CompletionItemKind.Keyword,i.CompletionItemKind.Snippet,i.CompletionItemKind.Color,i.CompletionItemKind.File,i.CompletionItemKind.Reference,i.CompletionItemKind.Folder,i.CompletionItemKind.EnumMember,i.CompletionItemKind.Constant,i.CompletionItemKind.Struct,i.CompletionItemKind.Event,i.CompletionItemKind.Operator,i.CompletionItemKind.TypeParameter];function _(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var w;!function(e){e.is=function(e){let t=e;return t&&a.func(t.register)&&a.func(t.unregister)&&a.func(t.dispose)&&void 0!==t.messages}}(w||(w={}));class b{constructor(e,t,n,r,i,o){this._client=e,this._event=t,this._type=n,this._middleware=r,this._createParams=i,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(const n of e)if(r.languages.match(n,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,e=>this._client.sendNotification(this._type,this._createParams(e))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class C extends b{constructor(e,t){super(e,r.workspace.onDidOpenTextDocument,i.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t),b.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;r.workspace.textDocuments.forEach(e=>{let t=e.uri.toString();if(!this._syncedDocuments.has(t)&&r.languages.match(n,e)){let n=this._client.clientOptions.middleware,r=e=>{this._client.sendNotification(this._type,this._createParams(e))};n.didOpen?n.didOpen(e,r):r(e),this._syncedDocuments.set(t,e)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class x extends b{constructor(e,t){super(e,r.workspace.onDidCloseTextDocument,i.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t),b.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(e=>{if(r.languages.match(t,e)&&!this._selectorFilter(n,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,n):n(e)}})}}class R{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return i.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==i.TextDocumentSyncKind.None&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const t of this._changeData.values())if(r.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===i.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)):this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)}else if(t.syncKind===i.TextDocumentSyncKind.Full){let t=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))})):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new u.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))},-1))};n.didChange?n.didChange(e,t):t(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}}class S extends b{constructor(e){super(e,r.workspace.onWillSaveTextDocument,i.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(e,t)=>b.textDocumentFilter(e,t.document))}get messages(){return i.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}}class k{constructor(e){this._client=e,this._selectors=new Map}get messages(){return i.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(b.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=e=>this._client.sendRequest(i.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then(e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class T extends b{constructor(e){super(e,r.workspace.onDidSaveTextDocument,i.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),b.textDocumentFilter)}get messages(){return i.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.save&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!n.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}}class D{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return i.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){_(_(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let e of t.registerOptions.watchers){if(!a.string(e.globPattern))continue;let t=!0,o=!0,s=!0;void 0!==e.kind&&null!==e.kind&&(t=0!=(e.kind&i.WatchKind.Create),o=0!=(e.kind&i.WatchKind.Change),s=0!=(e.kind&i.WatchKind.Delete));let u=r.workspace.createFileSystemWatcher(e.globPattern,!t,!o,!s);this.hookListeners(u,t,o,s),n.push(u)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,r,o){t&&e.onDidCreate(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Created}),null,o),n&&e.onDidChange(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Changed}),null,o),r&&e.onDidDelete(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}}class P{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}t.TextDocumentFeature=P;class E{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}class O extends P{constructor(e){super(e,i.CompletionRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:y}}initialize(e,t){e.completionProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n=this._client,o=(e,t,r,o)=>n.sendRequest(i.CompletionRequest.type,n.code2ProtocolConverter.asCompletionParams(e,t,r),o).then(n.protocol2CodeConverter.asCompletionResult,e=>(n.logFailedRequest(i.CompletionRequest.type,e),Promise.resolve([]))),s=(e,t)=>n.sendRequest(i.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(e),t).then(n.protocol2CodeConverter.asCompletionItem,t=>(n.logFailedRequest(i.CompletionResolveRequest.type,t),Promise.resolve(e))),a=this._client.clientOptions.middleware;return r.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(e,t,n,r)=>a.provideCompletionItem?a.provideCompletionItem(e,t,r,n,o):o(e,t,r,n),resolveCompletionItem:e.resolveProvider?(e,t)=>a.resolveCompletionItem?a.resolveCompletionItem(e,t,s):s(e,t):void 0},...t)}}class j extends P{constructor(e){super(e,i.HoverRequest.type)}fillClientCapabilities(e){const t=_(_(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}initialize(e,t){e.hoverProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asHover,e=>(t.logFailedRequest(i.HoverRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware;return r.languages.registerHoverProvider(e.documentSelector,{provideHover:(e,t,r)=>o.provideHover?o.provideHover(e,t,r,n):n(e,t,r)})}}class q extends P{constructor(e){super(e,i.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(e,t){e.signatureHelpProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asSignatureHelp,e=>(t.logFailedRequest(i.SignatureHelpRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware,s=e.triggerCharacters||[];return r.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(e,t,r)=>o.provideSignatureHelp?o.provideSignatureHelp(e,t,r,n):n(e,t,r)},...s)}}class F extends P{constructor(e){super(e,i.DefinitionRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){e.definitionProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(i.DefinitionRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware;return r.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(e,t,r)=>o.provideDefinition?o.provideDefinition(e,t,r,n):n(e,t,r)})}}class M extends P{constructor(e){super(e,i.ReferencesRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){e.referencesProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>t.sendRequest(i.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(e,n,r),o).then(t.protocol2CodeConverter.asReferences,e=>(t.logFailedRequest(i.ReferencesRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(e,t,r,i)=>o.provideReferences?o.provideReferences(e,t,r,i,n):n(e,t,r,i)})}}class L extends P{constructor(e){super(e,i.DocumentHighlightRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){e.documentHighlightProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDocumentHighlights,e=>(t.logFailedRequest(i.DocumentHighlightRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(e,t,r)=>o.provideDocumentHighlights?o.provideDocumentHighlights(e,t,r,n):n(e,t,r)})}}class I extends P{constructor(e){super(e,i.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:v},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){e.documentSymbolProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(e),n).then(e=>{if(null!==e){if(0===e.length)return[];{let n=e[0];return i.DocumentSymbol.is(n)?t.protocol2CodeConverter.asDocumentSymbols(e):t.protocol2CodeConverter.asSymbolInformations(e)}}},e=>(t.logFailedRequest(i.DocumentSymbolRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(e,t)=>o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,n):n(e,t)})}}class N extends E{constructor(e){super(e,i.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=_(_(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:v}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:c.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.WorkspaceSymbolRequest.type,{query:e},n).then(t.protocol2CodeConverter.asSymbolInformations,e=>(t.logFailedRequest(i.WorkspaceSymbolRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(e,t)=>o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,n):n(e,t)})}}class A extends P{constructor(e){super(e,i.CodeActionRequest.type)}fillClientCapabilities(e){const t=_(_(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",i.CodeActionKind.QuickFix,i.CodeActionKind.Refactor,i.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorRewrite,i.CodeActionKind.Source,i.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t)return;let n=void 0;a.boolean(e.codeActionProvider)||(n=e.codeActionProvider.codeActionKinds),this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:n}})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),context:t.code2ProtocolConverter.asCodeActionContext(r)};return t.sendRequest(i.CodeActionRequest.type,s,o).then(e=>{if(null===e)return;let n=[];for(let r of e)i.Command.is(r)?n.push(t.protocol2CodeConverter.asCommand(r)):n.push(t.protocol2CodeConverter.asCodeAction(r));return n},e=>(t.logFailedRequest(i.CodeActionRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(e,t,r,i)=>o.provideCodeActions?o.provideCodeActions(e,t,r,i,n):n(e,t,r,i)},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0)}}class $ extends P{constructor(e){super(e,i.CodeLensRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){e.codeLensProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(e),n).then(t.protocol2CodeConverter.asCodeLenses,e=>(t.logFailedRequest(i.CodeLensRequest.type,e),Promise.resolve([]))),o=(e,n)=>t.sendRequest(i.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(e),n).then(t.protocol2CodeConverter.asCodeLens,n=>(t.logFailedRequest(i.CodeLensResolveRequest.type,n),e)),s=t.clientOptions.middleware;return r.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(e,t)=>s.provideCodeLenses?s.provideCodeLenses(e,t,n):n(e,t),resolveCodeLens:e.resolveProvider?(e,t)=>s.resolveCodeLens?s.resolveCodeLens(e,t,o):o(e,t):void 0})}}class W extends P{constructor(e){super(e,i.DocumentFormattingRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){e.documentFormattingProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),options:t.code2ProtocolConverter.asFormattingOptions(n)};return t.sendRequest(i.DocumentFormattingRequest.type,o,r).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentFormattingRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(e,t,r)=>o.provideDocumentFormattingEdits?o.provideDocumentFormattingEdits(e,t,r,n):n(e,t,r)})}}class K extends P{constructor(e){super(e,i.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentRangeFormattingProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),options:t.code2ProtocolConverter.asFormattingOptions(r)};return t.sendRequest(i.DocumentRangeFormattingRequest.type,s,o).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentRangeFormattingRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(e,t,r,i)=>o.provideDocumentRangeFormattingEdits?o.provideDocumentRangeFormattingEdits(e,t,r,i,n):n(e,t,r,i)})}}class z extends P{constructor(e){super(e,i.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentOnTypeFormattingProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,n=e.moreTriggerCharacter||[],o=(e,n,r,o,s)=>{let a={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),ch:r,options:t.code2ProtocolConverter.asFormattingOptions(o)};return t.sendRequest(i.DocumentOnTypeFormattingRequest.type,a,s).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentOnTypeFormattingRequest.type,e),Promise.resolve([])))},s=t.clientOptions.middleware;return r.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(e,t,n,r,i)=>s.provideOnTypeFormattingEdits?s.provideOnTypeFormattingEdits(e,t,n,r,i,o):o(e,t,n,r,i)},e.firstTriggerCharacter,...n)}}class U extends P{constructor(e){super(e,i.RenameRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){if(!e.renameProvider||!t)return;let n=Object.assign({},{documentSelector:t});a.boolean(e.renameProvider)?n.prepareProvider=!1:n.prepareProvider=e.renameProvider.prepareProvider,this.register(this.messages,{id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),newName:r};return t.sendRequest(i.RenameRequest.type,s,o).then(t.protocol2CodeConverter.asWorkspaceEdit,e=>(t.logFailedRequest(i.RenameRequest.type,e),Promise.reject(new Error(e.message))))},o=(e,n,r)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n)};return t.sendRequest(i.PrepareRenameRequest.type,o,r).then(e=>i.Range.is(e)?t.protocol2CodeConverter.asRange(e):e&&e.range?{range:t.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:null,e=>(t.logFailedRequest(i.PrepareRenameRequest.type,e),Promise.reject(new Error(e.message))))},s=t.clientOptions.middleware;return r.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(e,t,r,i)=>s.provideRenameEdits?s.provideRenameEdits(e,t,r,i,n):n(e,t,r,i),prepareRename:e.prepareProvider?(e,t,n)=>s.prepareRename?s.prepareRename(e,t,n,o):o(e,t,n):void 0})}}class H extends P{constructor(e){super(e,i.DocumentLinkRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){e.documentLinkProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(e),n).then(t.protocol2CodeConverter.asDocumentLinks,e=>{t.logFailedRequest(i.DocumentLinkRequest.type,e),Promise.resolve(new Error(e.message))}),o=(e,n)=>t.sendRequest(i.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(e),n).then(t.protocol2CodeConverter.asDocumentLink,e=>{t.logFailedRequest(i.DocumentLinkResolveRequest.type,e),Promise.resolve(new Error(e.message))}),s=t.clientOptions.middleware;return r.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(e,t)=>s.provideDocumentLinks?s.provideDocumentLinks(e,t,n):n(e,t),resolveDocumentLink:e.resolveProvider?(e,t)=>s.resolveDocumentLink?s.resolveDocumentLink(e,t,o):o(e,t):void 0})}}class B{constructor(e){this._client=e,this._listeners=new Map}get messages(){return i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){_(_(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=r.workspace.onDidChangeConfiguration(e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)});this._listeners.set(t.id,n),void 0!==t.registerOptions.section&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(void 0!==(n=a.string(e)?[e]:e)&&void 0!==t){if(!n.some(e=>t.affectsConfiguration(e)))return}let r=e=>{void 0!==e?this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})},o=this.getMiddleware();o?o(n,r):r(n)}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let r=n[t[e]];r||(r=Object.create(null),n[t[e]]=r),n=r}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),u=null;if(u=a>=0?r.workspace.getConfiguration(s.substr(0,a),n).get(s.substr(a+1)):r.workspace.getConfiguration(s,n)){let n=e[o].split(".");t(i,n)[n[n.length-1]]=u}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class V{constructor(e){this._client=e,this._commands=new Map}get messages(){return i.ExecuteCommandRequest.type}fillClientCapabilities(e){_(_(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let n=this._client;if(t.registerOptions.commands){let e=[];for(const o of t.registerOptions.commands)e.push(r.commands.registerCommand(o,(...e)=>{let t={command:o,arguments:e};return n.sendRequest(i.ExecuteCommandRequest.type,t).then(void 0,e=>{n.logFailedRequest(i.ExecuteCommandRequest.type,e)})}));this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(e=>e.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(e=>e.dispose())}),this._commands.clear()}}!function(e){e.is=function(e){return e&&i.MessageReader.is(e.reader)&&i.MessageWriter.is(e.writer)}}(t.MessageTransports||(t.MessageTransports={}));class J{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}}t.BaseLanguageClient=class{constructor(e,t,n){this._traceFormat=i.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||h.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,errorHandler:n.errorHandler||new m(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=g.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new u.Delayer(250),this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new J(e,t)}),this._onStop=void 0,this._telemetryEmitter=new i.Emitter,this._stateChangeEmitter=new i.Emitter,this._tracer={log:(e,t)=>{a.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=s.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===g.Running?p.Running:this.state===g.Starting?p.Starting:p.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(t){throw this.error(`Registering request handler ${a.string(e)?e:e.method} failed.`,t),t}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(t){throw this.error(`Registering notification handler ${a.string(e)?e:e.method} failed.`,t),t}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=r.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new m(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(e=>{e.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof i.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?a.string(e.stack)?e.stack:e.message:a.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.outputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.outputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===g.Initial||this.state===g.Stopping||this.state===g.Stopped}needsStop(){return this.state===g.Starting||this.state===g.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===g.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new J(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?r.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):r.languages.createDiagnosticCollection()),this.state=g.Starting,this.resolveConnection().then(e=>(e.onLogMessage(e=>{switch(e.type){case i.MessageType.Error:this.error(e.message);break;case i.MessageType.Warning:this.warn(e.message);break;case i.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}}),e.onShowMessage(e=>{switch(e.type){case i.MessageType.Error:r.window.showErrorMessage(e.message);break;case i.MessageType.Warning:r.window.showWarningMessage(e.message);break;case i.MessageType.Info:r.window.showInformationMessage(e.message);break;default:r.window.showInformationMessage(e.message)}}),e.onRequest(i.ShowMessageRequest.type,e=>{let t;switch(e.type){case i.MessageType.Error:t=r.window.showErrorMessage;break;case i.MessageType.Warning:t=r.window.showWarningMessage;break;case i.MessageType.Info:t=r.window.showInformationMessage;break;default:t=r.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)}),e.onTelemetry(e=>{this._telemetryEmitter.fire(e)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=g.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),r.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new r.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:process.pid,rootPath:n||null,rootUri:n?this._c2p.asUri(r.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:i.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(o),e.initialize(o).then(t=>{this._resolvedConnection=e,this._initializeResult=t,this.state=g.Running;let n=void 0;return a.number(t.capabilities.textDocumentSync)?n=t.capabilities.textDocumentSync===i.TextDocumentSyncKind.None?{openClose:!1,change:i.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(n=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:n}),e.onDiagnostics(e=>this.handleDiagnostics(e)),e.onRequest(i.RegistrationRequest.type,e=>this.handleRegistrationRequest(e)),e.onRequest("client/registerFeature",e=>this.handleRegistrationRequest(e)),e.onRequest(i.UnregistrationRequest.type,e=>this.handleUnregistrationRequest(e)),e.onRequest("client/unregisterFeature",e=>this.handleUnregistrationRequest(e)),e.onRequest(i.ApplyWorkspaceEditRequest.type,e=>this.handleApplyWorkspaceEdit(e)),e.sendNotification(i.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t}).then(void 0,t=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t)):t instanceof i.ResponseError&&t.data&&t.data.retry?r.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then(n=>{n&&"retry"===n.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t))}):(t&&t.message&&r.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop(),this._onReadyCallbacks.reject(t))})}_clientGetRootPath(){let e=r.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===g.Stopping&&this._onStop?this._onStop:(this.state=g.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=g.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=g.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(e=>e.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(e=>e.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let e of this._dynamicFeatures.values())e.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(e=>{this.isConnectionActive()&&e.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},e=>{this.error("Notify file events failed.",e)})})}forceDocumentSync(){this._dynamicFeatures.get(i.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),r=this.clientOptions.middleware.handleDiagnostics;r?r(t,n,(e,t)=>this.setDiagnostics(e,t)):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,n)=>{this.handleConnectionError(e,t,n)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>(function(e,t,n,r){let o=new l,s=i.createProtocolConnection(e,t,o);return s.onError(e=>{n(e[0],e[1],e[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(a.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(a.string(e)?e:e.method,t),sendNotification:(e,t)=>s.sendNotification(a.string(e)?e:e.method,t),onNotification:(e,t)=>s.onNotification(a.string(e)?e:e.method,t),trace:(e,t,n)=>{const r={sendNotification:!1,traceFormat:i.TraceFormat.Text};void 0===n?s.trace(e,t,r):(a.boolean(n),s.trace(e,t,n))},initialize:e=>s.sendRequest(i.InitializeRequest.type,e),shutdown:()=>s.sendRequest(i.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(i.ExitNotification.type),onLogMessage:e=>s.onNotification(i.LogMessageNotification.type,e),onShowMessage:e=>s.onNotification(i.ShowMessageNotification.type,e),onTelemetry:e=>s.onNotification(i.TelemetryEventNotification.type,e),didChangeConfiguration:e=>s.sendNotification(i.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>s.sendNotification(i.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>s.sendNotification(i.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>s.sendNotification(i.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>s.sendNotification(i.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>s.sendNotification(i.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>s.onNotification(i.PublishDiagnosticsNotification.type,e),dispose:()=>s.dispose()}})(n.reader,n.writer,e,t))}handleConnectionClosed(){if(this.state===g.Stopping||this.state===g.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(e){}let e=d.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===d.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=g.Stopped,this.cleanUp(!1,!0)):e===d.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=g.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===f.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){r.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=r.workspace.getConfiguration(this._id),o=i.Trace.Off,s=i.TraceFormat.Text;if(n){const e=n.get("trace.server","off");"string"==typeof e?o=i.Trace.fromString(e):(o=i.Trace.fromString(n.get("trace.server.verbosity","off")),s=i.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=a.array(n)?n:[n])&&this._dynamicFeatures.get(i.DidChangeWatchedFilesNotification.type.method).registerRaw(c.generateUuid(),t)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),w.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new B(this)),this.registerFeature(new C(this,this._syncedDocuments)),this.registerFeature(new R(this)),this.registerFeature(new S(this)),this.registerFeature(new k(this)),this.registerFeature(new T(this)),this.registerFeature(new x(this,this._syncedDocuments)),this.registerFeature(new D(this,e=>this.notifyFileEvent(e))),this.registerFeature(new O(this)),this.registerFeature(new j(this)),this.registerFeature(new q(this)),this.registerFeature(new F(this)),this.registerFeature(new M(this)),this.registerFeature(new L(this)),this.registerFeature(new I(this)),this.registerFeature(new N(this)),this.registerFeature(new A(this)),this.registerFeature(new $(this)),this.registerFeature(new W(this)),this.registerFeature(new K(this)),this.registerFeature(new z(this)),this.registerFeature(new U(this)),this.registerFeature(new H(this)),this.registerFeature(new V(this))}fillInitializeParams(e){for(let t of this._features)a.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};_(e,"workspace").applyEdit=!0;let t=_(_(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[i.ResourceOperationKind.Create,i.ResourceOperationKind.Rename,i.ResourceOperationKind.Delete],t.failureHandling=i.FailureHandlingKind.TextOnlyTransactional,_(_(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features)e.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const r=t.registerOptions||{};r.documentSelector=r.documentSelector||this._clientOptions.documentSelector;const i={id:t.id,registerOptions:r};e.register(this._method2Message.get(t.method),i)}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;r.workspace.textDocuments.forEach(e=>n.set(e.uri.toString(),e));let o=!1;if(t.documentChanges)for(const e of t.documentChanges)if(i.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=n.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){o=!0;break}}return o?Promise.resolve({applied:!1}):r.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(e=>({applied:e}))}logFailedRequest(e,t){t instanceof i.ResponseError&&t.code===i.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class i extends r{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}function o(){return new i}i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=o;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return s.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return o().asHex()}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),i=0,o=n.length;i<o;i++)try{t.push(n[i].apply(r[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class i{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{let o;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i._noop=function(){},t.Emitter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(10);let o=8192,s=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0],u="\r\n";class c{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/o)+1)*o;0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==s||this.buffer[t+1]!==a||this.buffer[t+2]!==s||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(u).forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),i=t.substr(n+1).trim();e[r]=i});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class l{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class f extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new c(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=f;t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends f{constructor(e,t="utf-8"){super(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(10);let o="Content-Length: ",s="\r\n";!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a;t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.sending=!0,this.socket.write(r.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(0)),s=i(n(8));function a(e,t){return new Promise((n,r)=>{s.exec(e,t,(e,t,i)=>{e&&r({error:e,stdout:t,stderr:i}),n({stdout:t,stderr:i})})})}let u;function c(){return u||(u=o.window.createOutputChannel("Ruby"),o.commands.registerCommand("ruby.showOutputChannel",()=>{u.show()})),u}t.exec=a,t.getOutputChannel=c,t.loadEnv=function(){return r(this,void 0,void 0,function*(){let{stdout:e,stderr:t}=yield a(process.env.SHELL+" -lc export",{cwd:o.workspace.rootPath}),n=e.trim().split("\n");for(let e=0;e<n.length;e++){let t=n[e].split("=",2),r=t[0],i=t[1];["PATH","GEM_HOME","GEM_PATH","RUBY_VERSION"].indexOf(r)>-1&&(process.env[r]||(process.env[r]=i))}c().appendLine(t)})},t.checkVersion=function(){return r(this,void 0,void 0,function*(){c().appendLine(process.env.SHELL);let{stdout:e,stderr:t}=yield a("ruby -v",{cwd:o.workspace.rootPath});c().appendLine(e),c().appendLine(t)})}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(47),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){var r=n(17).Symbol;e.exports=r},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.CompletionItem{constructor(e){super(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.CodeLens{constructor(e){super(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.DocumentLink{constructor(e,t){super(e,t)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=i(n(14)),u=o(n(24)),c=n(25),l=n(26),f=n(27),d=n(30),h=n(31),p=n(44),g=n(65),m=i(n(66)),v=[{language:"ruby",scheme:"file"},{language:"ruby",scheme:"untitled"}];t.activate=function(e){return r(this,void 0,void 0,function*(){s.languages.setLanguageConfiguration("ruby",u.default),a.getOutputChannel(),s.workspace.getConfiguration("ruby").useLanguageServer?m.activate(e):(d.registerHighlightProvider(e,v),f.registerFormatter(e,v),s.workspace.rootPath&&p.registerLinters(e)),h.registerIntellisenseProvider(e),c.registerCompletionProvider(e,v),l.registerConfigurationProvider(),s.workspace.rootPath&&g.registerTaskProvider(e),a.loadEnv()})},t.deactivate=function(){s.workspace.getConfiguration("ruby").useLanguageServer&&m.deactivate()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={indentationRules:{increaseIndentPattern:/^(\s*(module|class|((private|protected)\s+)?def|unless|if|else|elsif|case|when|begin|rescue|ensure|for|while|until|(?=.*?\b(do|begin|case|if|unless)\b)("(\\.|[^\\"])*"|'(\\.|[^\\'])*'|[^#"'])*(\s(do|begin|case)|[-+=&|*/~%^<>~]\s*(if|unless)))\b(?![^;]*;.*?\bend\b)|("(\\.|[^\\"])*"|'(\\.|[^\\'])*'|[^#"'])*(\((?![^\)]*\))|\{(?![^\}]*\})|\[(?![^\]]*\]))).*$/,decreaseIndentPattern:/^\s*([}\])](,?\s*(#|$)|\.[a-zA-Z_]\w*\b)|(end|rescue|ensure|else|elsif|when)\b)/},wordPattern:/(-?\d+(?:\.\d+))|([A-Za-z][^-`~@#%^&()=+[{}|;:'",<>/.*\]\s\\!?]*[!?]?)/}},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=r(n(8));t.registerCompletionProvider=function(e,t){if("rcodetools"==i.workspace.getConfiguration("ruby").codeCompletion){const n=function(e){let t=i.workspace.getConfiguration("ruby.rctComplete").get("commandPath","rct-complete");return e.push("--interpreter"),e.push(i.workspace.getConfiguration("ruby.interpreter").get("commandPath","ruby")),"win32"===process.platform?o.spawn("cmd",["/c",t].concat(e)):o.spawn(t,e)},r=n(["--help"]);r.on("exit",()=>{e.subscriptions.push(i.languages.registerCompletionItemProvider(t,{provideCompletionItems:(e,t,r,o)=>new Promise((r,o)=>{const s=t.line+1,a=t.character;let u=n(["--completion-class-info","--dev","--fork","--line="+s,"--column="+a]),c=[],l=[];u.stderr.on("data",e=>l.push(e)),u.stdout.on("data",e=>c.push(e)),u.stdout.on("end",()=>{if(l.length>0)return o(Buffer.concat(l).toString());let e=[];return Buffer.concat(c).toString().split("\n").forEach(function(t){let n=t.split("\t");if(/^[^\w]/.test(n[0]))return;if(0===n[0].trim().length)return;let r=new i.CompletionItem(n[0]);r.detail=n[1],r.documentation=n[1],r.filterText=n[0],r.insertText=n[0],r.label=n[0],r.kind=i.CompletionItemKind.Method,e.push(r)},this),0===e.length?o({items:[]}):r({items:e})}),u.stdin.end(e.getText())})},"."))}),r.on("error",()=>0)}}},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0));t.registerConfigurationProvider=function(){i.debug.registerDebugConfigurationProvider("Ruby",new o)};class o{provideDebugConfigurations(e,t){const n=s.map(e=>e.name);return i.window.showQuickPick(n).then(e=>[s.find(t=>t.name===e)])}resolveDebugConfiguration(e,t){const n=t.cwd||"${workspaceRoot}";return Object.assign(Object.assign({},t),{cwd:n})}}const s=[{name:"Debug Local File",type:"Ruby",request:"launch",program:"${workspaceRoot}/main.rb"},{name:"Listen for rdebug-ide",type:"Ruby",request:"attach",remoteHost:"127.0.0.1",remotePort:"1234",remoteWorkspaceRoot:"${workspaceRoot}"},{name:"Rails server",type:"Ruby",request:"launch",program:"${workspaceRoot}/bin/rails",args:["server"]},{name:"Minitest - current line",type:"Ruby",cwd:"${workspaceRoot}",request:"launch",program:"${workspaceRoot}/bin/rails",args:["test","${file}:${lineNumber}"]},{name:"RSpec - all",type:"Ruby",request:"launch",program:"${workspaceRoot}/bin/rspec",args:["-I","${workspaceRoot}"]},{name:"RSpec - active spec file only",type:"Ruby",request:"launch",program:"${workspaceRoot}/bin/rspec",args:["-I","${workspaceRoot}","${file}"]},{name:"Cucumber",type:"Ruby",request:"launch",program:"${workspaceRoot}/bin/cucumber"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28);t.registerFormatter=function(e,t){(new r.RubyDocumentFormattingEditProvider).register(e,t)}},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=r(n(4)),s=n(29);t.RubyDocumentFormattingEditProvider=class{register(e,t){"rubocop"===i.workspace.getConfiguration("ruby").get("format")&&(this.autoCorrect=new s.AutoCorrect,this.autoCorrect.test().then(()=>e.subscriptions.push(i.languages.registerDocumentFormattingEditProvider(t,this))))}provideDocumentFormattingEdits(e,t,n){const r=e.fileName?o.dirname(e.fileName):i.workspace.rootPath,s=e.getText();return this.autoCorrect.correct(s,r).then(t=>[new i.TextEdit(e.validateRange(new i.Range(0,0,1/0,1/0)),t)],e=>[])}}},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8)),o=r(n(9)),s=r(n(5)),a=r(n(4)),u=r(n(0)),c=e=>{try{return o.accessSync(a.join(e,".rubocop.yml")),e}catch(t){let n=a.dirname(e);if(n&&n!==e)return c(n)}};t.AutoCorrect=class{constructor(){this.args=e=>{let t=["-a","-f","simple"];if(e){const n=c(e);n&&(t=t.concat(["-c",a.join(n,".rubocop.yml")]))}const n=this.opts;return n.lint&&t.push("-l"),n.only&&(t=t.concat("--only",n.only.join(","))),n.except&&(t=t.concat("--except",n.except.join(","))),n.rails&&t.push("-R"),n.require&&(t=t.concat("-r",n.require.join(","))),t},this.spawn=(e,t)=>{const n=this.exe,r=t||{};return r.cwd||(r.cwd=u.workspace.rootPath),i.spawn(n.shift(),n.concat(e),r)}}get opts(){const e=u.workspace.getConfiguration("ruby.lint.rubocop");return e&&!0!==e?e:{}}get exe(){const e=this.opts;if(e.exe)return[e.exe];const t="win32"===process.platform?".bat":"";if(u.workspace.getConfiguration("ruby").useBundler){return[`${u.workspace.getConfiguration("ruby").pathToBundler||"bundle"}${t}`,"exec","rubocop"]}return[`rubocop${t}`]}test(){return new Promise((e,t)=>{const n=this.spawn(["-v"]);n.on("error",e=>{e.message.includes("ENOENT")?u.window.showErrorMessage(`couldn't find ${this.exe} for formatting (ENOENT)`):u.window.showErrorMessage(`couldn't run ${this.exe} '${e.message}'`),t(e)}),n.stderr.on("data",e=>{console.log(`rubocop stderr ${e}`)}),n.stdout.on("data",e=>{console.log(`rubocop stdout ${e}`)}),n.on("exit",n=>{if(n)return u.window.showErrorMessage(`rubocop failed with code=${n}`),t();console.log("rubocop is ready to go!"),e()})})}correct(e,t){return new Promise((n,r)=>o.mkdtemp(a.join(s.tmpdir(),"rubocop"),(i,s)=>{if(i)return r(i);const c=this.args(t),l=a.join(s,"tmp.rb");c.push(l),o.writeFile(l,e,e=>{if(e)return r(e);console.log(`${this.exe} ${c.join(" ")}`);const i=(new Date).getTime(),s=this.spawn(c,{cwd:t||process.cwd(),env:process.env});s.on("error",e=>{u.window.showErrorMessage(`couldn't run rubocop '${e.message}'`),r(e)}),s.stderr.on("data",e=>{console.log(`rubocop stderr ${e}`)}),s.on("exit",e=>{if(e&&1!==e)return u.window.showErrorMessage(`rubocop failed with code=${e}`),r();o.readFile(l,"utf8",(e,t)=>{e&&r(e);const o=(new Date).getTime()-i;console.log(`rubocop ran in ${o}ms`),n(t)})})})}))}}},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0));t.registerHighlightProvider=function(e,t){let n=[];const r=function(e){let t=e.text.match(/^(\s*)end\b[\.\s#]?\s*$/);if(t)return new i.Range(e.lineNumber,t[1].length,e.lineNumber,t[1].length+3)},o=function(e){let t=e.text.match(/^(.*\b)(begin|class|def|for|if|module|unless|until|case|while)\b[^;]*$/);return t?new i.Range(e.lineNumber,t[1].length,e.lineNumber,t[1].length+t[2].length):(t=e.text.match(/\b(do)\b\s*(\|.*\|[^;]*)?$/))?new i.Range(e.lineNumber,t.index,e.lineNumber,t.index+2):void 0},s=function(e){if(n=[],"ruby"!==e.languageId)return;let t,i,s=[];for(let a=0;a<e.lineCount;a++)(t=o(e.lineAt(a)))?s.push(t):s.length&&(i=r(e.lineAt(a)))&&n.push({entry:s.pop(),end:i})},a=function(e){e&&e.document&&s(e.document)};e.subscriptions.push(i.languages.registerDocumentHighlightProvider(t,{provideDocumentHighlights:(e,t)=>{let r=n.find(e=>e.entry.start.line===t.line||e.end.start.line===t.line);if(r)return[new i.DocumentHighlight(r.entry,2),new i.DocumentHighlight(r.end,2)]}})),e.subscriptions.push(i.window.onDidChangeActiveTextEditor(a)),e.subscriptions.push(i.workspace.onDidChangeTextDocument(a)),e.subscriptions.push(i.workspace.onDidOpenTextDocument(s)),i.window&&i.window.activeTextEditor&&s(i.window.activeTextEditor.document)}},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),o=n(0),s=n(32);t.registerIntellisenseProvider=function(e){if("rubyLocate"==i.workspace.getConfiguration("ruby").intellisense){const t=()=>{let e={location:i.ProgressLocation.Window,title:"Indexing Ruby source files"};i.window.withProgress(e,()=>r.walk())},n=i.workspace.getConfiguration("ruby.locate")||{};let r=new s.Locate(i.workspace.rootPath,n);t(),e.subscriptions.push(i.commands.registerCommand("ruby.reloadProject",t));const a=i.workspace.createFileSystemWatcher(n.include);a.onDidChange(e=>r.parse(e.fsPath)),a.onDidCreate(e=>r.parse(e.fsPath)),a.onDidDelete(e=>r.rm(e.fsPath));const u=e=>new i.Location(i.Uri.file(e.file),new i.Position(e.line,e.char)),c={provideDefinition:(e,t)=>{const n=e.getText(e.getWordRangeAtPosition(t));return r.find(n).then(e=>e.map(u))}};e.subscriptions.push(i.languages.registerDefinitionProvider(["ruby","erb"],c));const l={class:()=>o.SymbolKind.Class,module:()=>o.SymbolKind.Module,method:e=>"initialize"===e.name?o.SymbolKind.Constructor:o.SymbolKind.Method,classMethod:()=>o.SymbolKind.Method},f=e=>(console.warn(`Unknown symbol type: ${e.type}`),o.SymbolKind.Variable),d=3e3,h=e=>e.slice(0,d).map(e=>{const t=(l[e.type]||f)(e);return new o.SymbolInformation(e.name,t,e.containerName,u(e))});if(!i.workspace.getConfiguration("ruby").useLanguageServer){const t={provideDocumentSymbols:(e,t)=>r.listInFile(e.fileName).then(h)};e.subscriptions.push(i.languages.registerDocumentSymbolProvider(["ruby","erb"],t))}const p={provideWorkspaceSymbols:(e,t)=>r.query(e).then(h)};e.subscriptions.push(i.languages.registerWorkspaceSymbolProvider(p))}else{e.subscriptions.push(i.commands.registerCommand("ruby.reloadProject",()=>{i.window.showInformationMessage("The `ruby.intellisense` configuration is not set to use rubyLocate.")}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"Locate",function(){return h});const r=n(33),i=n(38),o=n(9),s=n(4),a=n(42),u=n(43),c=8,l=8,f=["class","module","method","classMethod"];function d(e,t,n){const r=t.toLowerCase()===t,i=new RegExp("^"+a.escapeRegExp(t)+"$","i"),o=new RegExp("^"+a.escapeRegExp(t),"i"),s=new RegExp(a.escapeRegExp(t),r?"i":""),u=function(e){const t=a.escapeRegExp(e),n=t.charAt(0);return new RegExp(`[${n.toLowerCase()}${n.toUpperCase()}]`+t.slice(1).replace(/[A-Z]|([a-z])/g,(e,t)=>{if(t)return`[${e.toUpperCase()}${e}]`;const n=e.toLowerCase();return`.*(?:${e}|_${n})`}))}(t);return a([i,o,s,u]).flatMap(t=>e.filter(e=>n(e,t))).uniq().value()}class h{constructor(e,t){this.settings=t,this.root=e,this.tree={},this.walkQueue=this._createWalkQueue(),this.walkPromise=null,this.parseQueue=u.queue((e,t)=>e().then(()=>t()),l)}listInFile(e){return!e in this.tree&&this.parse(e),Promise.resolve(a.clone(this.tree[e]||[]))}find(e){return this._waitForWalk().then(()=>this._find(e))}_find(e){const t=a.escapeRegExp(a.trimStart(e,":")),n=new RegExp(`^${t}=?$`);return a(this.tree).values().flatten().filter(e=>n.test(e.name)).map(a.clone).value()}query(e){return this._waitForWalk().then(()=>this._query(e))}_query(e){const t=e.match(/^(?:([^.#:]+)(.|#|::))([^.#:]+)$/)||[],n=t[1],r=t[2],i=t[3],o={".":["classMethod","method"],"#":["method"],"::":["class","module"]}[r],s=a(this.tree).values().flatten().value(),u=d(s,e,(e,t)=>t.test(e.name));if(!n)return u;const c=d(s,i,(e,t)=>a.includes(o,e.type)&&t.test(e.name)),l=d(c,n,(e,t)=>t.test(e.containerName));return a.uniq(u.concat(l))}rm(e){e in this.tree&&delete this.tree[e]}parse(e){this.parseQueue.push(()=>this._parseAsync(e))}_parseAsync(e,t){return t=t||s.relative(this.root,e),this.settings.exclude&&i(t,this.settings.exclude)?Promise.resolve():this.settings.include&&!i(t,this.settings.include)?Promise.resolve():r(e).then(t=>{this.tree[e]=t?function e(t,n,r=""){return a.flatMap(t,(t,i)=>a.includes(f,i)?a.flatMap(t,(t,o)=>{const s=t.posn||{line:0,char:0},u={name:o,type:i,file:n,line:s.line,char:s.char,containerName:r||""};return a.extend(u,a.omit(t,f)),[u].concat(e(t,n,r?`${r}${{method:"#",classMethod:"."}[i]||"::"}${o}`:o))}):[])}(t,e):[]}).catch(t=>{"ENOENT"!==t.code&&console.log(t),this.rm(e)})}walk(){const e=(new Date).getTime();return this.walkPromise=new Promise((e,t)=>{this.walkQueue.drain(),this.walkQueue.kill(),this.walkQueue=this._createWalkQueue(),this.walkQueue.drain=()=>e(),this.walkQueue.push(e=>this._walkDir(this.root,t=>t?e(t):e()))}).then(()=>console.log(`[ruby] locate: walk completed! (${(new Date).getTime()-e}msec)`)),this.walkPromise}_walkDir(e,t){o.readdir(e,(n,r)=>{n?t(n):(r.forEach(t=>{this.walkQueue.push(n=>this._walkNode(e,t,n))}),t())})}_walkNode(e,t,n){const r=s.join(e,t),a=s.relative(this.root,r);o.stat(r,(e,t)=>{e?n(e):t.isDirectory()?(this.settings.exclude&&i(a,this.settings.exclude)||this.walkQueue.push(e=>this._walkDir(r,e)),n()):this._parseAsync(r,a).then(()=>n())})}_createWalkQueue(){return u.queue((e,t)=>e(t),c)}_waitForWalk(){return this.walkPromise||this.walk()}}},function(e,t,n){"use strict";const r=n(34),i=n(35),o=n(9);e.exports=function(e){return new Promise((t,n)=>{o.readFile(e,(e,o)=>{if(e)return n(e);const s=o.toString();let a=i(s);if(!a)return t();delete a.end,Object.keys(a).length?t(r(s,a)):t()})})}},function(e,t,n){"use strict";e.exports=function(e,t){return function e(t,n){for(let r in t)if(!Array.isArray(t[r])&&"string"!=typeof t[r])if("number"==typeof t[r]){let e=t[r],i=0;for(;i<n.length&&e>n[i];)i++;t[r]=0===i?{line:0,char:e}:{line:i,char:e-n[i-1]-1}}else e(t[r],n);return t}(t,function(e){let t,n=[],r=0;for(;t=e[r];)"\r"===t&&"\n"!==e[r+1]?n.push(r):"\n"===t&&n.push(r),r++;return n}(e))}},function(e,t,n){"use strict";n(36);const r=n(37),i="\t ",o="\r\n;",s=i+o,a="[(#<",u=s+a;function c(e,t){let n;for(;(n=e[t])&&~s.indexOf(n);)t++;return t}function l(e,t){if(~a.indexOf(e[t]))return t+1;let n;for(;(n=e[t])&&!~s.indexOf(n)&&!~a.indexOf(n);)t++;return t}function f(e,t){let n;for(;(n=e[t])&&!~u.indexOf(n);)t++;return t}const d=i+",";function h(e,t){let n,r=t;for(;(n=e[t])&&!~o.indexOf(n)&&"#"!==n;)t++;let i=t,s=[];for(t=r;t<i;){for(;t<i&&(n=e[t])&&~d.indexOf(n);)t++;for(r=t;t<i&&(n=e[t])&&!~d.indexOf(n);)t++;s.push(e.slice(r,t))}return s.end=t,s}function p(e,t,n){let r=!1;"<"===t[n=c(t,n+=e.length)]&&"<"===t[n+1]&&(r=!0,n=c(t,n+2));let i=n,o=f(t,n),s=t.slice(n,o),a=T(t,n=o);o=a.end,delete a.end,a.posn=i;let u={};if(r)"self"===s&&(u.classMethod=a.method);else{if("<"===t[n=c(t,n)]){let e=f(t,n=c(t,n+1));a.inherit=t.slice(n,e)}let r=s.split("::"),o={[e]:{[s=r.pop()]:a}};r.length&&(o=r.reduce((e,t)=>{return{module:{[t]:e},posn:i}},o)),u=o}return u.end=o,u}function g(e,t,n){return{end:T(t,n+=e.length).end}}function m(e,t,n){let r;for(;(r=t[n])&&!~"\r\n".indexOf(r);)n++;return{end:n}}function v(e,t,n){const r=t[n];let i;for(n++;(i=t[n])&&i!==r;)"\\"===i&&n++,n++;return{end:++n}}const y="=+-*/&|^<>";function _(e,t,n){let r,s=n-1;for(;(r=t[s])&&~i.indexOf(r);)s--;if(!~y.indexOf(r)&&!~o.indexOf(r)){for(n+=e.length;(r=t[n])&&!~o.indexOf(r)&&"#"!==r;)n++;return{end:n}}return g(e,t,n)}function w(e,t,n){let r,s=n-1;for(;(r=t[s])&&~i.indexOf(r);)s--;if(!~o.indexOf(r)){for(n+=e.length;(r=t[n])&&!~o.indexOf(r)&&"#"!==r;)n++;return{end:n}}return g(e,t,n)}function b(e,t,n){let r=h(t,n+=e.length),i={};return"attr_reader"!==e&&"attr_accessor"!==e||(i=r.reduce((e,t)=>(e[t.slice(1)]={posn:n},e),i)),"attr_writer"!==e&&"attr_accessor"!==e||(i=r.reduce((e,t)=>(e[t.slice(1)+"="]={posn:n,arguments:[t.slice(1)]},e),i)),{method:i,end:r.end}}function C(e,t,n){let r,i,o,a=t[n+=e.length];if(!~s.indexOf(a)){if(~"-~".indexOf(a)&&(o=!0,a=t[++n]),~"\"`'".indexOf(a))i=v(0,t,n++).end-1;else for(i=n+1;(a=t[i])&&!~"\r\n \t.)".indexOf(a);)i++;for(r=t.slice(n,i),n=i+1;n<t.length;){for(;(a=t[n])&&!~"\r\n".indexOf(a);)n++;for(;(a=t[n])&&~"\r\n".indexOf(a);)n++;if(o)for(;(a=t[n])&&~" \t".indexOf(a);)n++;if(t.slice(n,n+r.length)===r){n+=r.length;break}}return{end:n}}}C.isWordStart=!0;const x={module:p,class:p,def:function(e,t,n){let r=n=c(t,n+=e.length),i=f(t,n);const o=t.slice(n,i).toString();!function(e,t){let n=e[t];if("("===n){t++;let r=1;for(;(n=e[t])&&r;)"#"===n?t=m(n,e,t).end:~"\"`'".indexOf(n)?t=v(n,e,t).end:"("===n?r++:")"===n&&r--,t++}}(t,n=i);let s=T(t,n);return i=s.end,delete s.end,s.posn=r,o.startsWith("self.")?{end:i,classMethod:{[o.slice(5)]:s}}:{end:i,method:{[o]:s}}},include:function(e,t,n){let r=h(t,n+=e.length),i={include:r,end:r.end};return delete r.end,i},alias:function(e,t,n){let r=h(t,n+=e.length);return!r[0]||~"$@".indexOf(r[0][0])?{end:r.end}:(":"===r[0][0]&&(r[0]=r[0].slice(1)),{method:{[r[0]]:{posn:n}},end:r.end})},attr_reader:b,attr_writer:b,attr_accessor:b,alias_method:function(e,t,n){let r=h(t,n+=e.length);return 0===r.length?{end:r.end}:":"!==r[0][0]?{end:r.end}:{end:r.end,method:{[r[0].slice(1)]:{posn:n}}}}},R=new r({do:g,begin:g,for:g,case:g,if:_,unless:_,while:w,until:w,'"':v,"`":v,"'":v,"#":m,"<<":C}),S=new r(x);function k(e,t){let n;for(let r in t)"number"==typeof(n=t[r])?e[r]=n:"string"==typeof n?e[r]=n:Array.isArray(n)?e[r]=r in e?e[r].concat(n):n:r in e?k(e[r],n):n&&(e[r]=n)}function T(e,t){let n,r={};if(!((t=t||0)>=e.length)){for(;t<e.length;){if(t=c(e,t),"end"===e.slice(t,t+3)&&(t+3===e.length||~u.indexOf(e[t+3])))return r.end=t+3,r;(n=R.process(e,t)||S.process(e,t))?(t=n.end,k(r,n)):t=l(e,t)}return r.end=t,r}}e.exports=T},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";const r="\t \r\n;(#<";e.exports=class{constructor(e){this.entry=[],this.first="";for(let t in e)this.add(t,e[t])}add(e,t){let n=this.first.indexOf(e[0]);~n?this.entry[n].push({initialiser:e,processor:t}):(this.first+=e[0],this.entry.push([{initialiser:e,processor:t}]))}process(e,t){let n,i,o=this.first.indexOf(e[t]);if(~o)return this.entry[o].some(o=>{if(i=t+o.initialiser.length,1===o.initialiser.length||o.initialiser==e.slice(t,i)&&(i===e.length||~r.indexOf(e[i])||o.processor.isWordStart))return!!(n=o.processor(o.initialiser,e,t))}),n}}},function(e,t,n){e.exports=p,p.Minimatch=g;var r={sep:"/"};try{r=n(4)}catch(e){}var i=p.GLOBSTAR=g.GLOBSTAR={},o=n(39),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",u=a+"*?",c="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",f="().*{}+?[]^$\\!".split("").reduce(function(e,t){return e[t]=!0,e},{});var d=/\/+/;function h(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function p(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new g(t,n).match(e))}function g(e,t){if(!(this instanceof g))return new g(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==r.sep&&(e=e.split(r.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function m(e,t){if(t||(t=this instanceof g?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}p.filter=function(e,t){return t=t||{},function(n,r,i){return p(n,e,t)}},p.defaults=function(e){if(!e||!Object.keys(e).length)return p;var t=p,n=function(n,r,i){return t.minimatch(n,r,h(e,i))};return n.Minimatch=function(n,r){return new t.Minimatch(n,h(e,r))},n},g.defaults=function(e){return e&&Object.keys(e).length?p.defaults(e).Minimatch:g},g.prototype.debug=function(){},g.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map(function(e){return e.split(d)}),this.debug(this.pattern,n),n=n.map(function(e,t,n){return e.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,n),this.set=n},g.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,r=0;if(n.nonegate)return;for(var i=0,o=e.length;i<o&&"!"===e.charAt(i);i++)t=!t,r++;r&&(this.pattern=e.substr(r));this.negate=t},p.braceExpand=function(e,t){return m(e,t)},g.prototype.braceExpand=m,g.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return i;if(""===e)return"";var r,o="",c=!!n.nocase,l=!1,d=[],h=[],p=!1,g=-1,m=-1,y="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",_=this;function w(){if(r){switch(r){case"*":o+=u,c=!0;break;case"?":o+=a,c=!0;break;default:o+="\\"+r}_.debug("clearStateChar %j %j",r,o),r=!1}}for(var b,C=0,x=e.length;C<x&&(b=e.charAt(C));C++)if(this.debug("%s\t%s %s %j",e,C,o,b),l&&f[b])o+="\\"+b,l=!1;else switch(b){case"/":return!1;case"\\":w(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,C,o,b),p){this.debug("  in class"),"!"===b&&C===m+1&&(b="^"),o+=b;continue}_.debug("call clearStateChar %j",r),w(),r=b,n.noext&&w();continue;case"(":if(p){o+="(";continue}if(!r){o+="\\(";continue}d.push({type:r,start:C-1,reStart:o.length,open:s[r].open,close:s[r].close}),o+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,o),r=!1;continue;case")":if(p||!d.length){o+="\\)";continue}w(),c=!0;var R=d.pop();o+=R.close,"!"===R.type&&h.push(R),R.reEnd=o.length;continue;case"|":if(p||!d.length||l){o+="\\|",l=!1;continue}w(),o+="|";continue;case"[":if(w(),p){o+="\\"+b;continue}p=!0,m=C,g=o.length,o+=b;continue;case"]":if(C===m+1||!p){o+="\\"+b,l=!1;continue}if(p){var S=e.substring(m+1,C);try{RegExp("["+S+"]")}catch(e){var k=this.parse(S,v);o=o.substr(0,g)+"\\["+k[0]+"\\]",c=c||k[1],p=!1;continue}}c=!0,p=!1,o+=b;continue;default:w(),l?l=!1:!f[b]||"^"===b&&p||(o+="\\"),o+=b}p&&(S=e.substr(m+1),k=this.parse(S,v),o=o.substr(0,g)+"\\["+k[0],c=c||k[1]);for(R=d.pop();R;R=d.pop()){var T=o.slice(R.reStart+R.open.length);this.debug("setting tail",o,R),T=T.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,n){return n||(n="\\"),t+t+n+"|"}),this.debug("tail=%j\n   %s",T,T,R,o);var D="*"===R.type?u:"?"===R.type?a:"\\"+R.type;c=!0,o=o.slice(0,R.reStart)+D+"\\("+T}w(),l&&(o+="\\\\");var P=!1;switch(o.charAt(0)){case".":case"[":case"(":P=!0}for(var E=h.length-1;E>-1;E--){var O=h[E],j=o.slice(0,O.reStart),q=o.slice(O.reStart,O.reEnd-8),F=o.slice(O.reEnd-8,O.reEnd),M=o.slice(O.reEnd);F+=M;var L=j.split("(").length-1,I=M;for(C=0;C<L;C++)I=I.replace(/\)[+*?]?/,"");var N="";""===(M=I)&&t!==v&&(N="$"),o=j+q+M+N+F}""!==o&&c&&(o="(?=.)"+o);P&&(o=y+o);if(t===v)return[o,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var A=n.nocase?"i":"";try{var $=new RegExp("^"+o+"$",A)}catch(e){return new RegExp("$.")}return $._glob=e,$._src=o,$};var v={};p.makeRe=function(e,t){return new g(e,t||{}).makeRe()},g.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?u:t.dot?c:l,r=t.nocase?"i":"",o=e.map(function(e){return e.map(function(e){return e===i?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,r)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,n){var r=new g(t,n=n||{});return e=e.filter(function(e){return r.match(e)}),r.options.nonull&&!e.length&&e.push(t),e},g.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==r.sep&&(e=e.split(r.sep).join("/"));e=e.split(d),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],u=e;if(n.matchBase&&1===a.length&&(u=[i]),this.matchOne(u,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},g.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,u=t.length;o<a&&s<u;o++,s++){this.debug("matchOne loop");var c,l=t[s],f=e[o];if(this.debug(t,l,f),!1===l)return!1;if(l===i){this.debug("GLOBSTAR",[t,l,f]);var d=o,h=s+1;if(h===u){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!r.dot&&"."===e[o].charAt(0))return!1;return!0}for(;d<a;){var p=e[d];if(this.debug("\nglobstar while",e,d,t,h,p),this.matchOne(e.slice(d),t.slice(h),n))return this.debug("globstar found match!",d,a,p),!0;if("."===p||".."===p||!r.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,d,t,h);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!n||(this.debug("\n>>> no match, partial?",e,d,t,h),d!==a))}if("string"==typeof l?(c=r.nocase?f.toLowerCase()===l.toLowerCase():f===l,this.debug("string match",l,f,c)):(c=f.match(l),this.debug("pattern match",l,f,c)),!c)return!1}if(o===a&&s===u)return!0;if(o===a)return n;if(s===u)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t,n){var r=n(40),i=n(41);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var o=[];var s=i("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body);var c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body);var f=u||c;var m=s.body.indexOf(",")>=0;if(!f&&!m)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];var v;if(f)v=s.body.split(/\.\./);else if(1===(v=function e(t){if(!t)return[""];var n=[];var r=i("{","}",t);if(!r)return t.split(",");var o=r.pre;var s=r.body;var a=r.post;var u=o.split(",");u[u.length-1]+="{"+s+"}";var c=e(a);a.length&&(u[u.length-1]+=c.shift(),u.push.apply(u,c));n.push.apply(n,u);return n}(s.body)).length&&1===(v=e(v[0],!1).map(d)).length){var y=s.post.length?e(s.post,!1):[""];return y.map(function(e){return s.pre+v[0]+e})}var _=s.pre;var y=s.post.length?e(s.post,!1):[""];var w;if(f){var b=l(v[0]),C=l(v[1]),x=Math.max(v[0].length,v[1].length),R=3==v.length?Math.abs(l(v[2])):1,S=p,k=C<b;k&&(R*=-1,S=g);var T=v.some(h);w=[];for(var D=b;S(D,C);D+=R){var P;if(c)"\\"===(P=String.fromCharCode(D))&&(P="");else if(P=String(D),T){var E=x-P.length;if(E>0){var O=new Array(E+1).join("0");P=D<0?"-"+O+P.slice(1):O+P}}w.push(P)}}else w=r(v,function(t){return e(t,!1)});for(var j=0;j<w.length;j++)for(var q=0;q<y.length;q++){var F=_+w[j]+y[q];(!n||f||F)&&o.push(F)}return o}(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(u).split("\\.").join(c)}(e),!0).map(f)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",u="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function f(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(u).join(",").split(c).join(".")}function d(e){return"{"+e+"}"}function h(e){return/^-?0\d/.test(e)}function p(e,t){return e<=t}function g(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var r=[],i=0;i<e.length;i++){var o=t(e[i],i);n(o)?r.push.apply(r,o):r.push(o)}return r};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t,n){e instanceof RegExp&&(e=i(e,n)),t instanceof RegExp&&(t=i(t,n));var r=o(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function i(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var r,i,o,s,a,u=n.indexOf(e),c=n.indexOf(t,u+1),l=u;if(u>=0&&c>0){for(r=[],o=n.length;l>=0&&!a;)l==u?(r.push(l),u=n.indexOf(e,l+1)):1==r.length?a=[r.pop(),c]:((i=r.pop())<o&&(o=i,s=c),c=n.indexOf(t,l+1)),l=u<c&&u>=0?u:c;r.length&&(a=[o,s])}return a}e.exports=r,r.range=o},function(e,t,n){(function(e){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="__lodash_hash_undefined__",c=500,l="__lodash_placeholder__",f=1,d=2,h=4,p=1,g=2,m=1,v=2,y=4,_=8,w=16,b=32,C=64,x=128,R=256,S=512,k=30,T="...",D=800,P=16,E=1,O=2,j=1/0,q=9007199254740991,F=17976931348623157e292,M=NaN,L=4294967295,I=L-1,N=L>>>1,A=[["ary",x],["bind",m],["bindKey",v],["curry",_],["curryRight",w],["flip",S],["partial",b],["partialRight",C],["rearg",R]],$="[object Arguments]",W="[object Array]",K="[object AsyncFunction]",z="[object Boolean]",U="[object Date]",H="[object DOMException]",B="[object Error]",V="[object Function]",J="[object GeneratorFunction]",G="[object Map]",Q="[object Number]",Z="[object Null]",X="[object Object]",Y="[object Proxy]",ee="[object RegExp]",te="[object Set]",ne="[object String]",re="[object Symbol]",ie="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",ae="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",le="[object Float64Array]",fe="[object Int8Array]",de="[object Int16Array]",he="[object Int32Array]",pe="[object Uint8Array]",ge="[object Uint8ClampedArray]",me="[object Uint16Array]",ve="[object Uint32Array]",ye=/\b__p \+= '';/g,_e=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,xe=RegExp(be.source),Re=RegExp(Ce.source),Se=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,je=RegExp(Oe.source),qe=/^\s+|\s+$/g,Fe=/^\s+/,Me=/\s+$/,Le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ie=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,Ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$e=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ke=/\w*$/,ze=/^[-+]0x[0-9a-f]+$/i,Ue=/^0b[01]+$/i,He=/^\[object .+?Constructor\]$/,Be=/^0o[0-7]+$/i,Ve=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ge=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Ze="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ye="[\\ud800-\\udfff]",et="["+Xe+"]",tt="["+Ze+"]",nt="\\d+",rt="[\\u2700-\\u27bf]",it="[a-z\\xdf-\\xf6\\xf8-\\xff]",ot="[^\\ud800-\\udfff"+Xe+nt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",st="\\ud83c[\\udffb-\\udfff]",at="[^\\ud800-\\udfff]",ut="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ft="(?:"+it+"|"+ot+")",dt="(?:"+lt+"|"+ot+")",ht="(?:"+tt+"|"+st+")"+"?",pt="[\\ufe0e\\ufe0f]?"+ht+("(?:\\u200d(?:"+[at,ut,ct].join("|")+")[\\ufe0e\\ufe0f]?"+ht+")*"),gt="(?:"+[rt,ut,ct].join("|")+")"+pt,mt="(?:"+[at+tt+"?",tt,ut,ct,Ye].join("|")+")",vt=RegExp("[']","g"),yt=RegExp(tt,"g"),_t=RegExp(st+"(?="+st+")|"+mt+pt,"g"),wt=RegExp([lt+"?"+it+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[et,lt,"$"].join("|")+")",dt+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[et,lt+ft,"$"].join("|")+")",lt+"?"+ft+"+(?:['](?:d|ll|m|re|s|t|ve))?",lt+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nt,gt].join("|"),"g"),bt=RegExp("[\\u200d\\ud800-\\udfff"+Ze+"\\ufe0e\\ufe0f]"),Ct=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rt=-1,St={};St[ce]=St[le]=St[fe]=St[de]=St[he]=St[pe]=St[ge]=St[me]=St[ve]=!0,St[$]=St[W]=St[ae]=St[z]=St[ue]=St[U]=St[B]=St[V]=St[G]=St[Q]=St[X]=St[ee]=St[te]=St[ne]=St[oe]=!1;var kt={};kt[$]=kt[W]=kt[ae]=kt[ue]=kt[z]=kt[U]=kt[ce]=kt[le]=kt[fe]=kt[de]=kt[he]=kt[G]=kt[Q]=kt[X]=kt[ee]=kt[te]=kt[ne]=kt[re]=kt[pe]=kt[ge]=kt[me]=kt[ve]=!0,kt[B]=kt[V]=kt[oe]=!1;var Tt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dt=parseFloat,Pt=parseInt,Et="object"==typeof global&&global&&global.Object===Object&&global,Ot="object"==typeof self&&self&&self.Object===Object&&self,jt=Et||Ot||Function("return this")(),qt=t&&!t.nodeType&&t,Ft=qt&&"object"==typeof e&&e&&!e.nodeType&&e,Mt=Ft&&Ft.exports===qt,Lt=Mt&&Et.process,It=function(){try{var e=Ft&&Ft.require&&Ft.require("util").types;return e||Lt&&Lt.binding&&Lt.binding("util")}catch(e){}}(),Nt=It&&It.isArrayBuffer,At=It&&It.isDate,$t=It&&It.isMap,Wt=It&&It.isRegExp,Kt=It&&It.isSet,zt=It&&It.isTypedArray;function Ut(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ht(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Vt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Gt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Qt(e,t){return!!(null==e?0:e.length)&&an(e,t,0)>-1}function Zt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Xt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Yt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function en(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function tn(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function nn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var rn=fn("length");function on(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function sn(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function an(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):sn(e,cn,n)}function un(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function cn(e){return e!=e}function ln(e,t){var n=null==e?0:e.length;return n?pn(e,t)/n:M}function fn(e){return function(t){return null==t?i:t[e]}}function dn(e){return function(t){return null==e?i:e[t]}}function hn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function pn(e,t){for(var n,r=-1,o=e.length;++r<o;){var s=t(e[r]);s!==i&&(n=n===i?s:n+s)}return n}function gn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function mn(e){return function(t){return e(t)}}function vn(e,t){return Xt(t,function(t){return e[t]})}function yn(e,t){return e.has(t)}function _n(e,t){for(var n=-1,r=e.length;++n<r&&an(t,e[n],0)>-1;);return n}function wn(e,t){for(var n=e.length;n--&&an(t,e[n],0)>-1;);return n}var bn=dn({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Cn=dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xn(e){return"\\"+Tt[e]}function Rn(e){return bt.test(e)}function Sn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function kn(e,t){return function(n){return e(t(n))}}function Tn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==l||(e[n]=l,o[i++]=n)}return o}function Dn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Pn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function En(e){return Rn(e)?function(e){var t=_t.lastIndex=0;for(;_t.test(e);)++t;return t}(e):rn(e)}function On(e){return Rn(e)?function(e){return e.match(_t)||[]}(e):function(e){return e.split("")}(e)}var jn=dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var qn=function e(t){var n,r=(t=null==t?jt:qn.defaults(jt.Object(),t,qn.pick(jt,xt))).Array,Ze=t.Date,Xe=t.Error,Ye=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,rt=t.String,it=t.TypeError,ot=r.prototype,st=Ye.prototype,at=tt.prototype,ut=t["__core-js_shared__"],ct=st.toString,lt=at.hasOwnProperty,ft=0,dt=(n=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",ht=at.toString,pt=ct.call(tt),gt=jt._,mt=nt("^"+ct.call(lt).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_t=Mt?t.Buffer:i,bt=t.Symbol,Tt=t.Uint8Array,Et=_t?_t.allocUnsafe:i,Ot=kn(tt.getPrototypeOf,tt),qt=tt.create,Ft=at.propertyIsEnumerable,Lt=ot.splice,It=bt?bt.isConcatSpreadable:i,rn=bt?bt.iterator:i,dn=bt?bt.toStringTag:i,Fn=function(){try{var e=Ao(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Mn=t.clearTimeout!==jt.clearTimeout&&t.clearTimeout,Ln=Ze&&Ze.now!==jt.Date.now&&Ze.now,In=t.setTimeout!==jt.setTimeout&&t.setTimeout,Nn=et.ceil,An=et.floor,$n=tt.getOwnPropertySymbols,Wn=_t?_t.isBuffer:i,Kn=t.isFinite,zn=ot.join,Un=kn(tt.keys,tt),Hn=et.max,Bn=et.min,Vn=Ze.now,Jn=t.parseInt,Gn=et.random,Qn=ot.reverse,Zn=Ao(t,"DataView"),Xn=Ao(t,"Map"),Yn=Ao(t,"Promise"),er=Ao(t,"Set"),tr=Ao(t,"WeakMap"),nr=Ao(tt,"create"),rr=tr&&new tr,ir={},or=fs(Zn),sr=fs(Xn),ar=fs(Yn),ur=fs(er),cr=fs(tr),lr=bt?bt.prototype:i,fr=lr?lr.valueOf:i,dr=lr?lr.toString:i;function hr(e){if(Da(e)&&!va(e)&&!(e instanceof vr)){if(e instanceof mr)return e;if(lt.call(e,"__wrapped__"))return ds(e)}return new mr(e)}var pr=function(){function e(){}return function(t){if(!Ta(t))return{};if(qt)return qt(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function gr(){}function mr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function vr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function yr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function wr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function br(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new wr;++t<n;)this.add(e[t])}function Cr(e){var t=this.__data__=new _r(e);this.size=t.size}function xr(e,t){var n=va(e),r=!n&&ma(e),i=!n&&!r&&ba(e),o=!n&&!r&&!i&&La(e),s=n||r||i||o,a=s?gn(e.length,rt):[],u=a.length;for(var c in e)!t&&!lt.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Bo(c,u))||a.push(c);return a}function Rr(e){var t=e.length;return t?e[bi(0,t-1)]:i}function Sr(e,t){return us(no(e),Fr(t,0,e.length))}function kr(e){return us(no(e))}function Tr(e,t,n){(n===i||ha(e[t],n))&&(n!==i||t in e)||jr(e,t,n)}function Dr(e,t,n){var r=e[t];lt.call(e,t)&&ha(r,n)&&(n!==i||t in e)||jr(e,t,n)}function Pr(e,t){for(var n=e.length;n--;)if(ha(e[n][0],t))return n;return-1}function Er(e,t,n,r){return Ar(e,function(e,i,o){t(r,e,n(e),o)}),r}function Or(e,t){return e&&ro(t,iu(t),e)}function jr(e,t,n){"__proto__"==t&&Fn?Fn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function qr(e,t){for(var n=-1,o=t.length,s=r(o),a=null==e;++n<o;)s[n]=a?i:Ya(e,t[n]);return s}function Fr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function Mr(e,t,n,r,o,s){var a,u=t&f,c=t&d,l=t&h;if(n&&(a=o?n(e,r,o,s):n(e)),a!==i)return a;if(!Ta(e))return e;var p=va(e);if(p){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&lt.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return no(e,a)}else{var g=Ko(e),m=g==V||g==J;if(ba(e))return Qi(e,u);if(g==X||g==$||m&&!o){if(a=c||m?{}:Uo(e),!u)return c?function(e,t){return ro(e,Wo(e),t)}(e,function(e,t){return e&&ro(t,ou(t),e)}(a,e)):function(e,t){return ro(e,$o(e),t)}(e,Or(a,e))}else{if(!kt[g])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case ae:return Zi(e);case z:case U:return new r(+e);case ue:return function(e,t){var n=t?Zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ce:case le:case fe:case de:case he:case pe:case ge:case me:case ve:return Xi(e,n);case G:return new r;case Q:case ne:return new r(e);case ee:return function(e){var t=new e.constructor(e.source,Ke.exec(e));return t.lastIndex=e.lastIndex,t}(e);case te:return new r;case re:return i=e,fr?tt(fr.call(i)):{}}var i}(e,g,u)}}s||(s=new Cr);var v=s.get(e);if(v)return v;s.set(e,a),qa(e)?e.forEach(function(r){a.add(Mr(r,t,n,r,e,s))}):Pa(e)&&e.forEach(function(r,i){a.set(i,Mr(r,t,n,i,e,s))});var y=p?i:(l?c?jo:Oo:c?ou:iu)(e);return Bt(y||e,function(r,i){y&&(r=e[i=r]),Dr(a,i,Mr(r,t,n,i,e,s))}),a}function Lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=tt(e);r--;){var o=n[r],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function Ir(e,t,n){if("function"!=typeof e)throw new it(a);return is(function(){e.apply(i,n)},t)}function Nr(e,t,n,r){var i=-1,s=Qt,a=!0,u=e.length,c=[],l=t.length;if(!u)return c;n&&(t=Xt(t,mn(n))),r?(s=Zt,a=!1):t.length>=o&&(s=yn,a=!1,t=new br(t));e:for(;++i<u;){var f=e[i],d=null==n?f:n(f);if(f=r||0!==f?f:0,a&&d==d){for(var h=l;h--;)if(t[h]===d)continue e;c.push(f)}else s(t,d,r)||c.push(f)}return c}hr.templateSettings={escape:Se,evaluate:ke,interpolate:Te,variable:"",imports:{_:hr}},hr.prototype=gr.prototype,hr.prototype.constructor=hr,mr.prototype=pr(gr.prototype),mr.prototype.constructor=mr,vr.prototype=pr(gr.prototype),vr.prototype.constructor=vr,yr.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},yr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yr.prototype.get=function(e){var t=this.__data__;if(nr){var n=t[e];return n===u?i:n}return lt.call(t,e)?t[e]:i},yr.prototype.has=function(e){var t=this.__data__;return nr?t[e]!==i:lt.call(t,e)},yr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nr&&t===i?u:t,this},_r.prototype.clear=function(){this.__data__=[],this.size=0},_r.prototype.delete=function(e){var t=this.__data__,n=Pr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Lt.call(t,n,1),--this.size,!0)},_r.prototype.get=function(e){var t=this.__data__,n=Pr(t,e);return n<0?i:t[n][1]},_r.prototype.has=function(e){return Pr(this.__data__,e)>-1},_r.prototype.set=function(e,t){var n=this.__data__,r=Pr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new yr,map:new(Xn||_r),string:new yr}},wr.prototype.delete=function(e){var t=Io(this,e).delete(e);return this.size-=t?1:0,t},wr.prototype.get=function(e){return Io(this,e).get(e)},wr.prototype.has=function(e){return Io(this,e).has(e)},wr.prototype.set=function(e,t){var n=Io(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},br.prototype.add=br.prototype.push=function(e){return this.__data__.set(e,u),this},br.prototype.has=function(e){return this.__data__.has(e)},Cr.prototype.clear=function(){this.__data__=new _r,this.size=0},Cr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Cr.prototype.get=function(e){return this.__data__.get(e)},Cr.prototype.has=function(e){return this.__data__.has(e)},Cr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _r){var r=n.__data__;if(!Xn||r.length<o-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(e,t),this.size=n.size,this};var Ar=so(Vr),$r=so(Jr,!0);function Wr(e,t){var n=!0;return Ar(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Kr(e,t,n){for(var r=-1,o=e.length;++r<o;){var s=e[r],a=t(s);if(null!=a&&(u===i?a==a&&!Ma(a):n(a,u)))var u=a,c=s}return c}function zr(e,t){var n=[];return Ar(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Ur(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=Ho),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?Ur(a,t-1,n,r,i):Yt(i,a):r||(i[i.length]=a)}return i}var Hr=ao(),Br=ao(!0);function Vr(e,t){return e&&Hr(e,t,iu)}function Jr(e,t){return e&&Br(e,t,iu)}function Gr(e,t){return Gt(t,function(t){return Ra(e[t])})}function Qr(e,t){for(var n=0,r=(t=Bi(t,e)).length;null!=e&&n<r;)e=e[ls(t[n++])];return n&&n==r?e:i}function Zr(e,t,n){var r=t(e);return va(e)?r:Yt(r,n(e))}function Xr(e){return null==e?e===i?ie:Z:dn&&dn in tt(e)?function(e){var t=lt.call(e,dn),n=e[dn];try{e[dn]=i;var r=!0}catch(e){}var o=ht.call(e);r&&(t?e[dn]=n:delete e[dn]);return o}(e):function(e){return ht.call(e)}(e)}function Yr(e,t){return e>t}function ei(e,t){return null!=e&&lt.call(e,t)}function ti(e,t){return null!=e&&t in tt(e)}function ni(e,t,n){for(var o=n?Zt:Qt,s=e[0].length,a=e.length,u=a,c=r(a),l=1/0,f=[];u--;){var d=e[u];u&&t&&(d=Xt(d,mn(t))),l=Bn(d.length,l),c[u]=!n&&(t||s>=120&&d.length>=120)?new br(u&&d):i}d=e[0];var h=-1,p=c[0];e:for(;++h<s&&f.length<l;){var g=d[h],m=t?t(g):g;if(g=n||0!==g?g:0,!(p?yn(p,m):o(f,m,n))){for(u=a;--u;){var v=c[u];if(!(v?yn(v,m):o(e[u],m,n)))continue e}p&&p.push(m),f.push(g)}}return f}function ri(e,t,n){var r=null==(e=ts(e,t=Bi(t,e)))?e:e[ls(xs(t))];return null==r?i:Ut(r,e,n)}function ii(e){return Da(e)&&Xr(e)==$}function oi(e,t,n,r,o){return e===t||(null==e||null==t||!Da(e)&&!Da(t)?e!=e&&t!=t:function(e,t,n,r,o,s){var a=va(e),u=va(t),c=a?W:Ko(e),l=u?W:Ko(t),f=(c=c==$?X:c)==X,d=(l=l==$?X:l)==X,h=c==l;if(h&&ba(e)){if(!ba(t))return!1;a=!0,f=!1}if(h&&!f)return s||(s=new Cr),a||La(e)?Po(e,t,n,r,o,s):function(e,t,n,r,i,o,s){switch(n){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ae:return!(e.byteLength!=t.byteLength||!o(new Tt(e),new Tt(t)));case z:case U:case Q:return ha(+e,+t);case B:return e.name==t.name&&e.message==t.message;case ee:case ne:return e==t+"";case G:var a=Sn;case te:var u=r&p;if(a||(a=Dn),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;r|=g,s.set(e,t);var l=Po(a(e),a(t),r,i,o,s);return s.delete(e),l;case re:if(fr)return fr.call(e)==fr.call(t)}return!1}(e,t,c,n,r,o,s);if(!(n&p)){var m=f&&lt.call(e,"__wrapped__"),v=d&&lt.call(t,"__wrapped__");if(m||v){var y=m?e.value():e,_=v?t.value():t;return s||(s=new Cr),o(y,_,n,r,s)}}if(!h)return!1;return s||(s=new Cr),function(e,t,n,r,o,s){var a=n&p,u=Oo(e),c=u.length,l=Oo(t).length;if(c!=l&&!a)return!1;var f=c;for(;f--;){var d=u[f];if(!(a?d in t:lt.call(t,d)))return!1}var h=s.get(e),g=s.get(t);if(h&&g)return h==t&&g==e;var m=!0;s.set(e,t),s.set(t,e);var v=a;for(;++f<c;){d=u[f];var y=e[d],_=t[d];if(r)var w=a?r(_,y,d,t,e,s):r(y,_,d,e,t,s);if(!(w===i?y===_||o(y,_,n,r,s):w)){m=!1;break}v||(v="constructor"==d)}if(m&&!v){var b=e.constructor,C=t.constructor;b!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof C&&C instanceof C)&&(m=!1)}return s.delete(e),s.delete(t),m}(e,t,n,r,o,s)}(e,t,n,r,oi,o))}function si(e,t,n,r){var o=n.length,s=o,a=!r;if(null==e)return!s;for(e=tt(e);o--;){var u=n[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<s;){var c=(u=n[o])[0],l=e[c],f=u[1];if(a&&u[2]){if(l===i&&!(c in e))return!1}else{var d=new Cr;if(r)var h=r(l,f,c,e,t,d);if(!(h===i?oi(f,l,p|g,r,d):h))return!1}}return!0}function ai(e){return!(!Ta(e)||(t=e,dt&&dt in t))&&(Ra(e)?mt:He).test(fs(e));var t}function ui(e){return"function"==typeof e?e:null==e?Eu:"object"==typeof e?va(e)?pi(e[0],e[1]):hi(e):Au(e)}function ci(e){if(!Zo(e))return Un(e);var t=[];for(var n in tt(e))lt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function li(e){if(!Ta(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Zo(e),n=[];for(var r in e)("constructor"!=r||!t&&lt.call(e,r))&&n.push(r);return n}function fi(e,t){return e<t}function di(e,t){var n=-1,i=_a(e)?r(e.length):[];return Ar(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function hi(e){var t=No(e);return 1==t.length&&t[0][2]?Yo(t[0][0],t[0][1]):function(n){return n===e||si(n,e,t)}}function pi(e,t){return Jo(e)&&Xo(t)?Yo(ls(e),t):function(n){var r=Ya(n,e);return r===i&&r===t?eu(n,e):oi(t,r,p|g)}}function gi(e,t,n,r,o){e!==t&&Hr(t,function(s,a){if(o||(o=new Cr),Ta(s))!function(e,t,n,r,o,s,a){var u=ns(e,n),c=ns(t,n),l=a.get(c);if(l)return void Tr(e,n,l);var f=s?s(u,c,n+"",e,t,a):i,d=f===i;if(d){var h=va(c),p=!h&&ba(c),g=!h&&!p&&La(c);f=c,h||p||g?va(u)?f=u:wa(u)?f=no(u):p?(d=!1,f=Qi(c,!0)):g?(d=!1,f=Xi(c,!0)):f=[]:Oa(c)||ma(c)?(f=u,ma(u)?f=Ua(u):Ta(u)&&!Ra(u)||(f=Uo(c))):d=!1}d&&(a.set(c,f),o(f,c,r,s,a),a.delete(c));Tr(e,n,f)}(e,t,a,n,gi,r,o);else{var u=r?r(ns(e,a),s,a+"",e,t,o):i;u===i&&(u=s),Tr(e,a,u)}},ou)}function mi(e,t){var n=e.length;if(n)return Bo(t+=t<0?n:0,n)?e[t]:i}function vi(e,t,n){t=t.length?Xt(t,function(e){return va(e)?function(t){return Qr(t,1===e.length?e[0]:e)}:e}):[Eu];var r=-1;return t=Xt(t,mn(Lo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(di(e,function(e,n,i){return{criteria:Xt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var u=Yi(i[r],o[r]);if(u){if(r>=a)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)})}function yi(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Qr(e,s);n(a,s)&&ki(o,Bi(s,e),a)}return o}function _i(e,t,n,r){var i=r?un:an,o=-1,s=t.length,a=e;for(e===t&&(t=no(t)),n&&(a=Xt(e,mn(n)));++o<s;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==e&&Lt.call(a,u,1),Lt.call(e,u,1);return e}function wi(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Bo(i)?Lt.call(e,i,1):Ni(e,i)}}return e}function bi(e,t){return e+An(Gn()*(t-e+1))}function Ci(e,t){var n="";if(!e||t<1||t>q)return n;do{t%2&&(n+=e),(t=An(t/2))&&(e+=e)}while(t);return n}function xi(e,t){return os(es(e,t,Eu),e+"")}function Ri(e){return Rr(hu(e))}function Si(e,t){var n=hu(e);return us(n,Fr(t,0,n.length))}function ki(e,t,n,r){if(!Ta(e))return e;for(var o=-1,s=(t=Bi(t,e)).length,a=s-1,u=e;null!=u&&++o<s;){var c=ls(t[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var f=u[c];(l=r?r(f,c,u):i)===i&&(l=Ta(f)?f:Bo(t[o+1])?[]:{})}Dr(u,c,l),u=u[c]}return e}var Ti=rr?function(e,t){return rr.set(e,t),e}:Eu,Di=Fn?function(e,t){return Fn(e,"toString",{configurable:!0,enumerable:!1,value:Tu(t),writable:!0})}:Eu;function Pi(e){return us(hu(e))}function Ei(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=r(o);++i<o;)s[i]=e[i+t];return s}function Oi(e,t){var n;return Ar(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ji(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=N){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!Ma(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return qi(e,t,Eu,n)}function qi(e,t,n,r){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,u=null===t,c=Ma(t),l=t===i;o<s;){var f=An((o+s)/2),d=n(e[f]),h=d!==i,p=null===d,g=d==d,m=Ma(d);if(a)var v=r||g;else v=l?g&&(r||h):u?g&&h&&(r||!p):c?g&&h&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?o=f+1:s=f}return Bn(s,I)}function Fi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!ha(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Mi(e){return"number"==typeof e?e:Ma(e)?M:+e}function Li(e){if("string"==typeof e)return e;if(va(e))return Xt(e,Li)+"";if(Ma(e))return dr?dr.call(e):"";var t=e+"";return"0"==t&&1/e==-j?"-0":t}function Ii(e,t,n){var r=-1,i=Qt,s=e.length,a=!0,u=[],c=u;if(n)a=!1,i=Zt;else if(s>=o){var l=t?null:xo(e);if(l)return Dn(l);a=!1,i=yn,c=new br}else c=t?[]:u;e:for(;++r<s;){var f=e[r],d=t?t(f):f;if(f=n||0!==f?f:0,a&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),u.push(f)}else i(c,d,n)||(c!==u&&c.push(d),u.push(f))}return u}function Ni(e,t){return null==(e=ts(e,t=Bi(t,e)))||delete e[ls(xs(t))]}function Ai(e,t,n,r){return ki(e,t,n(Qr(e,t)),r)}function $i(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Ei(e,r?0:o,r?o+1:i):Ei(e,r?o+1:0,r?i:o)}function Wi(e,t){var n=e;return n instanceof vr&&(n=n.value()),en(t,function(e,t){return t.func.apply(t.thisArg,Yt([e],t.args))},n)}function Ki(e,t,n){var i=e.length;if(i<2)return i?Ii(e[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=e[o],u=-1;++u<i;)u!=o&&(s[o]=Nr(s[o]||a,e[u],t,n));return Ii(Ur(s,1),t,n)}function zi(e,t,n){for(var r=-1,o=e.length,s=t.length,a={};++r<o;){var u=r<s?t[r]:i;n(a,e[r],u)}return a}function Ui(e){return wa(e)?e:[]}function Hi(e){return"function"==typeof e?e:Eu}function Bi(e,t){return va(e)?e:Jo(e,t)?[e]:cs(Ha(e))}var Vi=xi;function Ji(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:Ei(e,t,n)}var Gi=Mn||function(e){return jt.clearTimeout(e)};function Qi(e,t){if(t)return e.slice();var n=e.length,r=Et?Et(n):new e.constructor(n);return e.copy(r),r}function Zi(e){var t=new e.constructor(e.byteLength);return new Tt(t).set(new Tt(e)),t}function Xi(e,t){var n=t?Zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Yi(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,s=Ma(e),a=t!==i,u=null===t,c=t==t,l=Ma(t);if(!u&&!l&&!s&&e>t||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!l&&e<t||l&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function eo(e,t,n,i){for(var o=-1,s=e.length,a=n.length,u=-1,c=t.length,l=Hn(s-a,0),f=r(c+l),d=!i;++u<c;)f[u]=t[u];for(;++o<a;)(d||o<s)&&(f[n[o]]=e[o]);for(;l--;)f[u++]=e[o++];return f}function to(e,t,n,i){for(var o=-1,s=e.length,a=-1,u=n.length,c=-1,l=t.length,f=Hn(s-u,0),d=r(f+l),h=!i;++o<f;)d[o]=e[o];for(var p=o;++c<l;)d[p+c]=t[c];for(;++a<u;)(h||o<s)&&(d[p+n[a]]=e[o++]);return d}function no(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function ro(e,t,n,r){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var u=t[s],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),o?jr(n,u,c):Dr(n,u,c)}return n}function io(e,t){return function(n,r){var i=va(n)?Ht:Er,o=t?t():{};return i(n,e,Lo(r,2),o)}}function oo(e){return xi(function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&Vo(n[0],n[1],a)&&(s=o<3?i:s,o=1),t=tt(t);++r<o;){var u=n[r];u&&e(t,u,r,s)}return t})}function so(e,t){return function(n,r){if(null==n)return n;if(!_a(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=tt(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function ao(e){return function(t,n,r){for(var i=-1,o=tt(t),s=r(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===n(o[u],u,o))break}return t}}function uo(e){return function(t){var n=Rn(t=Ha(t))?On(t):i,r=n?n[0]:t.charAt(0),o=n?Ji(n,1).join(""):t.slice(1);return r[e]()+o}}function co(e){return function(t){return en(Ru(mu(t).replace(vt,"")),e,"")}}function lo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=pr(e.prototype),r=e.apply(n,t);return Ta(r)?r:n}}function fo(e){return function(t,n,r){var o=tt(t);if(!_a(t)){var s=Lo(n,3);t=iu(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[s?t[a]:a]:i}}function ho(e){return Eo(function(t){var n=t.length,r=n,o=mr.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new it(a);if(o&&!u&&"wrapper"==Fo(s))var u=new mr([],!0)}for(r=u?r:n;++r<n;){var c=Fo(s=t[r]),l="wrapper"==c?qo(s):i;u=l&&Go(l[0])&&l[1]==(x|_|b|R)&&!l[4].length&&1==l[9]?u[Fo(l[0])].apply(u,l[3]):1==s.length&&Go(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&va(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function po(e,t,n,o,s,a,u,c,l,f){var d=t&x,h=t&m,p=t&v,g=t&(_|w),y=t&S,b=p?i:lo(e);return function m(){for(var v=arguments.length,_=r(v),w=v;w--;)_[w]=arguments[w];if(g)var C=Mo(m),x=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(_,C);if(o&&(_=eo(_,o,s,g)),a&&(_=to(_,a,u,g)),v-=x,g&&v<f){var R=Tn(_,C);return bo(e,t,po,m.placeholder,n,_,R,c,l,f-v)}var S=h?n:this,k=p?S[e]:e;return v=_.length,c?_=function(e,t){for(var n=e.length,r=Bn(t.length,n),o=no(e);r--;){var s=t[r];e[r]=Bo(s,n)?o[s]:i}return e}(_,c):y&&v>1&&_.reverse(),d&&l<v&&(_.length=l),this&&this!==jt&&this instanceof m&&(k=b||lo(k)),k.apply(S,_)}}function go(e,t){return function(n,r){return function(e,t,n,r){return Vr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function mo(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Li(n),r=Li(r)):(n=Mi(n),r=Mi(r)),o=e(n,r)}return o}}function vo(e){return Eo(function(t){return t=Xt(t,mn(Lo())),xi(function(n){var r=this;return e(t,function(e){return Ut(e,r,n)})})})}function yo(e,t){var n=(t=t===i?" ":Li(t)).length;if(n<2)return n?Ci(t,e):t;var r=Ci(t,Nn(e/En(t)));return Rn(t)?Ji(On(r),0,e).join(""):r.slice(0,e)}function _o(e){return function(t,n,o){return o&&"number"!=typeof o&&Vo(t,n,o)&&(n=o=i),t=$a(t),n===i?(n=t,t=0):n=$a(n),function(e,t,n,i){for(var o=-1,s=Hn(Nn((t-e)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=e,e+=n;return a}(t,n,o=o===i?t<n?1:-1:$a(o),e)}}function wo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=za(t),n=za(n)),e(t,n)}}function bo(e,t,n,r,o,s,a,u,c,l){var f=t&_;t|=f?b:C,(t&=~(f?C:b))&y||(t&=~(m|v));var d=[e,t,o,f?s:i,f?a:i,f?i:s,f?i:a,u,c,l],h=n.apply(i,d);return Go(e)&&rs(h,d),h.placeholder=r,ss(h,e,t)}function Co(e){var t=et[e];return function(e,n){if(e=za(e),(n=null==n?0:Bn(Wa(n),292))&&Kn(e)){var r=(Ha(e)+"e").split("e");return+((r=(Ha(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var xo=er&&1/Dn(new er([,-0]))[1]==j?function(e){return new er(e)}:Mu;function Ro(e){return function(t){var n=Ko(t);return n==G?Sn(t):n==te?Pn(t):function(e,t){return Xt(t,function(t){return[t,e[t]]})}(t,e(t))}}function So(e,t,n,o,s,u,c,f){var d=t&v;if(!d&&"function"!=typeof e)throw new it(a);var h=o?o.length:0;if(h||(t&=~(b|C),o=s=i),c=c===i?c:Hn(Wa(c),0),f=f===i?f:Wa(f),h-=s?s.length:0,t&C){var p=o,g=s;o=s=i}var S=d?i:qo(e),k=[e,t,n,o,s,p,g,u,c,f];if(S&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(m|v|x),s=r==x&&n==_||r==x&&n==R&&e[7].length<=t[8]||r==(x|R)&&t[7].length<=t[8]&&n==_;if(!o&&!s)return e;r&m&&(e[2]=t[2],i|=n&m?0:y);var a=t[3];if(a){var u=e[3];e[3]=u?eo(u,a,t[4]):a,e[4]=u?Tn(e[3],l):t[4]}(a=t[5])&&(u=e[5],e[5]=u?to(u,a,t[6]):a,e[6]=u?Tn(e[5],l):t[6]);(a=t[7])&&(e[7]=a);r&x&&(e[8]=null==e[8]?t[8]:Bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(k,S),e=k[0],t=k[1],n=k[2],o=k[3],s=k[4],!(f=k[9]=k[9]===i?d?0:e.length:Hn(k[9]-h,0))&&t&(_|w)&&(t&=~(_|w)),t&&t!=m)T=t==_||t==w?function(e,t,n){var o=lo(e);return function s(){for(var a=arguments.length,u=r(a),c=a,l=Mo(s);c--;)u[c]=arguments[c];var f=a<3&&u[0]!==l&&u[a-1]!==l?[]:Tn(u,l);return(a-=f.length)<n?bo(e,t,po,s.placeholder,i,u,f,i,i,n-a):Ut(this&&this!==jt&&this instanceof s?o:e,this,u)}}(e,t,f):t!=b&&t!=(m|b)||s.length?po.apply(i,k):function(e,t,n,i){var o=t&m,s=lo(e);return function t(){for(var a=-1,u=arguments.length,c=-1,l=i.length,f=r(l+u),d=this&&this!==jt&&this instanceof t?s:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++a];return Ut(d,o?n:this,f)}}(e,t,n,o);else var T=function(e,t,n){var r=t&m,i=lo(e);return function t(){return(this&&this!==jt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ss((S?Ti:rs)(T,k),e,t)}function ko(e,t,n,r){return e===i||ha(e,at[n])&&!lt.call(r,n)?t:e}function To(e,t,n,r,o,s){return Ta(e)&&Ta(t)&&(s.set(t,e),gi(e,t,i,To,s),s.delete(t)),e}function Do(e){return Oa(e)?i:e}function Po(e,t,n,r,o,s){var a=n&p,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(e),f=s.get(t);if(l&&f)return l==t&&f==e;var d=-1,h=!0,m=n&g?new br:i;for(s.set(e,t),s.set(t,e);++d<u;){var v=e[d],y=t[d];if(r)var _=a?r(y,v,d,t,e,s):r(v,y,d,e,t,s);if(_!==i){if(_)continue;h=!1;break}if(m){if(!nn(t,function(e,t){if(!yn(m,t)&&(v===e||o(v,e,n,r,s)))return m.push(t)})){h=!1;break}}else if(v!==y&&!o(v,y,n,r,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Eo(e){return os(es(e,i,ys),e+"")}function Oo(e){return Zr(e,iu,$o)}function jo(e){return Zr(e,ou,Wo)}var qo=rr?function(e){return rr.get(e)}:Mu;function Fo(e){for(var t=e.name+"",n=ir[t],r=lt.call(ir,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Mo(e){return(lt.call(hr,"placeholder")?hr:e).placeholder}function Lo(){var e=hr.iteratee||Ou;return e=e===Ou?ui:e,arguments.length?e(arguments[0],arguments[1]):e}function Io(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function No(e){for(var t=iu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Xo(i)]}return t}function Ao(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return ai(n)?n:i}var $o=$n?function(e){return null==e?[]:(e=tt(e),Gt($n(e),function(t){return Ft.call(e,t)}))}:Ku,Wo=$n?function(e){for(var t=[];e;)Yt(t,$o(e)),e=Ot(e);return t}:Ku,Ko=Xr;function zo(e,t,n){for(var r=-1,i=(t=Bi(t,e)).length,o=!1;++r<i;){var s=ls(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ka(i)&&Bo(s,i)&&(va(e)||ma(e))}function Uo(e){return"function"!=typeof e.constructor||Zo(e)?{}:pr(Ot(e))}function Ho(e){return va(e)||ma(e)||!!(It&&e&&e[It])}function Bo(e,t){var n=typeof e;return!!(t=null==t?q:t)&&("number"==n||"symbol"!=n&&Ve.test(e))&&e>-1&&e%1==0&&e<t}function Vo(e,t,n){if(!Ta(n))return!1;var r=typeof t;return!!("number"==r?_a(n)&&Bo(t,n.length):"string"==r&&t in n)&&ha(n[t],e)}function Jo(e,t){if(va(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ma(e))||(Pe.test(e)||!De.test(e)||null!=t&&e in tt(t))}function Go(e){var t=Fo(e),n=hr[t];if("function"!=typeof n||!(t in vr.prototype))return!1;if(e===n)return!0;var r=qo(n);return!!r&&e===r[0]}(Zn&&Ko(new Zn(new ArrayBuffer(1)))!=ue||Xn&&Ko(new Xn)!=G||Yn&&"[object Promise]"!=Ko(Yn.resolve())||er&&Ko(new er)!=te||tr&&Ko(new tr)!=oe)&&(Ko=function(e){var t=Xr(e),n=t==X?e.constructor:i,r=n?fs(n):"";if(r)switch(r){case or:return ue;case sr:return G;case ar:return"[object Promise]";case ur:return te;case cr:return oe}return t});var Qo=ut?Ra:zu;function Zo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||at)}function Xo(e){return e==e&&!Ta(e)}function Yo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in tt(n)))}}function es(e,t,n){return t=Hn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=Hn(i.length-t,0),a=r(s);++o<s;)a[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(a),Ut(e,this,u)}}function ts(e,t){return t.length<2?e:Qr(e,Ei(t,0,-1))}function ns(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var rs=as(Ti),is=In||function(e,t){return jt.setTimeout(e,t)},os=as(Di);function ss(e,t,n){var r=t+"";return os(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Bt(A,function(n){var r="_."+n[0];t&n[1]&&!Qt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Ie);return t?t[1].split(Ne):[]}(r),n)))}function as(e){var t=0,n=0;return function(){var r=Vn(),o=P-(r-n);if(n=r,o>0){if(++t>=D)return arguments[0]}else t=0;return e.apply(i,arguments)}}function us(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var s=bi(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var cs=function(e){var t=aa(e,function(e){return n.size===c&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ee,function(e,n,r,i){t.push(r?i.replace($e,"$1"):n||e)}),t});function ls(e){if("string"==typeof e||Ma(e))return e;var t=e+"";return"0"==t&&1/e==-j?"-0":t}function fs(e){if(null!=e){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ds(e){if(e instanceof vr)return e.clone();var t=new mr(e.__wrapped__,e.__chain__);return t.__actions__=no(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var hs=xi(function(e,t){return wa(e)?Nr(e,Ur(t,1,wa,!0)):[]}),ps=xi(function(e,t){var n=xs(t);return wa(n)&&(n=i),wa(e)?Nr(e,Ur(t,1,wa,!0),Lo(n,2)):[]}),gs=xi(function(e,t){var n=xs(t);return wa(n)&&(n=i),wa(e)?Nr(e,Ur(t,1,wa,!0),i,n):[]});function ms(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Wa(n);return i<0&&(i=Hn(r+i,0)),sn(e,Lo(t,3),i)}function vs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=Wa(n),o=n<0?Hn(r+o,0):Bn(o,r-1)),sn(e,Lo(t,3),o,!0)}function ys(e){return(null==e?0:e.length)?Ur(e,1):[]}function _s(e){return e&&e.length?e[0]:i}var ws=xi(function(e){var t=Xt(e,Ui);return t.length&&t[0]===e[0]?ni(t):[]}),bs=xi(function(e){var t=xs(e),n=Xt(e,Ui);return t===xs(n)?t=i:n.pop(),n.length&&n[0]===e[0]?ni(n,Lo(t,2)):[]}),Cs=xi(function(e){var t=xs(e),n=Xt(e,Ui);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?ni(n,i,t):[]});function xs(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Rs=xi(Ss);function Ss(e,t){return e&&e.length&&t&&t.length?_i(e,t):e}var ks=Eo(function(e,t){var n=null==e?0:e.length,r=qr(e,t);return wi(e,Xt(t,function(e){return Bo(e,n)?+e:e}).sort(Yi)),r});function Ts(e){return null==e?e:Qn.call(e)}var Ds=xi(function(e){return Ii(Ur(e,1,wa,!0))}),Ps=xi(function(e){var t=xs(e);return wa(t)&&(t=i),Ii(Ur(e,1,wa,!0),Lo(t,2))}),Es=xi(function(e){var t=xs(e);return t="function"==typeof t?t:i,Ii(Ur(e,1,wa,!0),i,t)});function Os(e){if(!e||!e.length)return[];var t=0;return e=Gt(e,function(e){if(wa(e))return t=Hn(e.length,t),!0}),gn(t,function(t){return Xt(e,fn(t))})}function js(e,t){if(!e||!e.length)return[];var n=Os(e);return null==t?n:Xt(n,function(e){return Ut(t,i,e)})}var qs=xi(function(e,t){return wa(e)?Nr(e,t):[]}),Fs=xi(function(e){return Ki(Gt(e,wa))}),Ms=xi(function(e){var t=xs(e);return wa(t)&&(t=i),Ki(Gt(e,wa),Lo(t,2))}),Ls=xi(function(e){var t=xs(e);return t="function"==typeof t?t:i,Ki(Gt(e,wa),i,t)}),Is=xi(Os);var Ns=xi(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,js(e,n)});function As(e){var t=hr(e);return t.__chain__=!0,t}function $s(e,t){return t(e)}var Ws=Eo(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return qr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof vr&&Bo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:$s,args:[o],thisArg:i}),new mr(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(o)});var Ks=io(function(e,t,n){lt.call(e,n)?++e[n]:jr(e,n,1)});var zs=fo(ms),Us=fo(vs);function Hs(e,t){return(va(e)?Bt:Ar)(e,Lo(t,3))}function Bs(e,t){return(va(e)?Vt:$r)(e,Lo(t,3))}var Vs=io(function(e,t,n){lt.call(e,n)?e[n].push(t):jr(e,n,[t])});var Js=xi(function(e,t,n){var i=-1,o="function"==typeof t,s=_a(e)?r(e.length):[];return Ar(e,function(e){s[++i]=o?Ut(t,e,n):ri(e,t,n)}),s}),Gs=io(function(e,t,n){jr(e,n,t)});function Qs(e,t){return(va(e)?Xt:di)(e,Lo(t,3))}var Zs=io(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Xs=xi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Vo(e,t[0],t[1])?t=[]:n>2&&Vo(t[0],t[1],t[2])&&(t=[t[0]]),vi(e,Ur(t,1),[])}),Ys=Ln||function(){return jt.Date.now()};function ea(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,So(e,x,i,i,i,i,t)}function ta(e,t){var n;if("function"!=typeof t)throw new it(a);return e=Wa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var na=xi(function(e,t,n){var r=m;if(n.length){var i=Tn(n,Mo(na));r|=b}return So(e,r,t,n,i)}),ra=xi(function(e,t,n){var r=m|v;if(n.length){var i=Tn(n,Mo(ra));r|=b}return So(t,r,e,n,i)});function ia(e,t,n){var r,o,s,u,c,l,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new it(a);function g(t){var n=r,s=o;return r=o=i,f=t,u=e.apply(s,n)}function m(e){var n=e-l;return l===i||n>=t||n<0||h&&e-f>=s}function v(){var e=Ys();if(m(e))return y(e);c=is(v,function(e){var n=t-(e-l);return h?Bn(n,s-(e-f)):n}(e))}function y(e){return c=i,p&&r?g(e):(r=o=i,u)}function _(){var e=Ys(),n=m(e);if(r=arguments,o=this,l=e,n){if(c===i)return function(e){return f=e,c=is(v,t),d?g(e):u}(l);if(h)return Gi(c),c=is(v,t),g(l)}return c===i&&(c=is(v,t)),u}return t=za(t)||0,Ta(n)&&(d=!!n.leading,s=(h="maxWait"in n)?Hn(za(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&Gi(c),f=0,r=l=o=c=i},_.flush=function(){return c===i?u:y(Ys())},_}var oa=xi(function(e,t){return Ir(e,1,t)}),sa=xi(function(e,t,n){return Ir(e,za(t)||0,n)});function aa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(aa.Cache||wr),n}function ua(e){if("function"!=typeof e)throw new it(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}aa.Cache=wr;var ca=Vi(function(e,t){var n=(t=1==t.length&&va(t[0])?Xt(t[0],mn(Lo())):Xt(Ur(t,1),mn(Lo()))).length;return xi(function(r){for(var i=-1,o=Bn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Ut(e,this,r)})}),la=xi(function(e,t){var n=Tn(t,Mo(la));return So(e,b,i,t,n)}),fa=xi(function(e,t){var n=Tn(t,Mo(fa));return So(e,C,i,t,n)}),da=Eo(function(e,t){return So(e,R,i,i,i,t)});function ha(e,t){return e===t||e!=e&&t!=t}var pa=wo(Yr),ga=wo(function(e,t){return e>=t}),ma=ii(function(){return arguments}())?ii:function(e){return Da(e)&&lt.call(e,"callee")&&!Ft.call(e,"callee")},va=r.isArray,ya=Nt?mn(Nt):function(e){return Da(e)&&Xr(e)==ae};function _a(e){return null!=e&&ka(e.length)&&!Ra(e)}function wa(e){return Da(e)&&_a(e)}var ba=Wn||zu,Ca=At?mn(At):function(e){return Da(e)&&Xr(e)==U};function xa(e){if(!Da(e))return!1;var t=Xr(e);return t==B||t==H||"string"==typeof e.message&&"string"==typeof e.name&&!Oa(e)}function Ra(e){if(!Ta(e))return!1;var t=Xr(e);return t==V||t==J||t==K||t==Y}function Sa(e){return"number"==typeof e&&e==Wa(e)}function ka(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=q}function Ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Da(e){return null!=e&&"object"==typeof e}var Pa=$t?mn($t):function(e){return Da(e)&&Ko(e)==G};function Ea(e){return"number"==typeof e||Da(e)&&Xr(e)==Q}function Oa(e){if(!Da(e)||Xr(e)!=X)return!1;var t=Ot(e);if(null===t)return!0;var n=lt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ct.call(n)==pt}var ja=Wt?mn(Wt):function(e){return Da(e)&&Xr(e)==ee};var qa=Kt?mn(Kt):function(e){return Da(e)&&Ko(e)==te};function Fa(e){return"string"==typeof e||!va(e)&&Da(e)&&Xr(e)==ne}function Ma(e){return"symbol"==typeof e||Da(e)&&Xr(e)==re}var La=zt?mn(zt):function(e){return Da(e)&&ka(e.length)&&!!St[Xr(e)]};var Ia=wo(fi),Na=wo(function(e,t){return e<=t});function Aa(e){if(!e)return[];if(_a(e))return Fa(e)?On(e):no(e);if(rn&&e[rn])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[rn]());var t=Ko(e);return(t==G?Sn:t==te?Dn:hu)(e)}function $a(e){return e?(e=za(e))===j||e===-j?(e<0?-1:1)*F:e==e?e:0:0===e?e:0}function Wa(e){var t=$a(e),n=t%1;return t==t?n?t-n:t:0}function Ka(e){return e?Fr(Wa(e),0,L):0}function za(e){if("number"==typeof e)return e;if(Ma(e))return M;if(Ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(qe,"");var n=Ue.test(e);return n||Be.test(e)?Pt(e.slice(2),n?2:8):ze.test(e)?M:+e}function Ua(e){return ro(e,ou(e))}function Ha(e){return null==e?"":Li(e)}var Ba=oo(function(e,t){if(Zo(t)||_a(t))ro(t,iu(t),e);else for(var n in t)lt.call(t,n)&&Dr(e,n,t[n])}),Va=oo(function(e,t){ro(t,ou(t),e)}),Ja=oo(function(e,t,n,r){ro(t,ou(t),e,r)}),Ga=oo(function(e,t,n,r){ro(t,iu(t),e,r)}),Qa=Eo(qr);var Za=xi(function(e,t){e=tt(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&Vo(t[0],t[1],o)&&(r=1);++n<r;)for(var s=t[n],a=ou(s),u=-1,c=a.length;++u<c;){var l=a[u],f=e[l];(f===i||ha(f,at[l])&&!lt.call(e,l))&&(e[l]=s[l])}return e}),Xa=xi(function(e){return e.push(i,To),Ut(au,i,e)});function Ya(e,t,n){var r=null==e?i:Qr(e,t);return r===i?n:r}function eu(e,t){return null!=e&&zo(e,t,ti)}var tu=go(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),e[t]=n},Tu(Eu)),nu=go(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),lt.call(e,t)?e[t].push(n):e[t]=[n]},Lo),ru=xi(ri);function iu(e){return _a(e)?xr(e):ci(e)}function ou(e){return _a(e)?xr(e,!0):li(e)}var su=oo(function(e,t,n){gi(e,t,n)}),au=oo(function(e,t,n,r){gi(e,t,n,r)}),uu=Eo(function(e,t){var n={};if(null==e)return n;var r=!1;t=Xt(t,function(t){return t=Bi(t,e),r||(r=t.length>1),t}),ro(e,jo(e),n),r&&(n=Mr(n,f|d|h,Do));for(var i=t.length;i--;)Ni(n,t[i]);return n});var cu=Eo(function(e,t){return null==e?{}:function(e,t){return yi(e,t,function(t,n){return eu(e,n)})}(e,t)});function lu(e,t){if(null==e)return{};var n=Xt(jo(e),function(e){return[e]});return t=Lo(t),yi(e,n,function(e,n){return t(e,n[0])})}var fu=Ro(iu),du=Ro(ou);function hu(e){return null==e?[]:vn(e,iu(e))}var pu=co(function(e,t,n){return t=t.toLowerCase(),e+(n?gu(t):t)});function gu(e){return xu(Ha(e).toLowerCase())}function mu(e){return(e=Ha(e))&&e.replace(Je,bn).replace(yt,"")}var vu=co(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),yu=co(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),_u=uo("toLowerCase");var wu=co(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var bu=co(function(e,t,n){return e+(n?" ":"")+xu(t)});var Cu=co(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),xu=uo("toUpperCase");function Ru(e,t,n){return e=Ha(e),(t=n?i:t)===i?function(e){return Ct.test(e)}(e)?function(e){return e.match(wt)||[]}(e):function(e){return e.match(Ae)||[]}(e):e.match(t)||[]}var Su=xi(function(e,t){try{return Ut(e,i,t)}catch(e){return xa(e)?e:new Xe(e)}}),ku=Eo(function(e,t){return Bt(t,function(t){t=ls(t),jr(e,t,na(e[t],e))}),e});function Tu(e){return function(){return e}}var Du=ho(),Pu=ho(!0);function Eu(e){return e}function Ou(e){return ui("function"==typeof e?e:Mr(e,f))}var ju=xi(function(e,t){return function(n){return ri(n,e,t)}}),qu=xi(function(e,t){return function(n){return ri(e,n,t)}});function Fu(e,t,n){var r=iu(t),i=Gr(t,r);null!=n||Ta(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Gr(t,iu(t)));var o=!(Ta(n)&&"chain"in n&&!n.chain),s=Ra(e);return Bt(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=no(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Yt([this.value()],arguments))})}),e}function Mu(){}var Lu=vo(Xt),Iu=vo(Jt),Nu=vo(nn);function Au(e){return Jo(e)?fn(ls(e)):function(e){return function(t){return Qr(t,e)}}(e)}var $u=_o(),Wu=_o(!0);function Ku(){return[]}function zu(){return!1}var Uu=mo(function(e,t){return e+t},0),Hu=Co("ceil"),Bu=mo(function(e,t){return e/t},1),Vu=Co("floor");var Ju,Gu=mo(function(e,t){return e*t},1),Qu=Co("round"),Zu=mo(function(e,t){return e-t},0);return hr.after=function(e,t){if("function"!=typeof t)throw new it(a);return e=Wa(e),function(){if(--e<1)return t.apply(this,arguments)}},hr.ary=ea,hr.assign=Ba,hr.assignIn=Va,hr.assignInWith=Ja,hr.assignWith=Ga,hr.at=Qa,hr.before=ta,hr.bind=na,hr.bindAll=ku,hr.bindKey=ra,hr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return va(e)?e:[e]},hr.chain=As,hr.chunk=function(e,t,n){t=(n?Vo(e,t,n):t===i)?1:Hn(Wa(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,u=r(Nn(o/t));s<o;)u[a++]=Ei(e,s,s+=t);return u},hr.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},hr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Yt(va(n)?no(n):[n],Ur(t,1))},hr.cond=function(e){var t=null==e?0:e.length,n=Lo();return e=t?Xt(e,function(e){if("function"!=typeof e[1])throw new it(a);return[n(e[0]),e[1]]}):[],xi(function(n){for(var r=-1;++r<t;){var i=e[r];if(Ut(i[0],this,n))return Ut(i[1],this,n)}})},hr.conforms=function(e){return function(e){var t=iu(e);return function(n){return Lr(n,e,t)}}(Mr(e,f))},hr.constant=Tu,hr.countBy=Ks,hr.create=function(e,t){var n=pr(e);return null==t?n:Or(n,t)},hr.curry=function e(t,n,r){var o=So(t,_,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},hr.curryRight=function e(t,n,r){var o=So(t,w,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},hr.debounce=ia,hr.defaults=Za,hr.defaultsDeep=Xa,hr.defer=oa,hr.delay=sa,hr.difference=hs,hr.differenceBy=ps,hr.differenceWith=gs,hr.drop=function(e,t,n){var r=null==e?0:e.length;return r?Ei(e,(t=n||t===i?1:Wa(t))<0?0:t,r):[]},hr.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Ei(e,0,(t=r-(t=n||t===i?1:Wa(t)))<0?0:t):[]},hr.dropRightWhile=function(e,t){return e&&e.length?$i(e,Lo(t,3),!0,!0):[]},hr.dropWhile=function(e,t){return e&&e.length?$i(e,Lo(t,3),!0):[]},hr.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Vo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=Wa(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:Wa(r))<0&&(r+=o),r=n>r?0:Ka(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},hr.filter=function(e,t){return(va(e)?Gt:zr)(e,Lo(t,3))},hr.flatMap=function(e,t){return Ur(Qs(e,t),1)},hr.flatMapDeep=function(e,t){return Ur(Qs(e,t),j)},hr.flatMapDepth=function(e,t,n){return n=n===i?1:Wa(n),Ur(Qs(e,t),n)},hr.flatten=ys,hr.flattenDeep=function(e){return(null==e?0:e.length)?Ur(e,j):[]},hr.flattenDepth=function(e,t){return(null==e?0:e.length)?Ur(e,t=t===i?1:Wa(t)):[]},hr.flip=function(e){return So(e,S)},hr.flow=Du,hr.flowRight=Pu,hr.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},hr.functions=function(e){return null==e?[]:Gr(e,iu(e))},hr.functionsIn=function(e){return null==e?[]:Gr(e,ou(e))},hr.groupBy=Vs,hr.initial=function(e){return(null==e?0:e.length)?Ei(e,0,-1):[]},hr.intersection=ws,hr.intersectionBy=bs,hr.intersectionWith=Cs,hr.invert=tu,hr.invertBy=nu,hr.invokeMap=Js,hr.iteratee=Ou,hr.keyBy=Gs,hr.keys=iu,hr.keysIn=ou,hr.map=Qs,hr.mapKeys=function(e,t){var n={};return t=Lo(t,3),Vr(e,function(e,r,i){jr(n,t(e,r,i),e)}),n},hr.mapValues=function(e,t){var n={};return t=Lo(t,3),Vr(e,function(e,r,i){jr(n,r,t(e,r,i))}),n},hr.matches=function(e){return hi(Mr(e,f))},hr.matchesProperty=function(e,t){return pi(e,Mr(t,f))},hr.memoize=aa,hr.merge=su,hr.mergeWith=au,hr.method=ju,hr.methodOf=qu,hr.mixin=Fu,hr.negate=ua,hr.nthArg=function(e){return e=Wa(e),xi(function(t){return mi(t,e)})},hr.omit=uu,hr.omitBy=function(e,t){return lu(e,ua(Lo(t)))},hr.once=function(e){return ta(2,e)},hr.orderBy=function(e,t,n,r){return null==e?[]:(va(t)||(t=null==t?[]:[t]),va(n=r?i:n)||(n=null==n?[]:[n]),vi(e,t,n))},hr.over=Lu,hr.overArgs=ca,hr.overEvery=Iu,hr.overSome=Nu,hr.partial=la,hr.partialRight=fa,hr.partition=Zs,hr.pick=cu,hr.pickBy=lu,hr.property=Au,hr.propertyOf=function(e){return function(t){return null==e?i:Qr(e,t)}},hr.pull=Rs,hr.pullAll=Ss,hr.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?_i(e,t,Lo(n,2)):e},hr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?_i(e,t,i,n):e},hr.pullAt=ks,hr.range=$u,hr.rangeRight=Wu,hr.rearg=da,hr.reject=function(e,t){return(va(e)?Gt:zr)(e,ua(Lo(t,3)))},hr.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Lo(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return wi(e,i),n},hr.rest=function(e,t){if("function"!=typeof e)throw new it(a);return xi(e,t=t===i?t:Wa(t))},hr.reverse=Ts,hr.sampleSize=function(e,t,n){return t=(n?Vo(e,t,n):t===i)?1:Wa(t),(va(e)?Sr:Si)(e,t)},hr.set=function(e,t,n){return null==e?e:ki(e,t,n)},hr.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ki(e,t,n,r)},hr.shuffle=function(e){return(va(e)?kr:Pi)(e)},hr.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Vo(e,t,n)?(t=0,n=r):(t=null==t?0:Wa(t),n=n===i?r:Wa(n)),Ei(e,t,n)):[]},hr.sortBy=Xs,hr.sortedUniq=function(e){return e&&e.length?Fi(e):[]},hr.sortedUniqBy=function(e,t){return e&&e.length?Fi(e,Lo(t,2)):[]},hr.split=function(e,t,n){return n&&"number"!=typeof n&&Vo(e,t,n)&&(t=n=i),(n=n===i?L:n>>>0)?(e=Ha(e))&&("string"==typeof t||null!=t&&!ja(t))&&!(t=Li(t))&&Rn(e)?Ji(On(e),0,n):e.split(t,n):[]},hr.spread=function(e,t){if("function"!=typeof e)throw new it(a);return t=null==t?0:Hn(Wa(t),0),xi(function(n){var r=n[t],i=Ji(n,0,t);return r&&Yt(i,r),Ut(e,this,i)})},hr.tail=function(e){var t=null==e?0:e.length;return t?Ei(e,1,t):[]},hr.take=function(e,t,n){return e&&e.length?Ei(e,0,(t=n||t===i?1:Wa(t))<0?0:t):[]},hr.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Ei(e,(t=r-(t=n||t===i?1:Wa(t)))<0?0:t,r):[]},hr.takeRightWhile=function(e,t){return e&&e.length?$i(e,Lo(t,3),!1,!0):[]},hr.takeWhile=function(e,t){return e&&e.length?$i(e,Lo(t,3)):[]},hr.tap=function(e,t){return t(e),e},hr.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new it(a);return Ta(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ia(e,t,{leading:r,maxWait:t,trailing:i})},hr.thru=$s,hr.toArray=Aa,hr.toPairs=fu,hr.toPairsIn=du,hr.toPath=function(e){return va(e)?Xt(e,ls):Ma(e)?[e]:no(cs(Ha(e)))},hr.toPlainObject=Ua,hr.transform=function(e,t,n){var r=va(e),i=r||ba(e)||La(e);if(t=Lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ta(e)&&Ra(o)?pr(Ot(e)):{}}return(i?Bt:Vr)(e,function(e,r,i){return t(n,e,r,i)}),n},hr.unary=function(e){return ea(e,1)},hr.union=Ds,hr.unionBy=Ps,hr.unionWith=Es,hr.uniq=function(e){return e&&e.length?Ii(e):[]},hr.uniqBy=function(e,t){return e&&e.length?Ii(e,Lo(t,2)):[]},hr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?Ii(e,i,t):[]},hr.unset=function(e,t){return null==e||Ni(e,t)},hr.unzip=Os,hr.unzipWith=js,hr.update=function(e,t,n){return null==e?e:Ai(e,t,Hi(n))},hr.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Ai(e,t,Hi(n),r)},hr.values=hu,hr.valuesIn=function(e){return null==e?[]:vn(e,ou(e))},hr.without=qs,hr.words=Ru,hr.wrap=function(e,t){return la(Hi(t),e)},hr.xor=Fs,hr.xorBy=Ms,hr.xorWith=Ls,hr.zip=Is,hr.zipObject=function(e,t){return zi(e||[],t||[],Dr)},hr.zipObjectDeep=function(e,t){return zi(e||[],t||[],ki)},hr.zipWith=Ns,hr.entries=fu,hr.entriesIn=du,hr.extend=Va,hr.extendWith=Ja,Fu(hr,hr),hr.add=Uu,hr.attempt=Su,hr.camelCase=pu,hr.capitalize=gu,hr.ceil=Hu,hr.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=za(n))==n?n:0),t!==i&&(t=(t=za(t))==t?t:0),Fr(za(e),t,n)},hr.clone=function(e){return Mr(e,h)},hr.cloneDeep=function(e){return Mr(e,f|h)},hr.cloneDeepWith=function(e,t){return Mr(e,f|h,t="function"==typeof t?t:i)},hr.cloneWith=function(e,t){return Mr(e,h,t="function"==typeof t?t:i)},hr.conformsTo=function(e,t){return null==t||Lr(e,t,iu(t))},hr.deburr=mu,hr.defaultTo=function(e,t){return null==e||e!=e?t:e},hr.divide=Bu,hr.endsWith=function(e,t,n){e=Ha(e),t=Li(t);var r=e.length,o=n=n===i?r:Fr(Wa(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},hr.eq=ha,hr.escape=function(e){return(e=Ha(e))&&Re.test(e)?e.replace(Ce,Cn):e},hr.escapeRegExp=function(e){return(e=Ha(e))&&je.test(e)?e.replace(Oe,"\\$&"):e},hr.every=function(e,t,n){var r=va(e)?Jt:Wr;return n&&Vo(e,t,n)&&(t=i),r(e,Lo(t,3))},hr.find=zs,hr.findIndex=ms,hr.findKey=function(e,t){return on(e,Lo(t,3),Vr)},hr.findLast=Us,hr.findLastIndex=vs,hr.findLastKey=function(e,t){return on(e,Lo(t,3),Jr)},hr.floor=Vu,hr.forEach=Hs,hr.forEachRight=Bs,hr.forIn=function(e,t){return null==e?e:Hr(e,Lo(t,3),ou)},hr.forInRight=function(e,t){return null==e?e:Br(e,Lo(t,3),ou)},hr.forOwn=function(e,t){return e&&Vr(e,Lo(t,3))},hr.forOwnRight=function(e,t){return e&&Jr(e,Lo(t,3))},hr.get=Ya,hr.gt=pa,hr.gte=ga,hr.has=function(e,t){return null!=e&&zo(e,t,ei)},hr.hasIn=eu,hr.head=_s,hr.identity=Eu,hr.includes=function(e,t,n,r){e=_a(e)?e:hu(e),n=n&&!r?Wa(n):0;var i=e.length;return n<0&&(n=Hn(i+n,0)),Fa(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&an(e,t,n)>-1},hr.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Wa(n);return i<0&&(i=Hn(r+i,0)),an(e,t,i)},hr.inRange=function(e,t,n){return t=$a(t),n===i?(n=t,t=0):n=$a(n),function(e,t,n){return e>=Bn(t,n)&&e<Hn(t,n)}(e=za(e),t,n)},hr.invoke=ru,hr.isArguments=ma,hr.isArray=va,hr.isArrayBuffer=ya,hr.isArrayLike=_a,hr.isArrayLikeObject=wa,hr.isBoolean=function(e){return!0===e||!1===e||Da(e)&&Xr(e)==z},hr.isBuffer=ba,hr.isDate=Ca,hr.isElement=function(e){return Da(e)&&1===e.nodeType&&!Oa(e)},hr.isEmpty=function(e){if(null==e)return!0;if(_a(e)&&(va(e)||"string"==typeof e||"function"==typeof e.splice||ba(e)||La(e)||ma(e)))return!e.length;var t=Ko(e);if(t==G||t==te)return!e.size;if(Zo(e))return!ci(e).length;for(var n in e)if(lt.call(e,n))return!1;return!0},hr.isEqual=function(e,t){return oi(e,t)},hr.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?oi(e,t,i,n):!!r},hr.isError=xa,hr.isFinite=function(e){return"number"==typeof e&&Kn(e)},hr.isFunction=Ra,hr.isInteger=Sa,hr.isLength=ka,hr.isMap=Pa,hr.isMatch=function(e,t){return e===t||si(e,t,No(t))},hr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,si(e,t,No(t),n)},hr.isNaN=function(e){return Ea(e)&&e!=+e},hr.isNative=function(e){if(Qo(e))throw new Xe(s);return ai(e)},hr.isNil=function(e){return null==e},hr.isNull=function(e){return null===e},hr.isNumber=Ea,hr.isObject=Ta,hr.isObjectLike=Da,hr.isPlainObject=Oa,hr.isRegExp=ja,hr.isSafeInteger=function(e){return Sa(e)&&e>=-q&&e<=q},hr.isSet=qa,hr.isString=Fa,hr.isSymbol=Ma,hr.isTypedArray=La,hr.isUndefined=function(e){return e===i},hr.isWeakMap=function(e){return Da(e)&&Ko(e)==oe},hr.isWeakSet=function(e){return Da(e)&&Xr(e)==se},hr.join=function(e,t){return null==e?"":zn.call(e,t)},hr.kebabCase=vu,hr.last=xs,hr.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=Wa(n))<0?Hn(r+o,0):Bn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):sn(e,cn,o,!0)},hr.lowerCase=yu,hr.lowerFirst=_u,hr.lt=Ia,hr.lte=Na,hr.max=function(e){return e&&e.length?Kr(e,Eu,Yr):i},hr.maxBy=function(e,t){return e&&e.length?Kr(e,Lo(t,2),Yr):i},hr.mean=function(e){return ln(e,Eu)},hr.meanBy=function(e,t){return ln(e,Lo(t,2))},hr.min=function(e){return e&&e.length?Kr(e,Eu,fi):i},hr.minBy=function(e,t){return e&&e.length?Kr(e,Lo(t,2),fi):i},hr.stubArray=Ku,hr.stubFalse=zu,hr.stubObject=function(){return{}},hr.stubString=function(){return""},hr.stubTrue=function(){return!0},hr.multiply=Gu,hr.nth=function(e,t){return e&&e.length?mi(e,Wa(t)):i},hr.noConflict=function(){return jt._===this&&(jt._=gt),this},hr.noop=Mu,hr.now=Ys,hr.pad=function(e,t,n){e=Ha(e);var r=(t=Wa(t))?En(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return yo(An(i),n)+e+yo(Nn(i),n)},hr.padEnd=function(e,t,n){e=Ha(e);var r=(t=Wa(t))?En(e):0;return t&&r<t?e+yo(t-r,n):e},hr.padStart=function(e,t,n){e=Ha(e);var r=(t=Wa(t))?En(e):0;return t&&r<t?yo(t-r,n)+e:e},hr.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Jn(Ha(e).replace(Fe,""),t||0)},hr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Vo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=$a(e),t===i?(t=e,e=0):t=$a(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Gn();return Bn(e+o*(t-e+Dt("1e-"+((o+"").length-1))),t)}return bi(e,t)},hr.reduce=function(e,t,n){var r=va(e)?en:hn,i=arguments.length<3;return r(e,Lo(t,4),n,i,Ar)},hr.reduceRight=function(e,t,n){var r=va(e)?tn:hn,i=arguments.length<3;return r(e,Lo(t,4),n,i,$r)},hr.repeat=function(e,t,n){return t=(n?Vo(e,t,n):t===i)?1:Wa(t),Ci(Ha(e),t)},hr.replace=function(){var e=arguments,t=Ha(e[0]);return e.length<3?t:t.replace(e[1],e[2])},hr.result=function(e,t,n){var r=-1,o=(t=Bi(t,e)).length;for(o||(o=1,e=i);++r<o;){var s=null==e?i:e[ls(t[r])];s===i&&(r=o,s=n),e=Ra(s)?s.call(e):s}return e},hr.round=Qu,hr.runInContext=e,hr.sample=function(e){return(va(e)?Rr:Ri)(e)},hr.size=function(e){if(null==e)return 0;if(_a(e))return Fa(e)?En(e):e.length;var t=Ko(e);return t==G||t==te?e.size:ci(e).length},hr.snakeCase=wu,hr.some=function(e,t,n){var r=va(e)?nn:Oi;return n&&Vo(e,t,n)&&(t=i),r(e,Lo(t,3))},hr.sortedIndex=function(e,t){return ji(e,t)},hr.sortedIndexBy=function(e,t,n){return qi(e,t,Lo(n,2))},hr.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ji(e,t);if(r<n&&ha(e[r],t))return r}return-1},hr.sortedLastIndex=function(e,t){return ji(e,t,!0)},hr.sortedLastIndexBy=function(e,t,n){return qi(e,t,Lo(n,2),!0)},hr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ji(e,t,!0)-1;if(ha(e[n],t))return n}return-1},hr.startCase=bu,hr.startsWith=function(e,t,n){return e=Ha(e),n=null==n?0:Fr(Wa(n),0,e.length),t=Li(t),e.slice(n,n+t.length)==t},hr.subtract=Zu,hr.sum=function(e){return e&&e.length?pn(e,Eu):0},hr.sumBy=function(e,t){return e&&e.length?pn(e,Lo(t,2)):0},hr.template=function(e,t,n){var r=hr.templateSettings;n&&Vo(e,t,n)&&(t=i),e=Ha(e),t=Ja({},t,r,ko);var o,s,a=Ja({},t.imports,r.imports,ko),u=iu(a),c=vn(a,u),l=0,f=t.interpolate||Ge,d="__p += '",h=nt((t.escape||Ge).source+"|"+f.source+"|"+(f===Te?We:Ge).source+"|"+(t.evaluate||Ge).source+"|$","g"),p="//# sourceURL="+(lt.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rt+"]")+"\n";e.replace(h,function(t,n,r,i,a,u){return r||(r=i),d+=e.slice(l,u).replace(Qe,xn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),d+="';\n";var g=lt.call(t,"variable")&&t.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(ye,""):d).replace(_e,"$1").replace(we,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Su(function(){return Ye(u,p+"return "+d).apply(i,c)});if(m.source=d,xa(m))throw m;return m},hr.times=function(e,t){if((e=Wa(e))<1||e>q)return[];var n=L,r=Bn(e,L);t=Lo(t),e-=L;for(var i=gn(r,t);++n<e;)t(n);return i},hr.toFinite=$a,hr.toInteger=Wa,hr.toLength=Ka,hr.toLower=function(e){return Ha(e).toLowerCase()},hr.toNumber=za,hr.toSafeInteger=function(e){return e?Fr(Wa(e),-q,q):0===e?e:0},hr.toString=Ha,hr.toUpper=function(e){return Ha(e).toUpperCase()},hr.trim=function(e,t,n){if((e=Ha(e))&&(n||t===i))return e.replace(qe,"");if(!e||!(t=Li(t)))return e;var r=On(e),o=On(t);return Ji(r,_n(r,o),wn(r,o)+1).join("")},hr.trimEnd=function(e,t,n){if((e=Ha(e))&&(n||t===i))return e.replace(Me,"");if(!e||!(t=Li(t)))return e;var r=On(e);return Ji(r,0,wn(r,On(t))+1).join("")},hr.trimStart=function(e,t,n){if((e=Ha(e))&&(n||t===i))return e.replace(Fe,"");if(!e||!(t=Li(t)))return e;var r=On(e);return Ji(r,_n(r,On(t))).join("")},hr.truncate=function(e,t){var n=k,r=T;if(Ta(t)){var o="separator"in t?t.separator:o;n="length"in t?Wa(t.length):n,r="omission"in t?Li(t.omission):r}var s=(e=Ha(e)).length;if(Rn(e)){var a=On(e);s=a.length}if(n>=s)return e;var u=n-En(r);if(u<1)return r;var c=a?Ji(a,0,u).join(""):e.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),ja(o)){if(e.slice(u).search(o)){var l,f=c;for(o.global||(o=nt(o.source,Ha(Ke.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var d=l.index;c=c.slice(0,d===i?u:d)}}else if(e.indexOf(Li(o),u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+r},hr.unescape=function(e){return(e=Ha(e))&&xe.test(e)?e.replace(be,jn):e},hr.uniqueId=function(e){var t=++ft;return Ha(e)+t},hr.upperCase=Cu,hr.upperFirst=xu,hr.each=Hs,hr.eachRight=Bs,hr.first=_s,Fu(hr,(Ju={},Vr(hr,function(e,t){lt.call(hr.prototype,t)||(Ju[t]=e)}),Ju),{chain:!1}),hr.VERSION="4.17.19",Bt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){hr[e].placeholder=hr}),Bt(["drop","take"],function(e,t){vr.prototype[e]=function(n){n=n===i?1:Hn(Wa(n),0);var r=this.__filtered__&&!t?new vr(this):this.clone();return r.__filtered__?r.__takeCount__=Bn(n,r.__takeCount__):r.__views__.push({size:Bn(n,L),type:e+(r.__dir__<0?"Right":"")}),r},vr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Bt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==E||3==n;vr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Bt(["head","last"],function(e,t){var n="take"+(t?"Right":"");vr.prototype[e]=function(){return this[n](1).value()[0]}}),Bt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");vr.prototype[e]=function(){return this.__filtered__?new vr(this):this[n](1)}}),vr.prototype.compact=function(){return this.filter(Eu)},vr.prototype.find=function(e){return this.filter(e).head()},vr.prototype.findLast=function(e){return this.reverse().find(e)},vr.prototype.invokeMap=xi(function(e,t){return"function"==typeof e?new vr(this):this.map(function(n){return ri(n,e,t)})}),vr.prototype.reject=function(e){return this.filter(ua(Lo(e)))},vr.prototype.slice=function(e,t){e=Wa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new vr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=Wa(t))<0?n.dropRight(-t):n.take(t-e)),n)},vr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},vr.prototype.toArray=function(){return this.take(L)},Vr(vr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=hr[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);o&&(hr.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,u=t instanceof vr,c=a[0],l=u||va(t),f=function(e){var t=o.apply(hr,Yt([e],a));return r&&d?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=this.__chain__,h=!!this.__actions__.length,p=s&&!d,g=u&&!h;if(!s&&l){t=g?t:new vr(this);var m=e.apply(t,a);return m.__actions__.push({func:$s,args:[f],thisArg:i}),new mr(m,d)}return p&&g?e.apply(this,a):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})}),Bt(["pop","push","shift","sort","splice","unshift"],function(e){var t=ot[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);hr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(va(i)?i:[],e)}return this[n](function(n){return t.apply(va(n)?n:[],e)})}}),Vr(vr.prototype,function(e,t){var n=hr[t];if(n){var r=n.name+"";lt.call(ir,r)||(ir[r]=[]),ir[r].push({name:t,func:n})}}),ir[po(i,v).name]=[{name:"wrapper",func:i}],vr.prototype.clone=function(){var e=new vr(this.__wrapped__);return e.__actions__=no(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=no(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=no(this.__views__),e},vr.prototype.reverse=function(){if(this.__filtered__){var e=new vr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},vr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=va(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Bn(t,e+s);break;case"takeRight":e=Hn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,f=l.length,d=0,h=Bn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return Wi(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var g=-1,m=e[c+=t];++g<f;){var v=l[g],y=v.iteratee,_=v.type,w=y(m);if(_==O)m=w;else if(!w){if(_==E)continue e;break e}}p[d++]=m}return p},hr.prototype.at=Ws,hr.prototype.chain=function(){return As(this)},hr.prototype.commit=function(){return new mr(this.value(),this.__chain__)},hr.prototype.next=function(){this.__values__===i&&(this.__values__=Aa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},hr.prototype.plant=function(e){for(var t,n=this;n instanceof gr;){var r=ds(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},hr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof vr){var t=e;return this.__actions__.length&&(t=new vr(this)),(t=t.reverse()).__actions__.push({func:$s,args:[Ts],thisArg:i}),new mr(t,this.__chain__)}return this.thru(Ts)},hr.prototype.toJSON=hr.prototype.valueOf=hr.prototype.value=function(){return Wi(this.__wrapped__,this.__actions__)},hr.prototype.first=hr.prototype.head,rn&&(hr.prototype[rn]=function(){return this}),hr}();jt._=qn,(r=function(){return qn}.call(t,n,t,e))===i||(e.exports=r)}).call(this)}).call(this,n(15)(e))},function(e,t,n){(function(e){(function(t){"use strict";function n(e,t){t|=0;for(var n=Math.max(e.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=e[t+i];return r}var r=function(e){var t=n(arguments,1);return function(){var r=n(arguments);return e.apply(null,t.concat(r))}},i=function(e){return function(){var t=n(arguments),r=t.pop();e.call(this,t,r)}};function o(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var s="function"==typeof setImmediate&&setImmediate,a="object"==typeof process&&"function"==typeof process.nextTick;function u(e){setTimeout(e,0)}function c(e){return function(t){var r=n(arguments,1);e(function(){t.apply(null,r)})}}var l=c(s?setImmediate:a?process.nextTick:u);function f(e){return i(function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}o(r)&&"function"==typeof r.then?r.then(function(e){d(n,null,e)},function(e){d(n,e.message?e:new Error(e))}):n(null,r)})}function d(e,t,n){try{e(t,n)}catch(e){l(h,e)}}function h(e){throw e}var p="function"==typeof Symbol;function g(e){return p&&"AsyncFunction"===e[Symbol.toStringTag]}function m(e){return g(e)?f(e):e}function v(e){return function(t){var r=n(arguments,1),o=i(function(n,r){var i=this;return e(t,function(e,t){m(e).apply(i,n.concat(t))},r)});return r.length?o.apply(this,r):o}}var y="object"==typeof global&&global&&global.Object===Object&&global,_="object"==typeof self&&self&&self.Object===Object&&self,w=y||_||Function("return this")(),b=w.Symbol,C=Object.prototype,x=C.hasOwnProperty,R=C.toString,S=b?b.toStringTag:void 0,k=Object.prototype.toString,T="[object Null]",D="[object Undefined]",P=b?b.toStringTag:void 0;function E(e){return null==e?void 0===e?D:T:P&&P in Object(e)?function(e){var t=x.call(e,S),n=e[S];try{e[S]=void 0;var r=!0}catch(e){}var i=R.call(e);return r&&(t?e[S]=n:delete e[S]),i}(e):function(e){return k.call(e)}(e)}var O="[object AsyncFunction]",j="[object Function]",q="[object GeneratorFunction]",F="[object Proxy]",M=9007199254740991;function L(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=M}function I(e){return null!=e&&L(e.length)&&!function(e){if(!o(e))return!1;var t=E(e);return t==j||t==q||t==O||t==F}(e)}var N={};function A(){}function $(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var W="function"==typeof Symbol&&Symbol.iterator,K=function(e){return W&&e[W]&&e[W]()};function z(e){return null!=e&&"object"==typeof e}var U="[object Arguments]";function H(e){return z(e)&&E(e)==U}var B=Object.prototype,V=B.hasOwnProperty,J=B.propertyIsEnumerable,G=H(function(){return arguments}())?H:function(e){return z(e)&&V.call(e,"callee")&&!J.call(e,"callee")},Q=Array.isArray,Z="object"==typeof t&&t&&!t.nodeType&&t,X=Z&&"object"==typeof e&&e&&!e.nodeType&&e,Y=X&&X.exports===Z?w.Buffer:void 0,ee=(Y?Y.isBuffer:void 0)||function(){return!1},te=9007199254740991,ne=/^(?:0|[1-9]\d*)$/;function re(e,t){var n=typeof e;return!!(t=null==t?te:t)&&("number"==n||"symbol"!=n&&ne.test(e))&&e>-1&&e%1==0&&e<t}var ie={};ie["[object Float32Array]"]=ie["[object Float64Array]"]=ie["[object Int8Array]"]=ie["[object Int16Array]"]=ie["[object Int32Array]"]=ie["[object Uint8Array]"]=ie["[object Uint8ClampedArray]"]=ie["[object Uint16Array]"]=ie["[object Uint32Array]"]=!0,ie["[object Arguments]"]=ie["[object Array]"]=ie["[object ArrayBuffer]"]=ie["[object Boolean]"]=ie["[object DataView]"]=ie["[object Date]"]=ie["[object Error]"]=ie["[object Function]"]=ie["[object Map]"]=ie["[object Number]"]=ie["[object Object]"]=ie["[object RegExp]"]=ie["[object Set]"]=ie["[object String]"]=ie["[object WeakMap]"]=!1;var oe,se="object"==typeof t&&t&&!t.nodeType&&t,ae=se&&"object"==typeof e&&e&&!e.nodeType&&e,ue=ae&&ae.exports===se&&y.process,ce=function(){try{var e=ae&&ae.require&&ae.require("util").types;return e||ue&&ue.binding&&ue.binding("util")}catch(e){}}(),le=ce&&ce.isTypedArray,fe=le?(oe=le,function(e){return oe(e)}):function(e){return z(e)&&L(e.length)&&!!ie[E(e)]},de=Object.prototype.hasOwnProperty;function he(e,t){var n=Q(e),r=!n&&G(e),i=!n&&!r&&ee(e),o=!n&&!r&&!i&&fe(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=a.length;for(var c in e)!t&&!de.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||re(c,u))||a.push(c);return a}var pe=Object.prototype,ge=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),me=Object.prototype.hasOwnProperty;function ve(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||pe))return ge(e);var t,n,r=[];for(var i in Object(e))me.call(e,i)&&"constructor"!=i&&r.push(i);return r}function ye(e){return I(e)?he(e):ve(e)}function _e(e){if(I(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t,n,r,i,o=K(e);return o?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(o):(n=ye(t=e),r=-1,i=n.length,function(){var e=n[++r];return r<i?{value:t[e],key:e}:null})}function we(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function be(e){return function(t,n,r){if(r=$(r||A),e<=0||!t)return r(null);var i=_e(t),o=!1,s=0,a=!1;function u(e,t){if(s-=1,e)o=!0,r(e);else{if(t===N||o&&s<=0)return o=!0,r(null);a||c()}}function c(){for(a=!0;s<e&&!o;){var t=i();if(null===t)return o=!0,void(s<=0&&r(null));s+=1,n(t.value,t.key,we(u))}a=!1}c()}}function Ce(e,t,n,r){be(t)(e,m(n),r)}function xe(e,t){return function(n,r,i){return e(n,t,r,i)}}function Re(e,t,n){n=$(n||A);var r=0,i=0,o=e.length;function s(e,t){e?n(e):++i!==o&&t!==N||n(null)}for(0===o&&n(null);r<o;r++)t(e[r],r,we(s))}var Se=xe(Ce,1/0),ke=function(e,t,n){(I(e)?Re:Se)(e,m(t),n)};function Te(e){return function(t,n,r){return e(ke,t,m(n),r)}}function De(e,t,n,r){r=r||A,t=t||[];var i=[],o=0,s=m(n);e(t,function(e,t,n){var r=o++;s(e,function(e,t){i[r]=t,n(e)})},function(e){r(e,i)})}var Pe=Te(De),Ee=v(Pe);function Oe(e){return function(t,n,r,i){return e(be(n),t,m(r),i)}}var je=Oe(De),qe=xe(je,1),Fe=v(qe);function Me(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var Le,Ie=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),s=o.length;s--;){var a=o[Le?s:++r];if(!1===t(i[a],a,i))break}return e};function Ne(e,t){return e&&Ie(e,t,ye)}function Ae(e){return e!=e}function $e(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,Ae,n)}var We=function(e,t,r){"function"==typeof t&&(r=t,t=null),r=$(r||A);var i=ye(e).length;if(!i)return r(null);t||(t=i);var o={},s=0,a=!1,u=Object.create(null),c=[],l=[],f={};function d(e,t){c.push(function(){!function(e,t){if(a)return;var i=we(function(t,i){if(s--,arguments.length>2&&(i=n(arguments,1)),t){var c={};Ne(o,function(e,t){c[t]=e}),c[e]=i,a=!0,u=Object.create(null),r(t,c)}else o[e]=i,p(e)});s++;var c=m(t[t.length-1]);t.length>1?c(o,i):c(i)}(e,t)})}function h(){if(0===c.length&&0===s)return r(null,o);for(;c.length&&s<t;){c.shift()()}}function p(e){Me(u[e]||[],function(e){e()}),h()}function g(t){var n=[];return Ne(e,function(e,r){Q(e)&&$e(e,t,0)>=0&&n.push(r)}),n}Ne(e,function(t,n){if(!Q(t))return d(n,[t]),void l.push(n);var r=t.slice(0,t.length-1),i=r.length;if(0===i)return d(n,t),void l.push(n);f[n]=i,Me(r,function(o){if(!e[o])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+o+"` in "+r.join(", "));!function(e,t){var n=u[e];n||(n=u[e]=[]);n.push(t)}(o,function(){0===--i&&d(n,t)})})}),function(){var e,t=0;for(;l.length;)e=l.pop(),t++,Me(g(e),function(e){0==--f[e]&&l.push(e)});if(t!==i)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),h()};function Ke(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var ze="[object Symbol]",Ue=1/0,He=b?b.prototype:void 0,Be=He?He.toString:void 0;function Ve(e){if("string"==typeof e)return e;if(Q(e))return Ke(e,Ve)+"";if(function(e){return"symbol"==typeof e||z(e)&&E(e)==ze}(e))return Be?Be.call(e):"";var t=e+"";return"0"==t&&1/e==-Ue?"-0":t}function Je(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}var Ge=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Qe="[\\ud800-\\udfff]",Ze="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xe="\\ud83c[\\udffb-\\udfff]",Ye="[^\\ud800-\\udfff]",et="(?:\\ud83c[\\udde6-\\uddff]){2}",tt="[\\ud800-\\udbff][\\udc00-\\udfff]",nt="(?:"+Ze+"|"+Xe+")"+"?",rt="[\\ufe0e\\ufe0f]?"+nt+("(?:\\u200d(?:"+[Ye,et,tt].join("|")+")[\\ufe0e\\ufe0f]?"+nt+")*"),it="(?:"+[Ye+Ze+"?",Ze,et,tt,Qe].join("|")+")",ot=RegExp(Xe+"(?="+Xe+")|"+it+rt,"g");function st(e){return function(e){return Ge.test(e)}(e)?function(e){return e.match(ot)||[]}(e):function(e){return e.split("")}(e)}var at=/^\s+|\s+$/g;function ut(e,t,n){var r;if((e=null==(r=e)?"":Ve(r))&&(n||void 0===t))return e.replace(at,"");if(!e||!(t=Ve(t)))return e;var i=st(e),o=st(t);return Je(i,function(e,t){for(var n=-1,r=e.length;++n<r&&$e(t,e[n],0)>-1;);return n}(i,o),function(e,t){for(var n=e.length;n--&&$e(t,e[n],0)>-1;);return n}(i,o)+1).join("")}var ct=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,lt=/,/,ft=/(=.+)?(\s*)$/,dt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function ht(e,t){var n={};Ne(e,function(e,t){var r,i=g(e),o=!i&&1===e.length||i&&0===e.length;if(Q(e))r=e.slice(0,-1),e=e[e.length-1],n[t]=r.concat(r.length>0?s:e);else if(o)n[t]=e;else{if(r=function(e){return e=(e=(e=(e=e.toString().replace(dt,"")).match(ct)[2].replace(" ",""))?e.split(lt):[]).map(function(e){return ut(e.replace(ft,""))})}(e),0===e.length&&!i&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");i||r.pop(),n[t]=r.concat(s)}function s(t,n){var i=Ke(r,function(e){return t[e]});i.push(n),m(e).apply(null,i)}}),We(n,t)}function pt(){this.head=this.tail=null,this.length=0}function gt(e,t){e.length=1,e.head=e.tail=t}function mt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=m(e),i=0,o=[],s=!1;function a(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(f.started=!0,Q(e)||(e=[e]),0===e.length&&f.idle())return l(function(){f.drain()});for(var r=0,i=e.length;r<i;r++){var o={data:e[r],callback:n||A};t?f._tasks.unshift(o):f._tasks.push(o)}s||(s=!0,l(function(){s=!1,f.process()}))}function u(e){return function(t){i-=1;for(var n=0,r=e.length;n<r;n++){var s=e[n],a=$e(o,s,0);0===a?o.shift():a>0&&o.splice(a,1),s.callback.apply(s,arguments),null!=t&&f.error(t,s.data)}i<=f.concurrency-f.buffer&&f.unsaturated(),f.idle()&&f.drain(),f.process()}}var c=!1,f={_tasks:new pt,concurrency:t,payload:n,saturated:A,unsaturated:A,buffer:t/4,empty:A,drain:A,error:A,started:!1,paused:!1,push:function(e,t){a(e,!1,t)},kill:function(){f.drain=A,f._tasks.empty()},unshift:function(e,t){a(e,!0,t)},remove:function(e){f._tasks.remove(e)},process:function(){if(!c){for(c=!0;!f.paused&&i<f.concurrency&&f._tasks.length;){var e=[],t=[],n=f._tasks.length;f.payload&&(n=Math.min(n,f.payload));for(var s=0;s<n;s++){var a=f._tasks.shift();e.push(a),o.push(a),t.push(a.data)}i+=1,0===f._tasks.length&&f.empty(),i===f.concurrency&&f.saturated();var l=we(u(e));r(t,l)}c=!1}},length:function(){return f._tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return f._tasks.length+i===0},pause:function(){f.paused=!0},resume:function(){!1!==f.paused&&(f.paused=!1,l(f.process))}};return f}function vt(e,t){return mt(e,1,t)}pt.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},pt.prototype.empty=function(){for(;this.head;)this.shift();return this},pt.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},pt.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},pt.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):gt(this,e)},pt.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):gt(this,e)},pt.prototype.shift=function(){return this.head&&this.removeLink(this.head)},pt.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},pt.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},pt.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var yt=xe(Ce,1);function _t(e,t,n,r){r=$(r||A);var i=m(n);yt(e,function(e,n,r){i(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})}function wt(){var e=Ke(arguments,m);return function(){var t=n(arguments),r=this,i=t[t.length-1];"function"==typeof i?t.pop():i=A,_t(e,t,function(e,t,i){t.apply(r,e.concat(function(e){var t=n(arguments,1);i(e,t)}))},function(e,t){i.apply(r,[e].concat(t))})}}var bt=function(){return wt.apply(null,n(arguments).reverse())},Ct=Array.prototype.concat,xt=function(e,t,r,i){i=i||A;var o=m(r);je(e,t,function(e,t){o(e,function(e){return e?t(e):t(null,n(arguments,1))})},function(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&(n=Ct.apply(n,t[r]));return i(e,n)})},Rt=xe(xt,1/0),St=xe(xt,1),kt=function(){var e=n(arguments),t=[null].concat(e);return function(){var e=arguments[arguments.length-1];return e.apply(this,t)}};function Tt(e){return e}function Dt(e,t){return function(n,r,i,o){o=o||A;var s,a=!1;n(r,function(n,r,o){i(n,function(r,i){r?o(r):e(i)&&!s?(a=!0,s=t(!0,n),o(null,N)):o()})},function(e){e?o(e):o(null,a?s:t(!1))})}}function Pt(e,t){return t}var Et=Te(Dt(Tt,Pt)),Ot=Oe(Dt(Tt,Pt)),jt=xe(Ot,1);function qt(e){return function(t){var r=n(arguments,1);r.push(function(t){var r=n(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&Me(r,function(t){console[e](t)}))}),m(t).apply(null,r)}}var Ft=qt("dir");function Mt(e,t,r){r=we(r||A);var i=m(e),o=m(t);function s(e){if(e)return r(e);var t=n(arguments,1);t.push(a),o.apply(this,t)}function a(e,t){return e?r(e):t?void i(s):r(null)}a(null,!0)}function Lt(e,t,r){r=we(r||A);var i=m(e),o=function(e){if(e)return r(e);var s=n(arguments,1);if(t.apply(this,s))return i(o);r.apply(null,[null].concat(s))};i(o)}function It(e,t,n){Lt(e,function(){return!t.apply(this,arguments)},n)}function Nt(e,t,n){n=we(n||A);var r=m(t),i=m(e);function o(e){if(e)return n(e);i(s)}function s(e,t){return e?n(e):t?void r(o):n(null)}i(s)}function At(e){return function(t,n,r){return e(t,r)}}function $t(e,t,n){ke(e,At(m(t)),n)}function Wt(e,t,n,r){be(t)(e,At(m(n)),r)}var Kt=xe(Wt,1);function zt(e){return g(e)?e:i(function(t,n){var r=!0;t.push(function(){var e=arguments;r?l(function(){n.apply(null,e)}):n.apply(null,e)}),e.apply(this,t),r=!1})}function Ut(e){return!e}var Ht=Te(Dt(Ut,Ut)),Bt=Oe(Dt(Ut,Ut)),Vt=xe(Bt,1);function Jt(e){return function(t){return null==t?void 0:t[e]}}function Gt(e,t,n,r){var i=new Array(t.length);e(t,function(e,t,r){n(e,function(e,n){i[t]=!!n,r(e)})},function(e){if(e)return r(e);for(var n=[],o=0;o<t.length;o++)i[o]&&n.push(t[o]);r(null,n)})}function Qt(e,t,n,r){var i=[];e(t,function(e,t,r){n(e,function(n,o){n?r(n):(o&&i.push({index:t,value:e}),r())})},function(e){e?r(e):r(null,Ke(i.sort(function(e,t){return e.index-t.index}),Jt("value")))})}function Zt(e,t,n,r){(I(t)?Gt:Qt)(e,t,m(n),r||A)}var Xt=Te(Zt),Yt=Oe(Zt),en=xe(Yt,1);function tn(e,t){var n=we(t||A),r=m(zt(e));!function e(t){if(t)return n(t);r(e)}()}var nn=function(e,t,n,r){r=r||A;var i=m(n);je(e,t,function(e,t){i(e,function(n,r){return n?t(n):t(null,{key:r,val:e})})},function(e,t){for(var n={},i=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var s=t[o].key,a=t[o].val;i.call(n,s)?n[s].push(a):n[s]=[a]}return r(e,n)})},rn=xe(nn,1/0),on=xe(nn,1),sn=qt("log");function an(e,t,n,r){r=$(r||A);var i={},o=m(n);Ce(e,t,function(e,t,n){o(e,t,function(e,r){if(e)return n(e);i[t]=r,n()})},function(e){r(e,i)})}var un=xe(an,1/0),cn=xe(an,1);function ln(e,t){return t in e}function fn(e,t){var r=Object.create(null),o=Object.create(null);t=t||Tt;var s=m(e),a=i(function(e,i){var a=t.apply(null,e);ln(r,a)?l(function(){i.apply(null,r[a])}):ln(o,a)?o[a].push(i):(o[a]=[i],s.apply(null,e.concat(function(){var e=n(arguments);r[a]=e;var t=o[a];delete o[a];for(var i=0,s=t.length;i<s;i++)t[i].apply(null,e)})))});return a.memo=r,a.unmemoized=e,a}var dn=c(a?process.nextTick:s?setImmediate:u);function hn(e,t,r){r=r||A;var i=I(t)?[]:{};e(t,function(e,t,r){m(e)(function(e,o){arguments.length>2&&(o=n(arguments,1)),i[t]=o,r(e)})},function(e){r(e,i)})}function pn(e,t){hn(ke,e,t)}function gn(e,t,n){hn(be(t),e,n)}var mn=function(e,t){var n=m(e);return mt(function(e,t){n(e[0],t)},t,1)},vn=function(e,t){var n=mn(e,t);return n.push=function(e,t,r){if(null==r&&(r=A),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,Q(e)||(e=[e]),0===e.length)return l(function(){n.drain()});t=t||0;for(var i=n._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,s=e.length;o<s;o++){var a={data:e[o],priority:t,callback:r};i?n._tasks.insertBefore(i,a):n._tasks.push(a)}l(n.process)},delete n.unshift,n};function yn(e,t){if(t=$(t||A),!Q(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)m(e[n])(t)}function _n(e,t,r,i){_t(n(e).reverse(),t,r,i)}function wn(e){var t=m(e);return i(function(e,r){return e.push(function(e,t){var i;e?r(null,{error:e}):(i=arguments.length<=2?t:n(arguments,1),r(null,{value:i}))}),t.apply(this,e)})}function bn(e){var t;return Q(e)?t=Ke(e,wn):(t={},Ne(e,function(e,n){t[n]=wn.call(this,e)})),t}function Cn(e,t,n,r){Zt(e,t,function(e,t){n(e,function(e,n){t(e,!n)})},r)}var xn=Te(Cn),Rn=Oe(Cn),Sn=xe(Rn,1);function kn(e){return function(){return e}}function Tn(e,t,n){var r=5,i=0,o={times:r,intervalFunc:kn(i)};if(arguments.length<3&&"function"==typeof e?(n=t||A,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||r,e.intervalFunc="function"==typeof t.interval?t.interval:kn(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||r}}(o,e),n=n||A),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=m(t),a=1;!function e(){s(function(t){t&&a++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(t))?setTimeout(e,o.intervalFunc(a)):n.apply(null,arguments)})}()}var Dn=function(e,t){t||(t=e,e=null);var n=m(t);return i(function(t,r){function i(e){n.apply(null,t.concat(e))}e?Tn(e,i,r):Tn(i,r)})};function Pn(e,t){hn(yt,e,t)}var En=Te(Dt(Boolean,Tt)),On=Oe(Dt(Boolean,Tt)),jn=xe(On,1);function qn(e,t,n){var r=m(t);function i(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}Pe(e,function(e,t){r(e,function(n,r){if(n)return t(n);t(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,Ke(t.sort(i),Jt("value")))})}function Fn(e,t,n){var r=m(e);return i(function(i,o){var s,a=!1;i.push(function(){a||(o.apply(null,arguments),clearTimeout(s))}),s=setTimeout(function(){var t=e.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),a=!0,o(r)},t),r.apply(null,i)})}var Mn=Math.ceil,Ln=Math.max;function In(e,t,n,r){var i=m(n);je(function(e,t,n,r){for(var i=-1,o=Ln(Mn((t-e)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=e,e+=n;return s}(0,e,1),t,i,r)}var Nn=xe(In,1/0),An=xe(In,1);function $n(e,t,n,r){arguments.length<=3&&(r=n,n=t,t=Q(e)?[]:{}),r=$(r||A);var i=m(n);ke(e,function(e,n,r){i(t,e,n,r)},function(e){r(e,t)})}function Wn(e,t){var r,i=null;t=t||A,Kt(e,function(e,t){m(e)(function(e,o){r=arguments.length>2?n(arguments,1):o,i=e,t(!e)})},function(){t(i,r)})}function Kn(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function zn(e,t,r){r=we(r||A);var i=m(t);if(!e())return r(null);var o=function(t){if(t)return r(t);if(e())return i(o);var s=n(arguments,1);r.apply(null,[null].concat(s))};i(o)}function Un(e,t,n){zn(function(){return!e.apply(this,arguments)},t,n)}var Hn=function(e,t){if(t=$(t||A),!Q(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var r=0;function i(t){var n=m(e[r++]);t.push(we(o)),n.apply(null,t)}function o(o){if(o||r===e.length)return t.apply(null,arguments);i(n(arguments,1))}i([])},Bn={apply:r,applyEach:Ee,applyEachSeries:Fe,asyncify:f,auto:We,autoInject:ht,cargo:vt,compose:bt,concat:Rt,concatLimit:xt,concatSeries:St,constant:kt,detect:Et,detectLimit:Ot,detectSeries:jt,dir:Ft,doDuring:Mt,doUntil:It,doWhilst:Lt,during:Nt,each:$t,eachLimit:Wt,eachOf:ke,eachOfLimit:Ce,eachOfSeries:yt,eachSeries:Kt,ensureAsync:zt,every:Ht,everyLimit:Bt,everySeries:Vt,filter:Xt,filterLimit:Yt,filterSeries:en,forever:tn,groupBy:rn,groupByLimit:nn,groupBySeries:on,log:sn,map:Pe,mapLimit:je,mapSeries:qe,mapValues:un,mapValuesLimit:an,mapValuesSeries:cn,memoize:fn,nextTick:dn,parallel:pn,parallelLimit:gn,priorityQueue:vn,queue:mn,race:yn,reduce:_t,reduceRight:_n,reflect:wn,reflectAll:bn,reject:xn,rejectLimit:Rn,rejectSeries:Sn,retry:Tn,retryable:Dn,seq:wt,series:Pn,setImmediate:l,some:En,someLimit:On,someSeries:jn,sortBy:qn,timeout:Fn,times:Nn,timesLimit:In,timesSeries:An,transform:$n,tryEach:Wn,unmemoize:Kn,until:Un,waterfall:Hn,whilst:zn,all:Ht,allLimit:Bt,allSeries:Vt,any:En,anyLimit:On,anySeries:jn,find:Et,findLimit:Ot,findSeries:jt,forEach:$t,forEachSeries:Kt,forEachLimit:Wt,forEachOf:ke,forEachOfSeries:yt,forEachOfLimit:Ce,inject:_t,foldl:_t,foldr:_n,select:Xt,selectLimit:Yt,selectSeries:en,wrapSync:f};t.default=Bn,t.apply=r,t.applyEach=Ee,t.applyEachSeries=Fe,t.asyncify=f,t.auto=We,t.autoInject=ht,t.cargo=vt,t.compose=bt,t.concat=Rt,t.concatLimit=xt,t.concatSeries=St,t.constant=kt,t.detect=Et,t.detectLimit=Ot,t.detectSeries=jt,t.dir=Ft,t.doDuring=Mt,t.doUntil=It,t.doWhilst=Lt,t.during=Nt,t.each=$t,t.eachLimit=Wt,t.eachOf=ke,t.eachOfLimit=Ce,t.eachOfSeries=yt,t.eachSeries=Kt,t.ensureAsync=zt,t.every=Ht,t.everyLimit=Bt,t.everySeries=Vt,t.filter=Xt,t.filterLimit=Yt,t.filterSeries=en,t.forever=tn,t.groupBy=rn,t.groupByLimit=nn,t.groupBySeries=on,t.log=sn,t.map=Pe,t.mapLimit=je,t.mapSeries=qe,t.mapValues=un,t.mapValuesLimit=an,t.mapValuesSeries=cn,t.memoize=fn,t.nextTick=dn,t.parallel=pn,t.parallelLimit=gn,t.priorityQueue=vn,t.queue=mn,t.race=yn,t.reduce=_t,t.reduceRight=_n,t.reflect=wn,t.reflectAll=bn,t.reject=xn,t.rejectLimit=Rn,t.rejectSeries=Sn,t.retry=Tn,t.retryable=Dn,t.seq=wt,t.series=Pn,t.setImmediate=l,t.some=En,t.someLimit=On,t.someSeries=jn,t.sortBy=qn,t.timeout=Fn,t.times=Nn,t.timesLimit=In,t.timesSeries=An,t.transform=$n,t.tryEach=Wn,t.unmemoize=Kn,t.until=Un,t.waterfall=Hn,t.whilst=zn,t.all=Ht,t.allLimit=Bt,t.allSeries=Vt,t.any=En,t.anyLimit=On,t.anySeries=jn,t.find=Et,t.findLimit=Ot,t.findSeries=jt,t.forEach=$t,t.forEachSeries=Kt,t.forEachLimit=Wt,t.forEachOf=ke,t.forEachOfSeries=yt,t.forEachOfLimit=Ce,t.inject=_t,t.foldl=_t,t.foldr=_n,t.select=Xt,t.selectLimit=Yt,t.selectSeries=en,t.wrapSync=f,Object.defineProperty(t,"__esModule",{value:!0})})(t)}).call(this,n(15)(e))},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(0)),s=i(n(45)),a=n(54),u=n(64);function c(){let e=new u.Config,t=o.workspace.getConfiguration("ruby.interpreter").commandPath;t&&(e.pathToRuby=t);let n=o.workspace.getConfiguration("ruby").get("useBundler");null!==n&&(e.useBundler=n);let r=o.workspace.getConfiguration("ruby").pathToBundler;return r&&(e.pathToBundler=r),e}t.registerLinters=function(e){const t=c(),n=new a.LintCollection(t,o.workspace.getConfiguration("ruby").lint,o.workspace.rootPath);function r(e){e&&n.run(e.document)}e.subscriptions.push(n);const i=o.workspace.getConfiguration("ruby").lintDebounceTime,u=s.default(r,i);e.subscriptions.push(o.window.onDidChangeActiveTextEditor(r)),e.subscriptions.push(o.workspace.onDidChangeTextDocument(u)),e.subscriptions.push(o.workspace.onDidChangeConfiguration(()=>{const e=o.window.visibleTextEditors.map(e=>e.document);console.log("Config changed. Should lint:",e.length);const t=c();n.cfg(o.workspace.getConfiguration("ruby").lint,t),e.forEach(e=>n.run(e))})),o.window.visibleTextEditors.forEach(r)}},function(e,t,n){var r=n(16),i=n(46),o=n(48),s="Expected a function",a=Math.max,u=Math.min;e.exports=function(e,t,n){var c,l,f,d,h,p,g=0,m=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError(s);function _(t){var n=c,r=l;return c=l=void 0,g=t,d=e.apply(r,n)}function w(e){var n=e-p;return void 0===p||n>=t||n<0||v&&e-g>=f}function b(){var e=i();if(w(e))return C(e);h=setTimeout(b,function(e){var n=t-(e-p);return v?u(n,f-(e-g)):n}(e))}function C(e){return h=void 0,y&&c?_(e):(c=l=void 0,d)}function x(){var e=i(),n=w(e);if(c=arguments,l=this,p=e,n){if(void 0===h)return function(e){return g=e,h=setTimeout(b,t),m?_(e):d}(p);if(v)return clearTimeout(h),h=setTimeout(b,t),_(p)}return void 0===h&&(h=setTimeout(b,t)),d}return t=o(t)||0,r(n)&&(m=!!n.leading,f=(v="maxWait"in n)?a(o(n.maxWait)||0,t):f,y="trailing"in n?!!n.trailing:y),x.cancel=function(){void 0!==h&&clearTimeout(h),g=0,c=p=l=h=void 0},x.flush=function(){return void 0===h?d:C(i())},x}},function(e,t,n){var r=n(17);e.exports=function(){return r.Date.now()}},function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},function(e,t,n){var r=n(16),i=n(49),o=NaN,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):a.test(e)?o:+e}},function(e,t,n){var r=n(50),i=n(53),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r=n(18),i=n(51),o=n(52),s="[object Null]",a="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:s:u&&u in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(18),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(55)),o=r(n(63));t.LintCollection=class{constructor(e,t,n){this._results={},this._docLinters={},this._globalConfig=e,this._cfg={},this.cfg(t,e),this._rootPath=n}run(e){e&&"ruby"===e.languageId&&(this._docLinters[e.fileName]&&this._docLinters[e.fileName].doc==e||(this._docLinters[e.fileName]=new i.default(e,this._rootPath,this._update.bind(this,e))),this._docLinters[e.fileName].run(this._cfg))}_update(e,t){const n=t.linter;return this._results[n]||(this._results[n]=new o.default(n)),this._results[n].updateForFile(e.uri,t),Promise.resolve()}cfg(e,t){Object.keys(this._cfg).filter(t=>!(t in e&&e[t])).forEach(e=>{this._results[e]&&(this._results[e].dispose(),delete this._results[e]),delete this._cfg[e]});for(let n in e)e[n]&&(this._cfg[n]=Object.assign({},e[n],t))}dispose(){for(let e in this._results)this._results[e].dispose()}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(0);const i=n(56),o=n(4),s=n(5),a=n(8),u={debride:n(57),fasterer:n(58),reek:n(59),rubocop:n(60),"ruby-lint":n(61),ruby:n(62)};class c{constructor(e,t,n){this.doc=e,this.rootPath=t,this.cb=n,this.linting={},this.cfg={}}run(e){this.timer&&clearTimeout(this.timer),this.cfg=e;for(let t in e)this.linting[t]||(this.linting[t]={}),this.linting[t].pend=!0;return this._runLinters()}_copySettings(e,t,n){const r=o.join(n,e);let s,a=t.slice();for(;!s;)try{i.accessSync(o.join(a,e),i.R_OK),s=o.join(a,e)}catch(e){const t=o.dirname(a);if(t===a)break;a=t}if(!s)try{s=o.join(process.env.HOME,(e.startsWith(".")?"":".")+e),i.accessSync(s,i.R_OK)}catch(e){return Promise.resolve()}return i.link(s,r).then(()=>r)}_detectBundledLinter(e,t){let n=this.cfg[e].useBundler;if(void 0!==n)return n;let r=this.cfg[e].pathToBundler||"bundle";try{return a.execSync(`${r} show ${e}`,{cwd:t}),!0}catch(e){return!1}}_getLinterPath(e){const t=r.workspace.rootPath;let n=e.path||"";return n=n.replace("${workspaceRoot}",t)}_getLinterCmd(e,t){const n=e.args.map(e=>e.replace("{path}",t.file||""));let r=this._getLinterPath(e);return 0===r.length&&this._detectBundledLinter(e.exe,t.dir)?(r=this.cfg[e.exe].pathToBundler,n.unshift("exec",e.exe)):r=o.join(r,e.exe+e.ext),[r,n]}_exeLinter(e,t){return new Promise((n,r)=>{const[i,o]=this._getLinterCmd(e,t),s=a.spawn(i,o,{cwd:t.dir,env:process.env});let u="",c="";s[e.responsePath].on("data",e=>u+=e.toString()),e.errorPath&&s[e.errorPath].on("data",e=>c+=e.toString()),s.on("exit",()=>{try{n({linter:e.title||e.exe,lintError:e.processError?e.processError(c):[],result:e.processResult(u)})}catch(e){r(e)}}),s.on("error",e=>r(e)),t.data&&s.stdin.end(t.data)}).catch(t=>({error:t,linter:e.title||e.exe,source:e.exe}))}_runLinters(){const e=[];for(let t in this.linting)t in this.cfg?!this.linting[t].active&&this.linting[t].pend&&(e.push(new u[t](this.cfg[t])),this.linting[t].active=!0,this.linting[t].pend=!1):delete this.linting[t];if(0===e.length)return;const t=this.doc,n=o.dirname(t.fileName),r=e=>this.cb(e).then(()=>{this.linting[e.linter].active=!1,this.linting[e.linter].pend&&this._runLinters(),e.error&&this._runLinters()}),a=e.some(e=>e.tmp),c=t=>e.filter(e=>e.tmp).map(e=>{let o;return(o=e.settings?this._copySettings(e.settings,n,t).then(n=>this._exeLinter(e,{dir:t,file:"1.rb"}).then(e=>(n&&i.unlink(n),e))):this._exeLinter(e,{dir:t,file:"1.rb"})).then(r)}),l=()=>e.filter(e=>!e.tmp).map(e=>this._exeLinter(e,{dir:n||this.rootPath,data:t.getText(),file:t.fileName}).then(r));let f=Promise.resolve();if(a){const e=o.join(s.tmpdir(),"vscode_ruby_lint");f=i.mkdir(e).then(()=>{const n=o.join(e,"1.rb");return i.writeFile(n,t.getText()).then(()=>Promise.all(c(e).concat(l()))).then(()=>i.unlink(n))}).then(()=>i.rmdir(e))}else f.then(()=>Promise.all(l()));return f.catch(e=>console.log("Error linting:",e))}}},function(e,t,n){"use strict";let r=n(9),i={};let o=Object.keys(r);o.filter(e=>!(e+"Sync"in r)).forEach(e=>i[e]=r[e]),o.filter(e=>"function"==typeof r[e]).filter(e=>e+"Sync"in r).forEach(e=>i[e]=function(e){return function(){let t=Array.prototype.slice.call(arguments);return new Promise((n,i)=>{t.push(function(e){if(e)return i(e);if(1===arguments.length)return n();if(2===arguments.length)return n(arguments[1]);let t=Array.prototype.slice.call(arguments);t.shift(),n(t)}),r[e].apply(r,t)})}}(e)),e.exports=i},function(e,t,n){"use strict";const r=n(5).EOL;function i(e){this.exe="debride",this.ext="win32"===process.platform?".bat":"",this.path=e.path,this.responsePath="stdout",this.args=["{path}"],this.temp=!0,e.rails&&this.args.unshift("-r")}i.prototype.processResult=function(e){let t="",n=[];return e.split(r).forEach(e=>{if("These methods MIGHT not be called:"===e)return;if(!e.length)return t="";let r=/\s*(.*?)\s+.*:(\d+)$/.exec(e);if(!r)return t=e;let i=("main"!==t?t+"::":"")+r[1];n.push({location:{line:parseInt(r[2]),column:1,length:1e4},severity:"info",message:`Method ${i} may not be called`})}),n},e.exports=i},function(e,t,n){"use strict";const r=n(5).EOL;function i(e){this.exe="fasterer",this.ext="win32"===n(5).platform()?".bat":"",this.path=e.path,this.responsePath="stdout",this.args=["{path}"],this.temp=!0,this.settings=".fasterer.yml",e.rails&&this.args.unshift("-r")}i.prototype.processResult=function(e){let t=[];return e.split(r).forEach(e=>{let n=/^(.*) Occurred at lines: (.*)/.exec(e);if(n){let e=/(\d+)/g,r=e.exec(n[2]);for(;r;)t.push({location:{line:parseInt(r[1]),column:1,length:1e4},severity:"info",message:n[1]}),r=e.exec(n[2])}}),t},e.exports=i},function(e,t,n){"use strict";function r(e){this.exe="reek",this.ext="win32"===process.platform?".bat":"",this.path=e.path,this.responsePath="stdout",this.errorPath="stderr",this.args=["-f","json","--force-exclusion"]}r.prototype.processResult=function(e){if(!e)return[];let t=JSON.parse(e),n=[];return t.forEach(e=>{e.lines.forEach(t=>{n.push({location:{line:t,column:1,length:1e4},message:e.context+": "+e.message,cop_name:this.exe+":"+e.smell_type,severity:"info"})})}),n};const i=n(5).EOL;r.prototype.processError=function(e){let t=[];return e.split(i).forEach(e=>{if(!e.length)return;let n=/^STDIN:(\d+):(\d+): (?:(\w+): )?(.*)$/.exec(e);if(n)t.push({location:{line:parseInt(n[1]),column:parseInt(n[2]),length:1e4},severity:n[3],message:n[4]});else{let n=/^STDIN:\d+:\s*\^(\~*)\s*$/.exec(e);n&&(t[t.length-1].location.length=(n[1]||"").length+1)}}),t},e.exports=r},function(e,t,n){"use strict";function r(e){this.exe="rubocop",this.ext="win32"===process.platform?".bat":"",this.path=e.path,this.responsePath="stdout",this.args=["-s","{path}","-f","json"],e.forceExclusion&&this.args.push("--force-exclusion"),e.lint&&this.args.push("-l"),e.only&&(this.args=this.args.concat("--only",e.only.join(","))),e.except&&(this.args=this.args.concat("--except",e.except.join(","))),e.rails&&this.args.push("-R"),e.require&&(this.args=this.args.concat("-r",e.require.join(",")))}r.prototype.processResult=function(e){if(""==e)return[];let t=JSON.parse(e);return 0==t.summary.offense_count?[]:(t.files||[{offenses:[]}])[0].offenses},e.exports=r},function(e,t,n){"use strict";function r(e){this.exe="ruby-lint",this.ext="win32"===process.platform?".bat":"",this.path=e.path,this.responsePath="stdout",this.args=["{path}","-p","json"],e.levels&&(this.args=this.args.concat("-l",e.levels.join(","))),e.classes&&(this.args=this.args.concat("-a",e.classes.join(","))),this.settings="ruby-lint.yml",this.temp=!0}r.prototype.processResult=function(e){if(!e)return[];return JSON.parse(e).map(e=>({message:e.message,severity:e.level,location:{line:e.line,column:e.column,length:0}}))},e.exports=r},function(e,t,n){"use strict";const r=n(5).EOL;function i(e){this.responsePath="stderr",this.title="ruby",this.exe="ruby",this.ext="",this.path=e.path,this.args=["-wc"],e.rubyInterpreterPath&&(this.exe=e.rubyInterpreterPath),e.unicode&&this.args.push("-Ku")}i.prototype.processResult=function(e){let t=[],n=[];return e.split(r).forEach(e=>{if(!e.length)return;let r=/^\-:(\d+): (?:(\w+): )?(.*)$/.exec(e);if(r)t.push({location:{line:parseInt(r[1]),column:1,length:1e4},severity:r[2],message:r[3]});else{if(/^\s*\^$/.test(e)){let r=0,i=0;for(;n.length&&r<e.length;)i=r,r=n.shift();if(i<e.length){let n=t[t.length-1];n.location.column=i+1,n.location.length=e.length-i}return}let r=/.*?[^\\]\;/g,i=r.exec(e);for(n=[];i;)n.push(i.index+i[0].length),i=r.exec(e)}}),t},e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});const r=n(0),i={refactor:r.DiagnosticSeverity.Hint,convention:r.DiagnosticSeverity.Information,info:r.DiagnosticSeverity.Information,warning:r.DiagnosticSeverity.Warning,error:r.DiagnosticSeverity.Error,fatal:r.DiagnosticSeverity.Error};class o{constructor(e){this._fileDiagnostics=r.languages.createDiagnosticCollection(e)}updateForFile(e,t){if(this._fileDiagnostics.delete(e),t.error)return void console.log("Linter error:",t.source,t.error);if(!(t.result&&t.result.length||t.lintError&&t.lintError.length))return;let n=t.result.concat(t.lintError).map(e=>{let n=e.location.column+e.location.length,o=new r.Diagnostic(new r.Range(e.location.line-1,e.location.column-1,e.location.line-1,n-1),e.message,i[e.severity]||r.DiagnosticSeverity.Error);return o.source=e.cop_name||t.linter,o});this._fileDiagnostics.set(e,n)}dispose(){this._fileDiagnostics.dispose()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Config=class{constructor(){this.pathToRuby="ruby",this.pathToBundler="bundle",this.useBundler=void 0}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(9)),s=i(n(0)),a=n(14);let u=new Set;function c(e){return new Promise((t,n)=>{o.exists(e,e=>{t(e)})})}t.registerTaskProvider=function(e){return r(this,void 0,void 0,function*(){let e=void 0,t=yield s.workspace.findFiles("**/[rR]akefile{*,.rb}");for(let e=0;e<t.length;e++)u.add(t[e]);let n=s.workspace.createFileSystemWatcher("**/[rR]akefile{*,.rb}");n.onDidChange(()=>e=void 0),n.onDidCreate(t=>{u.add(t),e=void 0}),n.onDidDelete(t=>{u.delete(t),e=void 0});s.workspace.registerTaskProvider("rake",{provideTasks:()=>(e||(e=function(){return r(this,void 0,void 0,function*(){let e=s.workspace.rootPath,t=[];if(!e)return t;if(u.size<1)return t;for(let e in u.keys)if(!(yield c(u[e])))return t;try{let{stdout:n,stderr:r}=yield a.exec("rake -AT",{cwd:e});r&&r.length>0&&a.getOutputChannel().appendLine(r);let i=[];if(n){let e=n.split(/\r{0,1}\n/);for(let t of e){if(0===t.length)continue;let e=/rake\s(.*)#/.exec(t);if(e&&2===e.length){let n=e[1].trim(),r={type:"rake",task:n},o=new s.Task(r,n,"rake",new s.ShellExecution(`rake ${n}`));i.push(o);let a=t.toLowerCase();f(a)?o.group=s.TaskGroup.Build:h(a)&&(o.group=s.TaskGroup.Test)}}}return i}catch(e){let n=a.getOutputChannel();return e.stderr&&n.appendLine(e.stderr),e.stdout&&n.appendLine(e.stdout),n.appendLine("Auto detecting rake tasks failed."),n.show(!0),t}})}()),e),resolveTask(e){}})})};const l=["build","compile","watch"];function f(e){for(let t of l)if(-1!==e.indexOf(t))return!0;return!1}const d=["test"];function h(e){for(let t of d)if(-1!==e.indexOf(t))return!0;return!1}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(4)),o=n(0),s=n(67);let a;t.activate=function(e){const t=e.asAbsolutePath(i.default.join("dist","server","index.js")),n={run:{module:t,transport:s.TransportKind.ipc},debug:{module:t,transport:s.TransportKind.ipc,options:{execArgv:["--nolazy","--inspect=6009"]}}},r={documentSelector:[{scheme:"file",language:"ruby"},{scheme:"untitled",language:"ruby"}],synchronize:{fileEvents:o.workspace.createFileSystemWatcher("**/{.ruby-version,.rvmrc,.tool-versions}")},outputChannel:o.window.createOutputChannel("Ruby Language Server"),middleware:{workspace:{configuration:(e,t,n)=>{if(!e.items)return[];let r=n(e,t,n),i=r[0],s="";for(let t of e.items)t.scopeUri&&(s=t.scopeUri);let u=a.protocol2CodeConverter.asUri(s),c=o.workspace.getWorkspaceFolder(u);if(!c&&o.workspace.workspaceFolders&&(c=o.workspace.workspaceFolders[0]),c){const e=a.code2ProtocolConverter.asUri(c.uri);i.workspaceFolderUri=e}return r}}}};(a=new s.LanguageClient("ruby","Ruby",n,r)).registerProposedFeatures(),e.subscriptions.push(a.start(),o.commands.registerCommand("ruby.showLanguageServerOutputChannel",()=>{a.outputChannel.show()}))},t.deactivate=function(){return a?a.stop():void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),i=n(9),o=n(68),s=n(6),a=n(0),u=n(1),c=n(88),l=n(89),f=n(90),d=n(91),h=n(92),p=n(93),g=n(94),m=n(3),v=n(95);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(6));const y="^1.30";var _,w,b,C,x,R,S;!function(e){e.is=function(e){return m.string(e.command)}}(_||(_={})),function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(w=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){let t=e;return t&&t.kind===w.socket&&m.number(t.port)}}(b||(b={})),function(e){e.is=function(e){return m.string(e.module)}}(C||(C={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(x||(x={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(R||(R={}));t.LanguageClient=class extends s.BaseLanguageClient{constructor(e,t,n,r,i){let o,s,a,u,c;m.string(t)?(o=e,s=t,a=n,u=r,c=!!i):(o=e.toLowerCase(),s=e,a=t,u=n,c=r),void 0===c&&(c=!1),super(o,s,u),this._serverOptions=a,this._forceDebug=c;try{this.checkVersion()}catch(e){throw m.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){let e=o.parse(a.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${a.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!o.satisfies(e,y))throw new Error(`The language client requires VS Code version ${y} but received version ${a.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),v.terminate(e)}catch(e){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){let t,n=this._serverOptions;if(m.func(n))return n().then(t=>{if(s.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(x.is(t))return this._isDetached=!!t.detached,{reader:new u.StreamMessageReader(t.reader),writer:new u.StreamMessageWriter(t.writer)};{let n;return R.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),{reader:new u.StreamMessageReader(n.stdout),writer:new u.StreamMessageWriter(n.stdin)}}});let i=n;return t=i.run||i.debug?"object"==typeof v8debug||this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some(e=>/^--debug=?/.test(e)||/^--debug-brk=?/.test(e)||/^--inspect=?/.test(e)||/^--inspect-brk=?/.test(e))}()?i.debug:i.run:n,this._getServerWorkingDir(t.options).then(i=>{if(C.is(t)&&t.module){let n=t,o=n.transport||w.stdio;if(!n.runtime){let t=void 0;return new Promise((s,a)=>{let c=n.args&&n.args.slice()||[];o===w.ipc?c.push("--node-ipc"):o===w.stdio?c.push("--stdio"):o===w.pipe?(t=u.generateRandomPipeName(),c.push(`--pipe=${t}`)):b.isSocket(o)&&c.push(`--socket=${o.port}`),c.push(`--clientProcessId=${process.pid.toString()}`);let l=n.options||Object.create(null);if(l.execArgv=l.execArgv||[],l.cwd=i,l.silent=!0,o===w.ipc||o===w.stdio){let t=r.fork(n.module,c||[],l);this._serverProcess=t,t.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o===w.ipc?(t.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),s({reader:new u.IPCMessageReader(this._serverProcess),writer:new u.IPCMessageWriter(this._serverProcess)})):s({reader:new u.StreamMessageReader(t.stdout),writer:new u.StreamMessageWriter(t.stdin)})}else o===w.pipe?u.createClientPipeTransport(t).then(t=>{let i=r.fork(n.module,c||[],l);this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),t.onConnected().then(e=>{s({reader:e[0],writer:e[1]})})}):b.isSocket(o)&&u.createClientSocketTransport(o.port).then(t=>{let i=r.fork(n.module,c||[],l);this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),t.onConnected().then(e=>{s({reader:e[0],writer:e[1]})})})})}{let t=[],s=n.options||Object.create(null);s.execArgv&&s.execArgv.forEach(e=>t.push(e)),t.push(n.module),n.args&&n.args.forEach(e=>t.push(e));let a=Object.create(null);a.cwd=i,a.env=function(e){if(!e)return process.env;let t=Object.create(null);return Object.keys(process.env).forEach(e=>t[e]=process.env[e]),Object.keys(e).forEach(n=>t[n]=e[n]),t}(s.env);let c=void 0;if(o===w.ipc?(a.stdio=[null,null,null,"ipc"],t.push("--node-ipc")):o===w.stdio?t.push("--stdio"):o===w.pipe?(c=u.generateRandomPipeName(),t.push(`--pipe=${c}`)):b.isSocket(o)&&t.push(`--socket=${o.port}`),t.push(`--clientProcessId=${process.pid.toString()}`),o===w.ipc||o===w.stdio){let i=r.spawn(n.runtime,t,a);return i&&i.pid?(this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o===w.ipc?(i.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),Promise.resolve({reader:new u.IPCMessageReader(i),writer:new u.IPCMessageWriter(i)})):Promise.resolve({reader:new u.StreamMessageReader(i.stdout),writer:new u.StreamMessageWriter(i.stdin)})):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)}if(o==w.pipe)return u.createClientPipeTransport(c).then(i=>{let o=r.spawn(n.runtime,t,a);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)});if(b.isSocket(o))return u.createClientSocketTransport(o.port).then(i=>{let o=r.spawn(n.runtime,t,a);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)})}}else if(_.is(t)&&t.command){let n=t,o=n.args||[],s=Object.assign({},n.options);s.cwd=s.cwd||i;let a=r.spawn(n.command,o,s);return a&&a.pid?(a.stderr.on("data",t=>this.outputChannel.append(m.string(t)?t:t.toString(e))),this._serverProcess=a,this._isDetached=!!s.detached,Promise.resolve({reader:new u.StreamMessageReader(a.stdout),writer:new u.StreamMessageWriter(a.stdin)})):Promise.reject(`Launching server using command ${n.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(n,null,4)))})}registerProposedFeatures(){this.registerFeatures(S.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new l.ConfigurationFeature(this)),this.registerFeature(new d.TypeDefinitionFeature(this)),this.registerFeature(new f.ImplementationFeature(this)),this.registerFeature(new c.ColorProviderFeature(this)),this.registerFeature(new h.WorkspaceFoldersFeature(this)),this.registerFeature(new p.FoldingRangeFeature(this)),this.registerFeature(new g.DeclarationFeature(this))}_mainGetRootPath(){let e=a.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(e=>{i.lstat(t,(n,r)=>{e(!n&&r.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return a.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new a.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,r=n?a.workspace.getConfiguration(t).get(n,!1):a.workspace.getConfiguration(t);r&&this._client.needsStart()?this._client.start():!r&&this._client.needsStop()&&this._client.stop()}},function(e){e.createAll=function(e){return[]}}(S=t.ProposedFeatures||(t.ProposedFeatures={}))},function(e,t){var n;t=e.exports=V,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,u=a++;s[u]="0|[1-9]\\d*";var c=a++;s[c]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;s[f]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var p=a++;s[p]="(?:"+s[c]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="(?:-?("+s[p]+"(?:\\."+s[p]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,w="v?"+s[f]+s[g]+"?"+s[y]+"?";s[_]="^"+w+"$";var b="[v=\\s]*"+s[d]+s[m]+"?"+s[y]+"?",C=a++;s[C]="^"+b+"$";var x=a++;s[x]="((?:<|>)?=?)";var R=a++;s[R]=s[c]+"|x|X|\\*";var S=a++;s[S]=s[u]+"|x|X|\\*";var k=a++;s[k]="[v=\\s]*("+s[S]+")(?:\\.("+s[S]+")(?:\\.("+s[S]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var T=a++;s[T]="[v=\\s]*("+s[R]+")(?:\\.("+s[R]+")(?:\\.("+s[R]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var D=a++;s[D]="^"+s[x]+"\\s*"+s[k]+"$";var P=a++;s[P]="^"+s[x]+"\\s*"+s[T]+"$";var E=a++;s[E]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var O=a++;s[O]="(?:~>?)";var j=a++;s[j]="(\\s*)"+s[O]+"\\s+",o[j]=new RegExp(s[j],"g");var q=a++;s[q]="^"+s[O]+s[k]+"$";var F=a++;s[F]="^"+s[O]+s[T]+"$";var M=a++;s[M]="(?:\\^)";var L=a++;s[L]="(\\s*)"+s[M]+"\\s+",o[L]=new RegExp(s[L],"g");var I=a++;s[I]="^"+s[M]+s[k]+"$";var N=a++;s[N]="^"+s[M]+s[T]+"$";var A=a++;s[A]="^"+s[x]+"\\s*("+b+")$|^$";var $=a++;s[$]="^"+s[x]+"\\s*("+w+")$|^$";var W=a++;s[W]="(\\s*)"+s[x]+"\\s*("+b+"|"+s[k]+")",o[W]=new RegExp(s[W],"g");var K=a++;s[K]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var z=a++;s[z]="^\\s*("+s[T]+")\\s+-\\s+("+s[T]+")\\s*$";var U=a++;s[U]="(<|>)?=?\\s*\\*";for(var H=0;H<35;H++)n(H,s[H]),o[H]||(o[H]=new RegExp(s[H]));function B(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[C]:o[_]).test(e))return null;try{return new V(e,t)}catch(e){return null}}function V(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof V))return new V(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[C]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=B,t.valid=function(e,t){var n=B(e,t);return n?n.version:null},t.clean=function(e,t){var n=B(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=V,V.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},V.prototype.toString=function(){return this.version},V.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof V||(e=new V(e,this.options)),this.compareMain(e)||this.comparePre(e)},V.prototype.compareMain=function(e){return e instanceof V||(e=new V(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},V.prototype.comparePre=function(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return G(r,i)}while(++t)},V.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new V(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var n=B(e),r=B(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=G;var J=/^[0-9]+$/;function G(e,t){var n=J.test(e),r=J.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Q(e,t,n){return new V(e,n).compare(new V(t,n))}function Z(e,t,n){return Q(e,t,n)>0}function X(e,t,n){return Q(e,t,n)<0}function Y(e,t,n){return 0===Q(e,t,n)}function ee(e,t,n){return 0!==Q(e,t,n)}function te(e,t,n){return Q(e,t,n)>=0}function ne(e,t,n){return Q(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Y(e,n,r);case"!=":return ee(e,n,r);case">":return Z(e,n,r);case">=":return te(e,n,r);case"<":return X(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new V(e,t).major},t.minor=function(e,t){return new V(e,t).minor},t.patch=function(e,t){return new V(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,n){return Q(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=Z,t.lt=X,t.eq=Y,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=ie;var oe={};function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,n,r,i,o,s,a,u,c,l,f,d){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(u)?"":ae(c)?"<"+(+u+1)+".0.0":ae(l)?"<"+u+"."+(+c+1)+".0":f?"<="+u+"."+c+"."+l+"-"+f:"<="+a)).trim()}function ce(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function fe(e,t,n,r){var i,o,s,a,u;switch(e=new V(e,r),t=new se(t,r),n){case">":i=Z,o=ne,s=X,a=">",u=">=";break;case"<":i=X,o=te,s=Z,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],f=null,d=null;if(l.forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),f=f||e,d=d||e,i(e.semver,f.semver,r)?f=e:s(e.semver,d.semver,r)&&(d=e)}),f.operator===a||f.operator===u)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===u&&s(e,d.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[A]:o[$],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new V(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new V(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||u},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[z]:o[K];e=e.replace(r,ue),n("hyphen replace",e),e=e.replace(o[W],"$1$2$3"),n("comparator trim",e,o[W]),e=(e=(e=e.replace(o[j],"$1~")).replace(o[L],"$1^")).split(/\s+/).join(" ");var i=t?o[A]:o[$],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[N]:o[I];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t.loose?o[F]:o[q];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t.loose?o[P]:o[D];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var u=ae(i),c=u||ae(o),l=c||ae(s);return"="===r&&l&&(r=""),u?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(c&&(o=0),s=0,">"===r?(r=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",c?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[U],"")}(e,t),n("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,this.options)},this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new V(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new V(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new V(r=e,n)))}),r},t.minVersion=function(e,t){e=new se(e,t);var n=new V("0.0.0");if(e.test(n))return n;if(n=new V("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach(function(e){var t=new V(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!Z(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return fe(e,t,"<",n)},t.gtr=function(e,t,n){return fe(e,t,">",n)},t.outside=fe,t.prerelease=function(e,t){var n=B(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof V)return e;if("string"!=typeof e)return null;var t=e.match(o[E]);if(null==t)return null;return B(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=s;t.RequestType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.RequestType=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.RequestType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.RequestType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.RequestType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.RequestType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.RequestType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.RequestType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.RequestType9=class extends s{constructor(e){super(e,9),this._=void 0}};t.NotificationType=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.NotificationType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.NotificationType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.NotificationType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.NotificationType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.NotificationType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.NotificationType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.NotificationType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.NotificationType9=class extends s{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(10);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze(function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}});class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this.cancel()}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(5),o=n(73),s=n(19),a=n(12),u=n(13);t.generateRandomPipeName=function(){const e=o.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(i.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{let c=s.createServer(e=>{c.close(),n([new a.SocketMessageReader(e,t),new u.SocketMessageWriter(e,t)])});c.on("error",o),c.listen(e,()=>{c.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=s.createConnection(e);return[new a.SocketMessageReader(n,t),new u.SocketMessageWriter(n,t)]}},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(19),i=n(12),o=n(13);t.createClientSocketTransport=function(e,t="utf-8"){let n,s=new Promise((e,t)=>{n=e});return new Promise((a,u)=>{let c=r.createServer(e=>{c.close(),n([new i.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])});c.on("error",u),c.listen(e,"127.0.0.1",()=>{c.removeListener("error",u),a({onConnected:()=>s})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(n,t),new o.SocketMessageWriter(n,t)]}},function(e,t,n){"use strict";var r,i,o,s,a,u,c,l,f,d,h,p,g,m,v,y,_,w,b;n.r(t),n.d(t,"Position",function(){return r}),n.d(t,"Range",function(){return i}),n.d(t,"Location",function(){return o}),n.d(t,"LocationLink",function(){return s}),n.d(t,"Color",function(){return a}),n.d(t,"ColorInformation",function(){return u}),n.d(t,"ColorPresentation",function(){return c}),n.d(t,"FoldingRangeKind",function(){return l}),n.d(t,"FoldingRange",function(){return f}),n.d(t,"DiagnosticRelatedInformation",function(){return d}),n.d(t,"DiagnosticSeverity",function(){return h}),n.d(t,"Diagnostic",function(){return p}),n.d(t,"Command",function(){return g}),n.d(t,"TextEdit",function(){return m}),n.d(t,"TextDocumentEdit",function(){return v}),n.d(t,"CreateFile",function(){return y}),n.d(t,"RenameFile",function(){return _}),n.d(t,"DeleteFile",function(){return w}),n.d(t,"WorkspaceEdit",function(){return b}),n.d(t,"WorkspaceChange",function(){return $}),n.d(t,"TextDocumentIdentifier",function(){return C}),n.d(t,"VersionedTextDocumentIdentifier",function(){return x}),n.d(t,"TextDocumentItem",function(){return R}),n.d(t,"MarkupKind",function(){return S}),n.d(t,"MarkupContent",function(){return k}),n.d(t,"CompletionItemKind",function(){return T}),n.d(t,"InsertTextFormat",function(){return D}),n.d(t,"CompletionItem",function(){return P}),n.d(t,"CompletionList",function(){return E}),n.d(t,"MarkedString",function(){return O}),n.d(t,"Hover",function(){return j}),n.d(t,"ParameterInformation",function(){return q}),n.d(t,"SignatureInformation",function(){return F}),n.d(t,"DocumentHighlightKind",function(){return M}),n.d(t,"DocumentHighlight",function(){return L}),n.d(t,"SymbolKind",function(){return I}),n.d(t,"SymbolInformation",function(){return N}),n.d(t,"DocumentSymbol",function(){return B}),n.d(t,"CodeActionKind",function(){return W}),n.d(t,"CodeActionContext",function(){return K}),n.d(t,"CodeAction",function(){return z}),n.d(t,"CodeLens",function(){return U}),n.d(t,"FormattingOptions",function(){return H}),n.d(t,"DocumentLink",function(){return V}),n.d(t,"EOL",function(){return Q}),n.d(t,"TextDocument",function(){return J}),n.d(t,"TextDocumentSaveReason",function(){return G}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return Z.objectLiteral(t)&&Z.number(t.line)&&Z.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,i){if(Z.number(e)&&Z.number(t)&&Z.number(n)&&Z.number(i))return{start:r.create(e,t),end:r.create(n,i)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+i+"]")},e.is=function(e){var t=e;return Z.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(i||(i={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Z.defined(t)&&i.is(t.range)&&(Z.string(t.uri)||Z.undefined(t.uri))}}(o||(o={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return Z.defined(t)&&i.is(t.targetRange)&&Z.string(t.targetUri)&&(i.is(t.targetSelectionRange)||Z.undefined(t.targetSelectionRange))&&(i.is(t.originSelectionRange)||Z.undefined(t.originSelectionRange))}}(s||(s={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return Z.number(t.red)&&Z.number(t.green)&&Z.number(t.blue)&&Z.number(t.alpha)}}(a||(a={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return i.is(t.range)&&a.is(t.color)}}(u||(u={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Z.string(t.label)&&(Z.undefined(t.textEdit)||m.is(t))&&(Z.undefined(t.additionalTextEdits)||Z.typedArray(t.additionalTextEdits,m.is))}}(c||(c={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(l||(l={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return Z.defined(n)&&(o.startCharacter=n),Z.defined(r)&&(o.endCharacter=r),Z.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return Z.number(t.startLine)&&Z.number(t.startLine)&&(Z.undefined(t.startCharacter)||Z.number(t.startCharacter))&&(Z.undefined(t.endCharacter)||Z.number(t.endCharacter))&&(Z.undefined(t.kind)||Z.string(t.kind))}}(f||(f={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Z.defined(t)&&o.is(t.location)&&Z.string(t.message)}}(d||(d={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(h||(h={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return Z.defined(n)&&(s.severity=n),Z.defined(r)&&(s.code=r),Z.defined(i)&&(s.source=i),Z.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return Z.defined(t)&&i.is(t.range)&&Z.string(t.message)&&(Z.number(t.severity)||Z.undefined(t.severity))&&(Z.number(t.code)||Z.string(t.code)||Z.undefined(t.code))&&(Z.string(t.source)||Z.undefined(t.source))&&(Z.undefined(t.relatedInformation)||Z.typedArray(t.relatedInformation,d.is))}}(p||(p={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return Z.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.title)&&Z.string(t.command)}}(g||(g={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Z.objectLiteral(t)&&Z.string(t.newText)&&i.is(t.range)}}(m||(m={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Z.defined(t)&&x.is(t.textDocument)&&Array.isArray(t.edits)}}(v||(v={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&Z.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Z.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Z.boolean(t.options.ignoreIfExists)))}}(y||(y={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Z.string(t.oldUri)&&Z.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Z.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Z.boolean(t.options.ignoreIfExists)))}}(_||(_={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Z.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Z.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Z.boolean(t.options.ignoreIfNotExists)))}}(w||(w={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every(function(e){return Z.string(e.kind)?y.is(e)||_.is(e)||w.is(e):v.is(e)}))}}(b||(b={}));var C,x,R,S,k,T,D,P,E,O,j,q,F,M,L,I,N,A=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(m.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(m.replace(e,t))},e.prototype.delete=function(e){this.edits.push(m.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),$=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach(function(e){if(v.is(e)){var n=new A(e.edits);t._textEditChanges[e.textDocument.uri]=n}}):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new A(e.changes[n]);t._textEditChanges[n]=r}))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(x.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new A(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new A(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(y.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(_.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(w.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.uri)}}(C||(C={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.uri)&&(null===t.version||Z.number(t.version))}}(x||(x={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.uri)&&Z.string(t.languageId)&&Z.number(t.version)&&Z.string(t.text)}}(R||(R={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(S||(S={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(S||(S={})),function(e){e.is=function(e){var t=e;return Z.objectLiteral(e)&&S.is(t.kind)&&Z.string(t.value)}}(k||(k={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(T||(T={})),function(e){e.PlainText=1,e.Snippet=2}(D||(D={})),function(e){e.create=function(e){return{label:e}}}(P||(P={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(E||(E={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Z.string(t)||Z.objectLiteral(t)&&Z.string(t.language)&&Z.string(t.value)}}(O||(O={})),function(e){e.is=function(e){var t=e;return!!t&&Z.objectLiteral(t)&&(k.is(t.contents)||O.is(t.contents)||Z.typedArray(t.contents,O.is))&&(void 0===e.range||i.is(e.range))}}(j||(j={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(q||(q={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return Z.defined(t)&&(i.documentation=t),Z.defined(n)?i.parameters=n:i.parameters=[],i}}(F||(F={})),function(e){e.Text=1,e.Read=2,e.Write=3}(M||(M={})),function(e){e.create=function(e,t){var n={range:e};return Z.number(t)&&(n.kind=t),n}}(L||(L={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(I||(I={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(N||(N={}));var W,K,z,U,H,B=function(){};!function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&Z.string(t.name)&&Z.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(void 0===t.detail||Z.string(t.detail))&&(void 0===t.deprecated||Z.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(B||(B={})),function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(W||(W={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return Z.defined(t)&&Z.typedArray(t.diagnostics,p.is)&&(void 0===t.only||Z.typedArray(t.only,Z.string))}}(K||(K={})),function(e){e.create=function(e,t,n){var r={title:e};return g.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&Z.string(t.title)&&(void 0===t.diagnostics||Z.typedArray(t.diagnostics,p.is))&&(void 0===t.kind||Z.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||g.is(t.command))&&(void 0===t.edit||b.is(t.edit))}}(z||(z={})),function(e){e.create=function(e,t){var n={range:e};return Z.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Z.defined(t)&&i.is(t.range)&&(Z.undefined(t.command)||g.is(t.command))}}(U||(U={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Z.defined(t)&&Z.number(t.tabSize)&&Z.boolean(t.insertSpaces)}}(H||(H={}));var V=function(){};!function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Z.defined(t)&&i.is(t.range)&&(Z.undefined(t.target)||Z.string(t.target))}}(V||(V={}));var J,G,Q=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new X(e,t,n,r)},e.is=function(e){var t=e;return!!(Z.defined(t)&&Z.string(t.uri)&&(Z.undefined(t.languageId)||Z.string(t.languageId))&&Z.number(t.lineCount)&&Z.func(t.getText)&&Z.func(t.positionAt)&&Z.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0;var i=t.slice(0,r);var o=t.slice(r);e(i,n);e(o,n);var s=0;var a=0;var u=0;for(;s<i.length&&a<o.length;){var c=n(i[s],o[a]);t[u++]=c<=0?i[s++]:o[a++]}for(;s<i.length;)t[u++]=i[s++];for(;a<o.length;)t[u++]=o[a++];return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),u=e.offsetAt(s.range.end);if(!(u<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(u,n.length),i=a}return n}}(J||(J={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(G||(G={}));var Z,X=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return r.create(0,e);for(;n<i;){var o=Math.floor((n+i)/2);t[o]>e?i=o:n=o+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Z||(Z={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(77),i=n(2),o=n(78);t.ImplementationRequest=o.ImplementationRequest;const s=n(79);t.TypeDefinitionRequest=s.TypeDefinitionRequest;const a=n(80);t.WorkspaceFoldersRequest=a.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=a.DidChangeWorkspaceFoldersNotification;const u=n(81);t.ConfigurationRequest=u.ConfigurationRequest;const c=n(82);t.DocumentColorRequest=c.DocumentColorRequest,t.ColorPresentationRequest=c.ColorPresentationRequest;const l=n(83);t.FoldingRangeRequest=l.FoldingRangeRequest;const f=n(84);t.DeclarationRequest=f.DeclarationRequest,function(e){e.is=function(e){let t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(t.DocumentFilter||(t.DocumentFilter={})),function(e){e.type=new i.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new i.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new i.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new i.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new i.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new i.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new i.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new i.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new i.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new i.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new i.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.type=new i.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new i.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new i.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new i.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new i.RequestType("textDocument/completion")}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new i.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.type=new i.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new i.RequestType("textDocument/definition")}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new i.RequestType("textDocument/references")}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new i.RequestType("textDocument/documentHighlight")}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new i.RequestType("textDocument/documentSymbol")}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new i.RequestType("workspace/symbol")}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new i.RequestType("textDocument/codeAction")}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new i.RequestType("textDocument/codeLens")}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new i.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new i.RequestType("textDocument/prepareRename")}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new i.RequestType("textDocument/documentLink")}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new i.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new i.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new i.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&i(e.then)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);!function(e){e.type=new r.RequestType("textDocument/implementation")}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);!function(e){e.type=new r.RequestType("textDocument/typeDefinition")}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);!function(e){e.type=new r.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);!function(e){e.type=new r.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);!function(e){e.type=new r.RequestType("textDocument/documentColor")}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new r.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new r.RequestType("textDocument/foldingRange")}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);!function(e){e.type=new r.RequestType("textDocument/declaration")}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(1),o=n(3),s=n(20),a=n(21),u=n(22);t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function c(e){return{uri:t(e.uri)}}function l(e){return{uri:t(e.uri),version:e.version}}function f(e){switch(e){case r.TextDocumentSaveReason.Manual:return i.TextDocumentSaveReason.Manual;case r.TextDocumentSaveReason.AfterDelay:return i.TextDocumentSaveReason.AfterDelay;case r.TextDocumentSaveReason.FocusOut:return i.TextDocumentSaveReason.FocusOut}return i.TextDocumentSaveReason.Manual}function d(e){switch(e){case r.CompletionTriggerKind.TriggerCharacter:return i.CompletionTriggerKind.TriggerCharacter;case r.CompletionTriggerKind.TriggerForIncompleteCompletions:return i.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return i.CompletionTriggerKind.Invoked}}function h(e){return{line:e.line,character:e.character}}function p(e){if(void 0!==e)return null===e?null:{line:e.line,character:e.character}}function g(e){return null==e?e:{start:p(e.start),end:p(e.end)}}function m(e){switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}}function v(e){let t=i.Diagnostic.create(g(e.range),e.message);return o.number(e.severity)&&(t.severity=m(e.severity)),(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),t}function y(e){return null==e?e:e.map(v)}function _(e){return{range:g(e.range),newText:e.newText}}function w(e){let t=i.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:n,asTextDocumentIdentifier:c,asVersionedTextDocumentIdentifier:l,asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e)){return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]}}if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map(e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}})}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:c(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:l(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:c(e.document),reason:f(e.reason)}},asTextDocumentPositionParams:function(e,t){return{textDocument:c(e),position:h(t)}},asCompletionParams:function(e,t,n){return{textDocument:c(e),position:h(t),context:{triggerKind:d(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asWorkerPosition:h,asRange:g,asPosition:p,asDiagnosticSeverity:m,asDiagnostic:v,asDiagnostics:y,asCompletionItem:function(e){let t={label:e.label},n=e instanceof s.default?e:void 0;var a,u;return e.detail&&(t.detail=e.detail),e.documentation&&(n&&"$string"!==n.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case i.MarkupKind.PlainText:return{kind:e,value:t};case i.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(n.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let n,o=i.InsertTextFormat.PlainText,s=void 0;t.textEdit?(n=t.textEdit.newText,s=g(t.textEdit.range)):t.insertText instanceof r.SnippetString?(o=i.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText;t.range&&(s=g(t.range));e.insertTextFormat=o,t.fromEdit&&n&&s?e.textEdit={newText:n,range:s}:e.insertText=n}(t,e),o.number(e.kind)&&(t.kind=(a=e.kind,void 0!==(u=n&&n.originalItemKind)?u:a+1)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=function(e){if(null==e)return e;return e.map(_)}(e.additionalTextEdits)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=w(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),n&&(void 0!==n.data&&(t.data=n.data),!0!==n.deprecated&&!1!==n.deprecated||(t.deprecated=n.deprecated)),t},asTextEdit:_,asReferenceParams:function(e,t,n){return{textDocument:c(e),position:h(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeActionContext:function(e){return null==e?e:i.CodeActionContext.create(y(e.diagnostics),o.string(e.only)?[e.only]:void 0)},asCommand:w,asCodeLens:function(e){let t=i.CodeLens.create(g(e.range));return e.command&&(t.command=w(e.command)),e instanceof a.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}},asDocumentSymbolParams:function(e){return{textDocument:c(e)}},asCodeLensParams:function(e){return{textDocument:c(e)}},asDocumentLink:function(e){let t=i.DocumentLink.create(g(e.range));e.target&&(t.target=n(e.target));let r=e instanceof u.default?e:void 0;return r&&r.data&&(t.data=r.data),t},asDocumentLinkParams:function(e){return{textDocument:c(e)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(1),o=n(3),s=n(20),a=n(21),u=n(22);var c;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(c||(c={})),t.createConverter=function(e){const t=e||(e=>r.Uri.parse(e));function n(e){return t(e)}function l(e){return e.map(f)}function f(e){let t=new r.Diagnostic(p(e.range),e.message,g(e.severity));return(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(d)),t}function d(e){return new r.DiagnosticRelatedInformation(R(e.location),e.message)}function h(e){if(e)return new r.Position(e.line,e.character)}function p(e){if(e)return new r.Range(h(e.start),h(e.end))}function g(e){if(null==e)return r.DiagnosticSeverity.Error;switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}return r.DiagnosticSeverity.Error}function m(e){if(o.string(e))return e;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function v(e){let t=new s.default(e.label);e.detail&&(t.detail=e.detail),e.documentation&&(t.documentation=m(e.documentation),t.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(t.filterText=e.filterText);let n=function(e){return e.textEdit?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.textEdit.newText),range:p(e.textEdit.range),fromEdit:!0}:{text:e.textEdit.newText,range:p(e.textEdit.range),fromEdit:!0}:e.insertText?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(n&&(t.insertText=n.text,t.range=n.range,t.fromEdit=n.fromEdit),o.number(e.kind)){let[n,o]=(a=e.kind,i.CompletionItemKind.Text<=a&&a<=i.CompletionItemKind.TypeParameter?[a-1,void 0]:[r.CompletionItemKind.Text,a]);t.kind=n,o&&(t.originalItemKind=o)}var a;return e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=_(e.additionalTextEdits)),o.stringArray(e.commitCharacters)&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=j(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(t.deprecated=e.deprecated),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),void 0!==e.data&&(t.data=e.data),t}function y(e){if(e)return new r.TextEdit(p(e.range),e.newText)}function _(e){if(e)return e.map(y)}function w(e){return e.map(b)}function b(e){let t=new r.SignatureInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),e.parameters&&(t.parameters=C(e.parameters)),t}function C(e){return e.map(x)}function x(e){let t=new r.ParameterInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),t}function R(e){if(e)return new r.Location(t(e.uri),p(e.range))}function S(e){if(e)return{targetUri:t(e.targetUri),targetRange:p(e.targetSelectionRange),originSelectionRange:p(e.originSelectionRange),targetSelectionRange:p(e.targetSelectionRange)}}function k(e){if(e){if(o.array(e)){if(0===e.length)return[];if(i.LocationLink.is(e[0])){return e.map(e=>S(e))}return e.map(e=>R(e))}return i.LocationLink.is(e)?[S(e)]:R(e)}}function T(e){let t=new r.DocumentHighlight(p(e.range));return o.number(e.kind)&&(t.kind=D(e.kind)),t}function D(e){switch(e){case i.DocumentHighlightKind.Text:return r.DocumentHighlightKind.Text;case i.DocumentHighlightKind.Read:return r.DocumentHighlightKind.Read;case i.DocumentHighlightKind.Write:return r.DocumentHighlightKind.Write}return r.DocumentHighlightKind.Text}function P(e){return e<=i.SymbolKind.TypeParameter?e-1:r.SymbolKind.Property}function E(e,n){let i=new r.SymbolInformation(e.name,P(e.kind),p(e.location.range),e.location.uri?t(e.location.uri):n);return e.containerName&&(i.containerName=e.containerName),i}function O(e){let t=new r.DocumentSymbol(e.name,e.detail||"",P(e.kind),p(e.range),p(e.selectionRange));if(void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(O(t));t.children=n}return t}function j(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const q=new Map;function F(e){if(null==e)return;let t=q.get(e);if(t)return t;let n=e.split(".");t=r.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}function M(e){if(!e)return;let t=new a.default(p(e.range));return e.command&&(t.command=j(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function L(e){if(!e)return;let n=new r.WorkspaceEdit;return e.documentChanges?e.documentChanges.forEach(e=>{i.CreateFile.is(e)?n.createFile(t(e.uri),e.options):i.RenameFile.is(e)?n.renameFile(t(e.oldUri),t(e.newUri),e.options):i.DeleteFile.is(e)?n.deleteFile(t(e.uri),e.options):i.TextDocumentEdit.is(e)?n.set(t(e.textDocument.uri),_(e.edits)):console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`)}):e.changes&&Object.keys(e.changes).forEach(r=>{n.set(t(r),_(e.changes[r]))}),n}function I(e){let t=p(e.range),r=e.target?n(e.target):void 0,i=new u.default(t,r);return void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function N(e){return new r.Color(e.red,e.green,e.blue,e.alpha)}function A(e){return new r.ColorInformation(p(e.range),N(e.color))}function $(e){let t=new r.ColorPresentation(e.label);return t.additionalTextEdits=_(e.additionalTextEdits),e.textEdit&&(t.textEdit=y(e.textEdit)),t}function W(e){if(e)switch(e){case i.FoldingRangeKind.Comment:return r.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return r.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return r.FoldingRangeKind.Region}}function K(e){return new r.FoldingRange(e.startLine,e.endLine,W(e.kind))}return q.set("",r.CodeActionKind.Empty),q.set(i.CodeActionKind.QuickFix,r.CodeActionKind.QuickFix),q.set(i.CodeActionKind.Refactor,r.CodeActionKind.Refactor),q.set(i.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorExtract),q.set(i.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorInline),q.set(i.CodeActionKind.RefactorRewrite,r.CodeActionKind.RefactorRewrite),q.set(i.CodeActionKind.Source,r.CodeActionKind.Source),q.set(i.CodeActionKind.SourceOrganizeImports,r.CodeActionKind.SourceOrganizeImports),{asUri:n,asDiagnostics:l,asDiagnostic:f,asRange:p,asPosition:h,asDiagnosticSeverity:g,asHover:function(e){if(e)return new r.Hover(function(e){if(o.string(e))return new r.MarkdownString(e);if(c.is(e)){return(new r.MarkdownString).appendCodeblock(e.value,e.language)}if(Array.isArray(e)){let t=[];for(let n of e){let e=new r.MarkdownString;c.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}{let t;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return(t=new r.MarkdownString).appendText(e.value),t;default:return(t=new r.MarkdownString).appendText(`Unsupported Markup content received. Kind is: ${e.kind}`),t}}}(e.contents),p(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e)){return e.map(v)}let t=e;return new r.CompletionList(t.items.map(v),t.isIncomplete)},asCompletionItem:v,asTextEdit:y,asTextEdits:_,asSignatureHelp:function(e){if(!e)return;let t=new r.SignatureHelp;return o.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,o.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=w(e.signatures)),t},asSignatureInformations:w,asSignatureInformation:b,asParameterInformations:C,asParameterInformation:x,asDeclarationResult:function(e){if(e)return k(e)},asDefinitionResult:function(e){if(e)return k(e)},asLocation:R,asReferences:function(e){if(e)return e.map(e=>R(e))},asDocumentHighlights:function(e){if(e)return e.map(T)},asDocumentHighlight:T,asDocumentHighlightKind:D,asSymbolInformations:function(e,t){if(e)return e.map(e=>E(e,t))},asSymbolInformation:E,asDocumentSymbols:function(e){if(null!=e)return e.map(O)},asDocumentSymbol:O,asCommand:j,asCommands:function(e){if(e)return e.map(j)},asCodeAction:function(e){if(null==e)return;let t=new r.CodeAction(e.title);return void 0!==e.kind&&(t.kind=F(e.kind)),e.diagnostics&&(t.diagnostics=l(e.diagnostics)),e.edit&&(t.edit=L(e.edit)),e.command&&(t.command=j(e.command)),t},asCodeActionKind:F,asCodeActionKinds:function(e){if(null!=e)return e.map(e=>F(e))},asCodeLens:M,asCodeLenses:function(e){if(e)return e.map(e=>M(e))},asWorkspaceEdit:L,asDocumentLink:I,asDocumentLinks:function(e){if(e)return e.map(I)},asFoldingRangeKind:W,asFoldingRange:K,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(K)},asColor:N,asColorInformation:A,asColorInformations:function(e){if(Array.isArray(e))return e.map(A)},asColorPresentation:$,asColorPresentations:function(e){if(Array.isArray(e))return e.map($)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e})),(t>=0||void 0===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(3),o=n(0),s=n(1),a=n(6);function u(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.ColorProviderFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.DocumentColorRequest.type)}fillClientCapabilities(e){u(u(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;const n=e.colorProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={color:e,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(n.document),range:t.code2ProtocolConverter.asRange(n.range)};return t.sendRequest(s.ColorPresentationRequest.type,i,r).then(this.asColorPresentations.bind(this),e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null)))},r=(e,n)=>{const r={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.DocumentColorRequest.type,r,n).then(this.asColorInformations.bind(this),e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null)))},i=t.clientOptions.middleware;return o.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(e,t,r)=>i.provideColorPresentations?i.provideColorPresentations(e,t,r,n):n(e,t,r),provideDocumentColors:(e,t)=>i.provideDocumentColors?i.provideDocumentColors(e,t,r):r(e,t)})}asColor(e){return new o.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(e=>new o.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(e=>{let t=new o.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t}):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(1);t.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(i.ConfigurationRequest.type,(t,n)=>{let r=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},i=e.clientOptions.middleware.workspace;return i&&i.configuration?i.configuration(t,n,r):r(t)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(-1===i)n=r.workspace.getConfiguration(void 0,e).get(t);else{let e=r.workspace.getConfiguration(t.substr(0,i));e&&(n=e.get(t.substr(i+1)))}}else{let t=r.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=t.get(e))}return n||null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(3),o=n(0),s=n(1),a=n(6);function u(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.ImplementationFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.ImplementationRequest.type)}fillClientCapabilities(e){let t=u(u(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.implementationProvider)if(!0===e.implementationProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.implementationProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(s.ImplementationRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(e,t,i)=>r.provideImplementation?r.provideImplementation(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(3),o=n(0),s=n(1),a=n(6);function u(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.TypeDefinitionFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.TypeDefinitionRequest.type)}fillClientCapabilities(e){u(u(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=u(u(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.typeDefinitionProvider)if(!0===e.typeDefinitionProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.typeDefinitionProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(s.TypeDefinitionRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(e,t,i)=>r.provideTypeDefinition?r.provideTypeDefinition(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(0),o=n(1);function s(e,t){if(void 0!==e)return e[t]}t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=i.workspace.workspaceFolders;e.workspaceFolders=void 0===t?null:t.map(e=>this.asProtocol(e))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,e=>{let n=()=>{let e=i.workspace.workspaceFolders;return void 0===e?null:e.map(e=>this.asProtocol(e))},r=t.clientOptions.middleware.workspace;return r&&r.workspaceFolders?r.workspaceFolders(e,n):n()});let n,a=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof a?n=a:!0===a&&(n=r.generateUuid()),n&&this.register(this.messages,{id:n,registerOptions:void 0})}register(e,t){let n=t.id,r=this._client,s=i.workspace.onDidChangeWorkspaceFolders(e=>{let t=e=>{let t={event:{added:e.added.map(e=>this.asProtocol(e)),removed:e.removed.map(e=>this.asProtocol(e))}};this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,t)},n=r.clientOptions.middleware.workspace;n&&n.didChangeWorkspaceFolders?n.didChangeWorkspaceFolders(e,t):t(e)});this._listeners.set(n,s)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(3),o=n(0),s=n(1),a=n(6);function u(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.FoldingRangeFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=u(u(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;const n=e.foldingRangeProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.FoldingRangeRequest.type,i,r).then(this.asFoldingRanges.bind(this),e=>(t.logFailedRequest(s.FoldingRangeRequest.type,e),Promise.resolve(null)))},r=t.clientOptions.middleware;return o.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges:(e,t,i)=>r.provideFoldingRanges?r.provideFoldingRanges(e,t,i,n):n(e,0,i)})}asFoldingRangeKind(e){if(e)switch(e){case s.FoldingRangeKind.Comment:return o.FoldingRangeKind.Comment;case s.FoldingRangeKind.Imports:return o.FoldingRangeKind.Imports;case s.FoldingRangeKind.Region:return o.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(e=>new o.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind))):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(3),o=n(0),s=n(1),a=n(6);function u(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.DeclarationFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.DeclarationRequest.type)}fillClientCapabilities(e){let t=u(u(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.declarationProvider)if(!0===e.declarationProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.declarationProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDeclarationResult,e=>(t.logFailedRequest(s.DeclarationRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(e,t,i)=>r.provideDeclaration?r.provideDeclaration(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),i=n(4),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(e,t){if(o)try{let n={stdio:["pipe","pipe","ignore"]};return t&&(n.cwd=t),r.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n),!0}catch(e){return!1}else{if(!a&&!s)return e.kill("SIGKILL"),!0;try{var n=i.join(__dirname,"terminateProcess.sh");return!r.spawnSync(n,[e.pid.toString()]).error}catch(e){return!1}}}}]);
//# sourceMappingURL=ruby.js.map