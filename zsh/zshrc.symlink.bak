# Core ZSH Configuration
# ------------------

# Initialize antigen
source "/opt/homebrew/share/antigen/antigen.zsh"

# Initialize asdf
export PATH="${ASDF_DATA_DIR:-$HOME/.asdf}/shims:$PATH"
source "${XDG_CONFIG_HOME:-$HOME/.config}/asdf-direnv/zshrc"

# Plugin Management (antigen)
# -------------------------
# Load oh-my-zsh library
antigen use oh-my-zsh

# Load bundles
antigen bundles <<EOBUNDLES
    asdf
    brew
    colored-man-pages
    command-not-found
    fasd
    git
    git-extras
    jsontools
    lein
    macos
    node
    python
    vscode
    yarn
    zsh-users/zsh-syntax-highlighting
EOBUNDLES

# Theme
antigen theme robbyrussell

# Apply antigen configuration
antigen apply

# Load Local Configuration
# ----------------------
# Load local settings that shouldn't be in version control
[[ -f ~/.localrc ]] && source ~/.localrc

# Load Dotfiles
# ------------
# Load all .zsh files from dotfiles
typeset -U config_files
config_files=($HOME/.dotfiles/**/*.zsh)
for file in ${(M)config_files}; do
    source $file
done

# Custom tools
export PATH="/opt/spotify-devex/bin:$PATH"

# Shell Enhancements
# ----------------
# Initialize starship prompt
eval "$(starship init zsh)"

# 1Password plugin
source "$HOME/.config/op/plugins.sh"
